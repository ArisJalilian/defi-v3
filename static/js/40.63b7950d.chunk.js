(this.webpackJsonpdefi_v2=this.webpackJsonpdefi_v2||[]).push([[40],{3576:function(t,e,n){},3913:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n(2),o=n.n(a),c=n(24),i=n(40),s=n(18),l=n(0),d=n(2856),u=n(1179),f=n(46),b=n(716),m=n.n(b),p=n(1198),h=n.n(p),x=n(19),j=n(2863),g=n(444),O=n(435),v=n(71),w=n(3120),y=n(41),N=n(430),k=n(714),F=(n(3576),n(1212),n(717)),Y=n(2845);function C(){var t=Object(s.a)(["\n\t@media (max-width: 991px) {\n\t\tfont-size: 0.875rem;\n\t}\n"]);return C=function(){return t},t}function D(){var t=Object(s.a)(["\n\theight: 56px;\n\tpadding: 6px 20px;\n\tborder-radius: 18px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-bottom: 20px;\n\n\t:hover,\n\t:focus,\n\t:active {\n\t\ttext-decoration: none;\n\t\toutline: none;\n\t}\n"]);return D=function(){return t},t}function z(){var t=Object(s.a)(["\n\tbackground-color: rgba(135, 220, 225, 0.12);\n\theight: 56px;\n\tpadding: 6px 20px;\n\tborder-radius: 18px;\n\tcolor: ",";\n\tdisplay: flex;\n\talign-items: center;\n\ttransition: 0.3s ease all;\n\tjustify-content: center;\n\n\t:hover,\n\t:focus,\n\t:active {\n\t\tbackground-color: rgba(135, 220, 225, 1);\n\t\tcolor: ",";\n\t\ttext-decoration: none;\n\t\toutline: none;\n\t}\n"]);return z=function(){return t},t}function E(){var t=Object(s.a)(["\n\tfont-weight: 700;\n\tfont-size: 0.875rem;\n\tcolor: ",";\n\twhite-space: nowrap;\n\n\t@media (max-width: 991px) {\n\t\tfont-weight: 400;\n\t}\n"]);return E=function(){return t},t}function M(){var t=Object(s.a)(["\n\tfont-size: 1rem;\n\tfont-weight: 400;\n\tline-height: 19px;\n\tcolor: ",";\n\n\t@media (max-width: 991px) {\n\t\tfont-size: 0.875rem;\n\t}\n"]);return M=function(){return t},t}function H(){var t=Object(s.a)(["\n\ttext-decoration: none;\n\t&:hover,\n\t&:focus,\n\t&:active {\n\t\ttext-decoration: none;\n\t\toutline: none;\n\t\tbox-shadow: none;\n\t}\n"]);return H=function(){return t},t}function P(){var t=Object(s.a)(["\n\tcolor: ",";\n\twidth: 100%;\n\n\t&:hover {\n\t\tcolor: ",";\n\t\tbackground-color: ",";\n\t}\n"]);return P=function(){return t},t}function _(){var t=Object(s.a)(["\n\tborder-radius: 12px;\n\tbackground-color: ",";\n\tpadding: 6px 20px;\n\tmax-height: 40px;\n\tmin-height: 40px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\twhite-space: nowrap;\n\tfont-size: 1rem;\n\tfont-family: inherit;\n\tfont-weight: 500;\n\tborder: none;\n\toutline: none;\n\ttext-decoration: none;\n\n\t&:hover,\n\t&:focus,\n\t&:active {\n\t\ttext-decoration: none;\n\t\toutline: none;\n\t\tbox-shadow: none;\n\t}\n"]);return _=function(){return t},t}function A(){var t=Object(s.a)(["\n\tfont-size: 1.25rem;\n\tfont-weight: 700;\n\tcolor: ",";\n\tmargin: 0;\n\n\t@media (max-width: 767px) {\n\t\tmargin-bottom: 30px;\n\t}\n"]);return A=function(){return t},t}function J(){var t=Object(s.a)(["\n\tpadding: 0;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tmargin-bottom: 20px;\n\tborder: none;\n\tbackground-color: transparent;\n\n\t@media (max-width: 767px) {\n\t\tflex-direction: column;\n\t\talign-items: stretch;\n\t}\n"]);return J=function(){return t},t}var B=x.default.div(J()),I=x.default.h2(A(),(function(t){return t.theme.text1})),S=x.default.button(_(),(function(t){return t.theme.bg2})),T=Object(x.default)(S)(P(),(function(t){return t.theme.primary}),(function(t){return t.theme.bg2}),(function(t){return t.theme.primary})),q=Object(x.default)(v.b)(H()),G=x.default.span(M(),(function(t){return t.theme.text1})),K=x.default.span(E(),(function(t){return t.theme.text1})),L=Object(x.default)(v.b)(z(),(function(t){return t.theme.primary}),(function(t){return t.theme.text1})),Q=Object(x.default)(v.b)(D()),R=x.default.span(C());e.default=function(t){var e=Object(y.a)().library,n=Object(l.useState)({}),a=Object(i.a)(n,2),s=a[0],b=a[1],p=Object(f.d)(),x=Object(Y.a)().t,v=Object(f.e)((function(t){return t.governance})),C=v.spaces,D=v.loading,z=v.proposals,E=t.match.params.space,M=C[E];Object(l.useEffect)((function(){0===Object.keys(C).length?p(Object(g.b)()):C.hasOwnProperty(E)?p(Object(g.a)(E)):t.history.push("/tools/governance")}),[C,E,t.history,p]);var H=function(){var t=Object(c.a)(o.a.mark((function t(n,r){var a,c,i,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.hasOwnProperty(r)){t.next=12;break}return a={},c=n[r],t.next=5,Object(w.f)(r,M.strategies,M.network,e,Object.values(c).map((function(t){return t.address})));case 5:i=t.sent,a=Object.fromEntries(Object.entries(c).map((function(t){var e=[t[0],Object.assign({},t[1])];return e[1].score=i.reduce((function(t,n){return t+(n[e[1].address]||0)}),0),[e[0],e[1]]}))),a=Object(w.e)(a),s=Object.fromEntries(Object.entries(a).sort((function(t,e){return e[1].msg.payload.end-t[1].msg.payload.end}),0)),b(s),t.next=13;break;case 12:b({});case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();Object(l.useEffect)((function(){H(z,E)}),[z,E]);var P={onClick:function(e,n){t.history.push("/tools/governance/".concat(E,"/proposal/").concat(n[0]))}},_=[{dataField:"asset",text:x("description"),formatter:function(t,e,n){return Object(r.jsx)(G,{children:Object(O.b)(e[1].msg.payload.name,"name")})}},{dataField:"status",text:x("status"),formatter:function(t,e){var n=(Date.now()/1e3).toFixed(),a=e[1].msg.payload,o=a.start,c=n>a.end?{title:"Closed",className:"label-light-danger",responsiveClassName:"text-danger"}:n>o?{title:"Active",className:"label-light-success",responsiveClassName:"text-success"}:{title:"Pending",className:"label-light-info",responsiveClassName:"text-info"};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("span",{className:"label ".concat(c.className," label-lg d-none d-lg-flex w-100 label-inline py-3"),children:c.title}),Object(r.jsx)(R,{className:"d-flex d-lg-none ".concat(c.responsiveClassName),children:c.title})]})}},{dataField:"start",text:x("startDate"),formatter:function(t,e){return Object(r.jsx)(K,{children:h()(1e3*e[1].msg.payload.start).format("YYYY/MM/DD HH:mm")})}},{dataField:"end",text:x("endDate"),formatter:function(t,e){return Object(r.jsx)(K,{children:h()(1e3*e[1].msg.payload.end).format("YYYY/MM/DD HH:mm")})}},{dataField:"author",text:x("author"),formatter:function(t,e){return Object(r.jsxs)(K,{children:[e[1].address.slice(0,6),"...",e[1].address.slice(-4)]})}}],A={dataField:"actions",text:x("table.actions"),formatter:function(t,e){return Object(r.jsx)("div",{className:"d-flex flex-column align-items-stretch align-items-lg-center justify-content-center w-100",children:Object(r.jsx)(q,{to:"/tools/governance/".concat(E,"/proposal/").concat(e[0]),children:Object(r.jsx)(T,{children:x("viewMore")})})})},isAction:!0};return Object(r.jsx)(k.a,{title:x("governance.title"),morePadding:!0,children:Object(r.jsx)(d.a,{children:Object(r.jsx)(u.a,{xs:12,children:Object(r.jsxs)(j.a,{marginTop:-30,marginBottom:0,children:[Object(r.jsxs)(B,{children:[Object(r.jsx)(I,{className:"card-title",children:x("governance.proposals")}),Object(r.jsx)(L,{to:"".concat(t.match.url,"/create"),className:"bg-light-primary d-none d-md-flex",children:x("createNew")}),Object(r.jsx)(Q,{to:"".concat(t.match.url,"/create"),className:" btn btn-primary btn-gradient-primary d-flex d-md-none",children:x("createNew")})]}),Object(r.jsx)("div",{children:D?Object(r.jsx)("div",{className:"d-flex align-items-center justify-content-center py-5 w-100",children:Object(r.jsx)(N.a,{color:"primary",width:40,height:40,active:!0,id:"proposals"})}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(m.a,{wrapperClasses:"table-responsive d-none d-lg-block",bordered:!1,classes:"table table-head-custom table-borderless table-vertical-center overflow-hidden table-hover proposals__table",bootstrap4:!0,remote:!0,keyField:"id",columns:_,data:Object.entries(s),rowEvents:P}),Object(r.jsx)(F.a,{breakpoint:"lg",direction:"rtl",columns:_.concat(A),data:Object.entries(s),headerIndex:0})]})})]})})})})}}}]);
//# sourceMappingURL=40.63b7950d.chunk.js.map