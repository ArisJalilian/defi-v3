(this.webpackJsonpdefi_v2=this.webpackJsonpdefi_v2||[]).push([[36],{2868:function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var a=n(8),r=n(1),c=n(18),o=n(2864),i=n(19);function s(){var t=Object(c.a)(["\n\tmargin: 0;\n\tfont-weight: bold;\n\tcolor: ",";\n\tfont-size: 1.25rem;\n"]);return s=function(){return t},t}function d(){var t=Object(c.a)(["\n\tpadding: 20px;\n\tbackground-color: transparent;\n\n\t@media (min-width: 768px) {\n\t\tpadding: ",";\n\t}\n"]);return d=function(){return t},t}function l(){var t=Object(c.a)(["\n\tborder-bottom-color: ",";\n\tbackground-color: transparent;\n\tpadding: 20px;\n\n\t@media (min-width: 768px) {\n\t\tpadding: ",";\n\t}\n"]);return l=function(){return t},t}function u(){var t=Object(c.a)(["\n\t@media (max-width: 767px) {\n\t\tmargin-left: -30px;\n\t\tmargin-right: -30px;\n\t\tborder-radius: 0;\n\n\t\t.card-body {\n\t\t\tpadding-left: 30px;\n\t\t\tpadding-right: 30px;\n\t\t}\n\t}\n"]);return u=function(){return t},t}function b(){var t=Object(c.a)(["\n\tbackground-color: ",";\n\tcolor: ",";\n\tmargin-bottom: ",";\n\tmargin-top: ",";\n\tborder-radius: 18px;\n\tborder: 1px solid ",";\n"]);return b=function(){return t},t}var h=o.a.Header,j=o.a.Body,f=Object(i.default)(o.a)(b(),(function(t){return t.theme.modalBG}),(function(t){return t.theme.text1}),(function(t){var e=t.margin,n=t.marginBottom;return n?"".concat(n,"px"):e?"".concat(e,"px"):"20px"}),(function(t){var e=t.margin,n=t.marginTop;return n?"".concat(n,"px"):e?"".concat(e,"px"):"0"}),(function(t){return t.theme.text4})),m=Object(i.default)(f)(u()),p=Object(i.default)(h)(l(),(function(t){return t.theme.text3}),(function(t){return t.isTable?"30px 60px":"30px"})),x=Object(i.default)(j)(d(),(function(t){return t.isTable?"18px 48px":"30px"})),g=i.default.h4(s(),(function(t){return t.theme.text1})),O=function(t){return Object(r.jsxs)(m,Object(a.a)(Object(a.a)({},t),{},{children:[t.header&&Object(r.jsxs)(p,{isTable:t.isTable,children:[t.title&&Object(r.jsx)(g,{children:t.title}),t.header]}),Object(r.jsx)(x,{isTable:t.isTable,children:t.children||t.body})]}))};e.b=function(t){return Object(r.jsxs)(f,Object(a.a)(Object(a.a)({},t),{},{children:[t.header&&Object(r.jsxs)(p,{isTable:t.isTable,children:[t.title&&Object(r.jsx)(g,{children:t.title}),t.header]}),Object(r.jsx)(x,{isTable:t.isTable,children:t.children||t.body})]}))}},3572:function(t,e,n){},3894:function(t,e,n){"use strict";n.r(e);var a=n(59),r=n(1),c=n(2),o=n.n(c),i=n(24),s=n(28),d=n(8),l=n(40),u=n(18),b=n(0),h=n(1197),j=n(2858),f=n(1180),m=n(3570),p=n.n(m),x=n(46),g=n(19),O=n(1201),v=n.n(O),y=(n(3571),n(2868)),w=n(445),R=n(41),k=n(752),N=n(714),C=(n(3572),n(429)),T=n(215),P=n(115),z=n(2847);function S(){var t=Object(u.a)(["\n\tborder-radius: 18px;\n\tbackground-color: ",";\n\tmin-height: 56px;\n\tpadding: 18px 20px;\n\tcolor: ",";\n\tresize: none;\n\tborder: none;\n\tfont-weight: 400;\n\tfont-size: 0.875rem;\n\n\t@media (min-width: 768px) {\n\t\tfont-size: 1rem;\n\t}\n\n\t::placeholder {\n\t\tcolor: ",";\n\t}\n\n\t&:focus,\n\t&:active {\n\t\toutline: none;\n\t\tbackground-color: ",";\n\t}\n"]);return S=function(){return t},t}function B(){var t=Object(u.a)(["\n\tfont-size: 0.875rem;\n\tfont-weight: 500;\n\tmargin-bottom: 15px;\n\n\t@media (min-width: 768px) {\n\t\tfont-size: 1rem;\n\t}\n"]);return B=function(){return t},t}function D(){var t=Object(u.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tmargin-bottom: 30px;\n"]);return D=function(){return t},t}function H(){var t=Object(u.a)([""]);return H=function(){return t},t}function I(){var t=Object(u.a)(["\n\tfont-size: 1.25rem;\n\tfont-weight: 700;\n\tcolor: ",";\n\tmargin: 0;\n"]);return I=function(){return t},t}function M(){var t=Object(u.a)(["\n\tpadding: 0;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tmargin-bottom: 40px;\n\tmargin-top: 10px;\n\tborder: none;\n\tbackground-color: transparent;\n"]);return M=function(){return t},t}function W(){var t=Object(u.a)(["\n\tborder: none;\n\tmargin-top: -70px;\n\n\t@media (min-width: 768px) {\n\t\tmargin-top: -30px;\n\t}\n"]);return W=function(){return t},t}var X=Object(g.default)(y.a)(W()),A=g.default.div(M()),J=g.default.h2(I(),(function(t){return t.theme.text1})),L=Object(g.default)(h.a.Row)(H()),Y=Object(g.default)(h.a.Group)(D()),E=Object(g.default)(h.a.Label)(B()),F=Object(g.default)(h.a.Control)(S(),(function(t){return t.theme.bg2}),(function(t){return t.theme.text1}),(function(t){return t.theme.text4}),(function(t){return t.theme.bg2}));e.default=function(t){var e=Object(R.a)(),n=e.account,c=e.library,u=new k.a,m=Object(P.g)(),g=Object(x.d)(),O=Object(x.e)((function(t){return t.governance})).spaces,y=Object(z.a)().t,S=Object(b.useState)(!1),B=Object(l.a)(S,2),D=B[0],H=B[1],I=Object(b.useState)({name:"",body:"",choices:["",""],snapshot:[],dateRange:{from:null,to:null},metadata:{}}),M=Object(l.a)(I,2),W=M[0],G=M[1],_=t.match.params.space,q=function(t,e){G((function(n){return Object(d.a)(Object(d.a)({},n),{},Object(s.a)({},t,e))}))},Q=function(){var t={start:v()("".concat(W.dateRange.from.year,"-").concat(W.dateRange.from.month,"-").concat(W.dateRange.from.day)).format("X"),end:v()("".concat(W.dateRange.to.year,"-").concat(W.dateRange.to.month,"-").concat(W.dateRange.to.day)).format("X")};return!D&&n&&W.name&&W.body&&t.start&&t.end&&t.end>t.start&&W.snapshot&&W.choices.length>=2&&!W.choices.some((function(t){return""===t}))},K=function(){var e=Object(i.a)(o.a.mark((function e(a){var r,i,s,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),n){e.next=4;break}return m(),e.abrupt("return",!1);case 4:if(!Q()){e.next=28;break}return H(!0),r={name:W.name,body:W.body,snapshot:W.snapshot,choices:W.choices,start:v()("".concat(W.dateRange.from.year,"-").concat(W.dateRange.from.month,"-").concat(W.dateRange.from.day)).format("X"),end:v()("".concat(W.dateRange.to.year,"-").concat(W.dateRange.to.month,"-").concat(W.dateRange.to.day)).format("X"),metadata:Object(d.a)(Object(d.a)({},W.metadata),{},{strategies:O[_].strategies})},i={token:O[_].token,type:"proposal",space:_,payload:r},s={address:n,msg:JSON.stringify(Object(d.a)({version:"0.1.3",timestamp:(Date.now()/1e3).toFixed()},i))},e.prev=9,Object(T.c)("Sending ...",{icon:"\ud83d\udca1"}),e.next=13,c.getSigner(n).signMessage(s.msg);case 13:return s.sig=e.sent,e.next=16,u.sendMessage(s);case 16:l=e.sent,H(!1),T.c.success("Your Proposal is in!"),l.hasOwnProperty("ipfsHash")&&t.history.push("/tools/governance/".concat(_)),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(9),T.c.error("Something went wrong!"),H(!1);case 26:e.next=29;break;case 28:T.c.error("Please fill all Fields and your proposal choices should be more than 1");case 29:case"end":return e.stop()}}),e,null,[[9,22]])})));return function(t){return e.apply(this,arguments)}}();Object(b.useEffect)((function(){0===Object.keys(O).length?g(Object(w.b)()):O.hasOwnProperty(_)||t.history.push("/tools/governance")}),[O,_,g,t.history]),Object(b.useEffect)((function(){q("snapshot",c.blockNumber)}),[c.blockNumber]);return Object(r.jsx)(N.a,{title:y("governance.title"),hasBg:!0,children:Object(r.jsx)(j.a,{children:Object(r.jsx)(f.a,{xs:12,children:Object(r.jsxs)(X,{marginBottom:0,children:[Object(r.jsx)(A,{children:Object(r.jsx)(J,{className:"card-title",children:y("governance.createProposal")})}),Object(r.jsx)("div",{children:Object(r.jsx)(h.a,{children:Object(r.jsxs)(L,{className:"custom-row",children:[Object(r.jsxs)(Y,{as:f.a,xs:12,children:[Object(r.jsx)(E,{children:y("governance.question")}),Object(r.jsx)(F,{as:"textarea",rows:"5",placeholder:"Question",value:W.name,onChange:function(t){return q("name",t.target.value)}})]}),Object(r.jsxs)(Y,{as:f.a,xs:12,children:[Object(r.jsx)(E,{children:y("governance.whatIsYourProposal")}),Object(r.jsx)(F,{as:"textarea",rows:"5",placeholder:y("governance.whatIsYourProposal"),value:W.body,onChange:function(t){return q("body",t.target.value)}})]}),Object(r.jsx)(f.a,{xs:12,children:Object(r.jsxs)(j.a,{children:[Object(r.jsxs)(Y,{as:f.a,xs:12,md:12,lg:4,children:[Object(r.jsx)(E,{children:"Snapshot"}),Object(r.jsx)(F,{placeholder:"Snapshot",value:W.snapshot,onChange:function(t){return q("snapshot",t.target.value)}})]}),Object(r.jsx)(f.a,{xs:12,md:6,lg:8,children:Object(r.jsxs)(j.a,{children:[Object(r.jsxs)(Y,{as:f.a,xs:12,md:6,children:[Object(r.jsx)(E,{children:y("startDate")}),Object(r.jsx)(p.a,{wrapperClassName:"d-flex",value:W.dateRange,onChange:function(t){return q("dateRange",t)},colorPrimary:"#87dce1",colorPrimaryLight:"rgba(135, 220, 225, 0.2)",renderInput:function(t){var e=t.ref;return Object(r.jsx)(F,{ref:e,placeholder:"Select a Date",value:W.dateRange.from?"".concat(W.dateRange.from.year,"/").concat(W.dateRange.from.month,"/").concat(W.dateRange.from.day):""})},shouldHighlightWeekends:!0})]}),Object(r.jsxs)(Y,{as:f.a,xs:12,md:6,children:[Object(r.jsx)(E,{children:y("endDate")}),Object(r.jsx)(p.a,{wrapperClassName:"d-flex",value:W.dateRange,onChange:function(t){return q("dateRange",t)},colorPrimary:"#87dce1",colorPrimaryLight:"rgba(135, 220, 225, 0.2)",renderInput:function(t){var e=t.ref;return Object(r.jsx)(F,{ref:e,placeholder:"Select a Date",value:W.dateRange.to?"".concat(W.dateRange.to.year,"/").concat(W.dateRange.to.month,"/").concat(W.dateRange.to.day):""})},shouldHighlightWeekends:!0})]})]})})]})}),Object(r.jsxs)(Y,{as:f.a,xs:12,className:"d-flex flex-column",children:[Object(r.jsx)(E,{children:y("choices")}),W.choices.map((function(t,e){return Object(r.jsx)(F,{value:W.choices[e],onChange:function(t){var n=Object(a.a)(W.choices);n[e]=t.target.value,q("choices",n)},placeholder:"".concat(y("choice")," ").concat(e+1),className:"mb-3"},"choice-".concat(e+1))})),Object(r.jsxs)("button",{className:"btn btn-link align-self-center align-self-md-end p-0 d-flex align-items-center justify-content-center",onClick:function(t){t.preventDefault();var e=W.choices.concat("");q("choices",e)},children:[Object(r.jsxs)("svg",{width:"15px",height:"15px",viewBox:"0 0 16 16",className:"bi bi-plus-circle",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[Object(r.jsx)("path",{fillRule:"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),Object(r.jsx)("path",{fillRule:"evenodd",d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"})]}),Object(r.jsx)("span",{className:"pl-2",children:y("addChoice")})]})]}),Object(r.jsx)(Y,{as:f.a,className:"d-flex flex-column flex-md-row align-items-stretch align-items-md-center justify-content-center mb-0",children:Object(r.jsx)("button",{className:"btn btn-primary py-3",onClick:K,style:{minWidth:250,marginBottom:60,marginTop:30},children:n?D?Object(r.jsx)("div",{className:"d-flex align-items-center justify-content-center w-100",children:Object(r.jsx)(C.a,{width:18,height:18,active:!0,color:"#fff",id:"create-proposal"})}):y("publish"):"Connect Wallet"})})]})})})]})})})})}}}]);
//# sourceMappingURL=36.565261df.chunk.js.map