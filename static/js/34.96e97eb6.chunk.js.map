{"version":3,"sources":["components/Card/index.js","components/BookOption/index.js","pages/Margin/components/Orderbook/index.js","pages/Margin/components/TradeHistory/index.js","pages/Margin/components/MarketDetails/index.js","http/ddex.js","state/margin/hooks.js","pages/Margin/components/OrderHistory/index.js","pages/Margin/Provider.js","pages/Margin/components/MarketStats/index.js","pages/Margin/components/BuyOrSell/index.js","pages/Margin/index.js"],"names":["Header","Card","Body","CustomCard","styled","theme","modalBG","text1","margin","marginBottom","marginTop","text4","RCard","CustomHeader","text3","isTable","CustomBody","CustomTitle","h4","ResponsiveCard","props","header","title","children","body","Comp","Wrapper","div","bg3","active","Cell","variant","BookOption","onClick","onChange","isSell","isBuy","Container","EmptyText","span","BookOptionType","StyledBookOption","HeaderRow","TableRow","TR","CustomHead","InnerTR","TH","SpreadTitle","SpreadTR","TD","TBody","lighten","OrderToRow","getPrice","price","decimals","Number","toFixed","_setOrderPriceSelected","size","a","order","side","onSetOrderBuyPriceSelected","onSetOrderSellPriceSelected","onSetOrderPriceSelected","onSetMakerAmountSelected","amount","this","priceColor","mySizeOrders","mySize","reduce","sumSize","mySizeItem","id","orderId","isMySizeEmpty","Component","OrderToRowContainer","connect","dispatch","orderPriceSelected","setOrderPriceSelected","setOrderBuyPriceSelected","setOrderSellPriceSelected","makerAmountSelected","setMakerAmountSelected","Orderbook","state","bookOption","getSpread","orderbook","selectedMarket","asks","bids","lowestSellPrice","highestBuyPrice","Math","abs","getSpreadPercent","s","spread","undefined","baseAssetDecimals","quoteAssetDecimals","handleBookOption","option","setState","_spreadRowScrollable","React","createRef","_spreadRowFixed","_itemsScroll","content","orderbookState","myOrders","t","ServerState","NotLoaded","length","mySizeSellArray","mySizeBuyArray","Array","isArray","filter","status","spreadAbsFixed","spreadPercentFixed","bookOptionState","className","formatTokenSymbol","quoteAsset","map","index","count","orders","baseToken","baseAsset","currencyPair","Loading","width","height","isMobile","data","selectedMarketStats","myOrdersState","withTranslation","TableContainer","trades","tradesStats","useTranslation","i","fill","moment","createdAt","format","fillToRow","StyledCard","Text","Img","marketStats","account","useActiveWeb3React","columns","dataField","text","formatter","cellContent","row","marketId","high","low","volume","wrapperClasses","bordered","classes","bootstrap4","keyField","remote","ResponsiveTable","breakpoint","direction","withoutBorder","DDexApi","web3","Web3","process","isValidAuthCode","expire","now","Date","privateReqHandler","authCode","authCodeExpire","getAuthCode","baseURL","PROXY_URL","instance","axios","create","timeout","interceptors","response","use","res","hasOwnProperty","err","web3Instance","get","params","level","page","perPage","message","Promise","resolve","reject","eth","personal","sign","utils","toHex","then","catch","signer","HydroAuthentication","post","headers","signature","method","delete","useApi","useSelector","useDispatch","givenProvider","providers","WebsocketProvider","api","useMemo","useEffect","setAuthCode","setAccount","useAuthSigner","useCallback","actions","useMarginUpdater","marketUpdater","useMarketUpdater","userUpdater","useUserUpdater","CardTitle","Content","InnerContent","Close","CloseIcon","ordersStats","accessToPrivate","cancelOrder","updater","deleteOrder","desc","toast","success","error","useOrderCanceler","Error","quoteToken","tokenQuoteSymbol","isWeth","toLowerCase","toUpperCase","tokenBaseSymbol","market","sideLabel","baseDecimals","orderSize","BigNumber","times","tokenAmountInUnits","filled","confirmedAmount","bind","orderToRow","Button","interval","Providers","marketChanger","getMarket","useMarketChanger","useParams","history","useHistory","clearInterval","DEFAULT_MARGIN_MARKET","setInterval","UPDATE_MARGIN_INTERVAL","push","CustomInputGroup","InputGroup","value","danger","button","primary","AutoHeight","withRouter","marketsState","markets","useState","query","setQuery","changeQueryHandler","e","target","searchedMarkets","JSON","stringify","indexOf","rowIndex","rowEvents","src","SearchIcon","Form","placeholder","TabsContainer","TabWrapper","Tab","MarketType","MarketButton","FormContainer","Label","label","orderTypes","limit","stopLimit","BuyOrSell","OrderSide","Buy","activeSide","setActiveSide","activeOrderType","setActiveOrderType","setPrice","setAmount","orderBuilder","buildUnsignedOrder","signOrder","placeOrder","useOrderBuilder","submitHandler","transformedPrice","transformedAmount","isNaN","orderBody","orderType","walletType","Sell","supportedOrderTypes","tab","disabled","htmlFor","type","style","minWidth","fontSize","fontWeight","Row","justMobile","justDesktop","Col","ContainerCard","Margin","Page","morePadding","Provider","isTradingGraphic","symbol","split","join","Themes","DARK","allow_symbol_change"],"mappings":"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","file":"static/js/34.96e97eb6.chunk.js","sourcesContent":["import { Card } from \"react-bootstrap\";\nimport styled from \"styled-components\";\n\nconst { Header, Body } = Card;\n\nexport const CustomCard = styled(Card)`\n\tbackground-color: ${({ theme }) => theme.modalBG};\n\tcolor: ${({ theme }) => theme.text1};\n\tmargin-bottom: ${({ margin, marginBottom }) =>\n\t\tmarginBottom ? `${marginBottom}px` : margin ? `${margin}px` : \"20px\"};\n\tmargin-top: ${({ margin, marginTop }) => (marginTop ? `${marginTop}px` : margin ? `${margin}px` : \"0\")};\n\tborder-radius: 18px;\n\tborder: 1px solid ${({ theme }) => theme.text4};\n`;\n\nexport const RCard = styled(CustomCard)`\n\t@media (max-width: 767px) {\n\t\tmargin-left: -30px;\n\t\tmargin-right: -30px;\n\t\tborder-radius: 0;\n\n\t\t.card-body {\n\t\t\tpadding-left: 30px;\n\t\t\tpadding-right: 30px;\n\t\t}\n\t}\n`;\n\nexport const CustomHeader = styled(Header)`\n\tborder-bottom-color: ${({ theme }) => theme.text3};\n\tbackground-color: transparent;\n\tpadding: 20px;\n\n\t@media (min-width: 768px) {\n\t\tpadding: ${({ isTable }) => (isTable ? \"30px 60px\" : \"30px\")};\n\t}\n`;\n\nexport const CustomBody = styled(Body)`\n\tpadding: 20px;\n\tbackground-color: transparent;\n\n\t@media (min-width: 768px) {\n\t\tpadding: ${({ isTable }) => (isTable ? \"18px 48px\" : \"30px\")};\n\t}\n`;\n\nexport const CustomTitle = styled.h4`\n\tmargin: 0;\n\tfont-weight: bold;\n\tcolor: ${({ theme }) => theme.text1};\n\tfont-size: 1.25rem;\n`;\n\nconst Comp = (props) => {\n\treturn (\n\t\t<CustomCard {...props}>\n\t\t\t{props.header && (\n\t\t\t\t<CustomHeader isTable={props.isTable}>\n\t\t\t\t\t{props.title && <CustomTitle>{props.title}</CustomTitle>}\n\t\t\t\t\t{props.header}\n\t\t\t\t</CustomHeader>\n\t\t\t)}\n\t\t\t<CustomBody isTable={props.isTable}>{props.children || props.body}</CustomBody>\n\t\t</CustomCard>\n\t);\n};\nexport const ResponsiveCard = (props) => {\n\treturn (\n\t\t<RCard {...props}>\n\t\t\t{props.header && (\n\t\t\t\t<CustomHeader isTable={props.isTable}>\n\t\t\t\t\t{props.title && <CustomTitle>{props.title}</CustomTitle>}\n\t\t\t\t\t{props.header}\n\t\t\t\t</CustomHeader>\n\t\t\t)}\n\t\t\t<CustomBody isTable={props.isTable}>{props.children || props.body}</CustomBody>\n\t\t</RCard>\n\t);\n};\n\nexport default Comp;\n","import styled from \"styled-components\";\n\nconst Wrapper = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: flex-start;\n\tjustify-content: space-between;\n\twidth: 30px;\n\theight: 30px;\n\tmin-width: 30px;\n\tmin-height: 30px;\n\tpadding: 10px 6px;\n\tbackground-color: ${({ theme }) => theme.bg3};\n\tborder-radius: 30px;\n\topacity: ${({ active }) => (active ? \"1\" : \"0.5\")};\n\tcursor: pointer;\n`;\n\nconst Cell = styled.div`\n\theight: 2px;\n\tborder-radius: 9px;\n\twidth: 13px;\n\tbackground-color: ${({ theme, variant }) => (variant ? theme[variant] : \"#D3D6E8\")};\n\n\t&:not(:last-child) {\n\t\twidth: 17px;\n\t}\n`;\n\nconst BookOption = (props) => {\n\treturn (\n\t\t<Wrapper active={props.active} onClick={props.onChange} {...props}>\n\t\t\t<Cell variant={props.isSell && \"danger\"} />\n\t\t\t<Cell />\n\t\t\t<Cell variant={props.isBuy && \"success\"} />\n\t\t</Wrapper>\n\t);\n};\n\nexport default BookOption;\n","import { connect } from \"react-redux\";\nimport styled from \"styled-components\";\nimport { lighten } from \"polished\";\n\nimport { ServerState } from \"../../../../constants\";\nimport { formatTokenSymbol } from \"../../../../utils/spot/tokens\";\nimport {\n\tsetMakerAmountSelected,\n\tsetOrderBuyPriceSelected,\n\tsetOrderPriceSelected,\n\tsetOrderSellPriceSelected,\n} from \"../../../../state/margin/actions\";\nimport React, { Component } from \"react\";\nimport Loading from \"../../../../components/Loading\";\nimport BookOption from \"../../../../components/BookOption\";\nimport { withTranslation } from \"react-i18next\";\n\nconst Container = styled.div`\n\twidth: 260px;\n\tdisplay: flex;\n\tflex-direction: column;\n\n\t@media (max-width: 1400px) {\n\t\twidth: 100%;\n\t}\n`;\n\nconst EmptyText = styled.span`\n\tfont-size: 0.875rem;\n\tfont-weight: 400;\n\tcolor: ${({ theme }) => theme.text1};\n`;\nconst BookOptionType = {\n\tBuySellBook: 0,\n\tSellBook: 1,\n\tBuyBook: 2,\n};\n\nconst StyledBookOption = styled(BookOption)`\n\t&:not(:last-child) {\n\t\tmargin-right: 10px;\n\t}\n`;\n\nconst HeaderRow = styled.div`\n\tmargin-bottom: 12px;\n\n\t@media (max-width: 1400px) {\n\t\tmargin-bottom: 34px;\n\t}\n`;\nconst TitleRow = styled.div`\n\tmargin-bottom: 15px;\n\n\t@media (max-width: 1400px) {\n\t\tmargin-bottom: 10px;\n\t\talign-items: flex-end;\n\t}\n`;\nconst TableRow = styled.div`\n\tdisplay: flex;\n\tflex: 1;\n\tmax-height: 524px;\n\tflex-direction: column;\n\n\t@media (max-width: 1400px) {\n\t\tmargin-bottom: 0;\n\t\tmax-height: initial;\n\t}\n`;\n\nconst Title = styled.span`\n\tcolor: ${({ theme }) => theme.text1};\n\tfont-weight: bold;\n\tfont-size: 1rem;\n\tline-height: 1;\n\n\t@media (max-width: 1400px) {\n\t\tmargin-bottom: 10px;\n\t}\n`;\n\nconst Result = styled.span`\n\tcolor: ${({ theme }) => theme.text1};\n\tfont-weight: 500;\n\tfont-size: 0.75rem;\n`;\n\nconst TR = styled.div`\n\tpadding: 6px 16px;\n\tborder-radius: 12px;\n\tmargin-bottom: 12px;\n\tmax-height: 32px;\n\theight: 32px;\n\tdisplay: grid;\n\tgrid-template-columns: 1fr 1fr 1fr;\n\n\t@media (max-width: 1400px) {\n\t\tmax-height: 56px;\n\t\tpadding: 18px 20px;\n\t\tborder-radius: 18px;\n\t\theight: 56px;\n\t}\n`;\nconst CustomHead = styled(TR)`\n\tbackground-color: ${({ theme }) => theme.text1}10;\n`;\n\nconst InnerTR = styled(TR)`\n\tbackground-color: transparent;\n\tcursor: pointer;\n\ttransition: all ease 0.3s;\n\tmargin-bottom: 2px;\n\tmax-height: 24px;\n\tpadding: 4px 16px;\n\n\t@media (max-width: 1400px) {\n\t\tmax-height: 56px;\n\t\tpadding: 18px 20px;\n\t\tborder-radius: 18px;\n\t\theight: 56px;\n\t}\n\n\t&:hover {\n\t\tbackground-color: ${({ theme }) => theme.text1}06;\n\t}\n`;\n\nconst TH = styled.span`\n\tcolor: ${({ theme }) => theme.text1};\n\tfont-size: 0.75rem;\n\tfont-weight: 400;\n\twhite-space: nowrap;\n`;\n\nconst SpreadTitle = styled.span`\n\tcolor: ${({ theme }) => theme.text1};\n\tfont-size: 0.75rem;\n\tfont-weight: 500;\n\twhite-space: nowrap;\n`;\n\nconst SpreadTR = styled(CustomHead)`\n\tmargin-bottom: 8px;\n\tmargin-top: 4px;\n`;\n\nconst TD = styled.span`\n\tcolor: ${({ theme, variant }) => (variant ? theme[variant] : theme.text1)};\n\tfont-size: 0.75rem;\n\tfont-weight: 400;\n\tpadding-right: 5px;\n`;\n\nconst TBody = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex: 1;\n\tmax-height: 366px;\n\tmin-height: 366px;\n\toverflow-x: hidden;\n\toverflow-y: auto;\n\n\t@media (max-width: 1400px) {\n\t\tmax-height: initial;\n\t}\n\n\t/* width */\n\t::-webkit-scrollbar {\n\t\twidth: 3px;\n\t}\n\n\t/* Track */\n\t::-webkit-scrollbar-track {\n\t\tbox-shadow: none;\n\t\tbackground-color: transparent;\n\t\tborder-radius: 10px;\n\t\tpadding: 0 6px;\n\t\tmargin: 0 6px;\n\t\tborder-right: 1px solid ${({ theme }) => theme.text1};\n\t}\n\n\t/* Handle */\n\t::-webkit-scrollbar-thumb {\n\t\tbackground: ${({ theme }) => theme.text1};\n\t\tborder-radius: 10px;\n\t\twidth: 4px !important;\n\t}\n\n\t/* Handle on hover */\n\t::-webkit-scrollbar-thumb:hover {\n\t\tbackground: ${({ theme }) => lighten(0.08, theme.text1)};\n\t}\n`;\n\nclass OrderToRow extends Component {\n\trender() {\n\t\tconst { order, priceColor, mySizeOrders } = this.props;\n\n\t\tconst size = order?.amount;\n\t\tconst price = order?.price;\n\t\tconst mySize = mySizeOrders\n\t\t\t? mySizeOrders?.reduce((sumSize, mySizeItem) => {\n\t\t\t\t\tif (mySizeItem?.id === order?.orderId) {\n\t\t\t\t\t\tconst mySizeAmount = mySizeItem?.amount;\n\t\t\t\t\t\treturn (sumSize += mySizeAmount);\n\t\t\t\t\t}\n\t\t\t\t\treturn sumSize;\n\t\t\t  }, 0)\n\t\t\t: 0;\n\n\t\tconst isMySizeEmpty = mySize === 0;\n\n\t\treturn (\n\t\t\t<InnerTR onClick={() => this._setOrderPriceSelected(price)}>\n\t\t\t\t<TD>{size}</TD>\n\t\t\t\t<TD variant={priceColor}>{price}</TD>\n\t\t\t\t<TD>{isMySizeEmpty ? \"-\" : mySize}</TD>\n\t\t\t</InnerTR>\n\t\t);\n\t}\n\n\tgetPrice = (price, decimals) => {\n\t\treturn (Number(price) * 10 ** decimals).toFixed(4);\n\t};\n\n\t_setOrderPriceSelected = async (size) => {\n\t\tconst { order } = this.props;\n\n\t\tif (order.side === \"BUY\") {\n\t\t\tawait this.props.onSetOrderBuyPriceSelected(size.price);\n\t\t} else {\n\t\t\tawait this.props.onSetOrderSellPriceSelected(size.price);\n\t\t}\n\n\t\tawait this.props.onSetOrderPriceSelected(size.price);\n\t\tawait this.props.onSetMakerAmountSelected(size.amount);\n\t};\n}\n\nconst mapOrderToRowDispatchToProps = (dispatch) => {\n\treturn {\n\t\tonSetOrderPriceSelected: (orderPriceSelected) => dispatch(setOrderPriceSelected(orderPriceSelected)),\n\t\tonSetOrderBuyPriceSelected: (orderPriceSelected) => dispatch(setOrderBuyPriceSelected(orderPriceSelected)),\n\t\tonSetOrderSellPriceSelected: (orderPriceSelected) => dispatch(setOrderSellPriceSelected(orderPriceSelected)),\n\t\tonSetMakerAmountSelected: (makerAmountSelected) => dispatch(setMakerAmountSelected(makerAmountSelected)),\n\t};\n};\n\nconst OrderToRowContainer = connect(null, mapOrderToRowDispatchToProps)(OrderToRow);\n\nclass Orderbook extends Component {\n\tstate = {\n\t\tbookOption: BookOptionType.BuySellBook,\n\t};\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis._spreadRowScrollable = React.createRef();\n\t\tthis._spreadRowFixed = React.createRef();\n\t\tthis._itemsScroll = React.createRef();\n\t}\n\n\tgetSpread = () => {\n\t\tconst { orderbook, selectedMarket } = this.props;\n\t\tconst { asks, bids } = orderbook;\n\n\t\tif (!selectedMarket) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tconst lowestSellPrice = Number(asks?.[0]?.price);\n\t\tconst highestBuyPrice = Number(bids?.[0]?.price);\n\n\t\treturn Math.abs(lowestSellPrice - highestBuyPrice).toFixed(4);\n\t};\n\n\tgetSpreadPercent = (spread = undefined) => {\n\t\tlet s;\n\t\tif (!spread || typeof spread !== \"number\") {\n\t\t\ts = this.getSpread();\n\t\t} else {\n\t\t\ts = spread;\n\t\t}\n\n\t\tconst { orderbook, selectedMarket } = this.props;\n\t\tconst { asks } = orderbook;\n\n\t\tconst lowestSellPrice =\n\t\t\tNumber(asks?.[0]?.price) *\n\t\t\t10 ** Math.abs(selectedMarket?.baseAssetDecimals - selectedMarket?.quoteAssetDecimals);\n\n\t\treturn ((s / lowestSellPrice) * 100).toFixed(2);\n\t};\n\n\thandleBookOption = (option) => {\n\t\tthis.setState({ bookOption: option });\n\t};\n\n\trender() {\n\t\tconst { orderbook = {}, orderbookState, selectedMarket, myOrders = {}, t } = this.props;\n\n\t\tconst { asks, bids } = orderbook;\n\n\t\tlet content;\n\n\t\tif (!selectedMarket || orderbookState === ServerState.NotLoaded) {\n\t\t\tcontent = (\n\t\t\t\t<div className=\"w-100 h-100 d-flex align-items-center justify-content-center\">\n\t\t\t\t\t<Loading\n\t\t\t\t\t\twidth={40}\n\t\t\t\t\t\theight={40}\n\t\t\t\t\t\tid={`margin-orderbooks-${this.props.isMobile ? \"mobile\" : \"desktop\"}`}\n\t\t\t\t\t\tactive\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} else if ((!asks?.length && !bids?.length) || !selectedMarket) {\n\t\t\tcontent = (\n\t\t\t\t<div className=\"w-100 h-100 d-flex align-items-center justify-content-center\">\n\t\t\t\t\t<EmptyText>{t(\"errors.noTrade\")}</EmptyText>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} else {\n\t\t\tlet mySizeSellArray = [];\n\t\t\tlet mySizeBuyArray = [];\n\n\t\t\tif (Array.isArray(myOrders)) {\n\t\t\t\tmySizeSellArray = myOrders\n\t\t\t\t\t? myOrders?.filter((order) => {\n\t\t\t\t\t\t\treturn order?.side === \"sell\" && order?.status === \"pending\";\n\t\t\t\t\t  })\n\t\t\t\t\t: [];\n\t\t\t\tmySizeBuyArray = myOrders\n\t\t\t\t\t? myOrders?.filter((order) => {\n\t\t\t\t\t\t\treturn order?.side === \"buy\" && order?.status === \"pending\";\n\t\t\t\t\t  })\n\t\t\t\t\t: [];\n\t\t\t}\n\n\t\t\tconst spreadAbsFixed = this.getSpread();\n\t\t\tconst spreadPercentFixed = this.getSpreadPercent(spreadAbsFixed);\n\n\t\t\tconst bookOptionState = this.state.bookOption;\n\n\t\t\tcontent = (\n\t\t\t\t<>\n\t\t\t\t\t<HeaderRow className=\"d-flex align-items-center justify-content-between\">\n\t\t\t\t\t\t<div className={\"d-flex align-items-center\"}>\n\t\t\t\t\t\t\t<StyledBookOption\n\t\t\t\t\t\t\t\tactive={bookOptionState === BookOptionType.BuySellBook}\n\t\t\t\t\t\t\t\tonChange={() => this.handleBookOption(BookOptionType.BuySellBook)}\n\t\t\t\t\t\t\t\tisSell={true}\n\t\t\t\t\t\t\t\tisBuy\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<StyledBookOption\n\t\t\t\t\t\t\t\tactive={bookOptionState === BookOptionType.BuyBook}\n\t\t\t\t\t\t\t\tonChange={() => this.handleBookOption(BookOptionType.BuyBook)}\n\t\t\t\t\t\t\t\tisBuy\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<StyledBookOption\n\t\t\t\t\t\t\t\tactive={bookOptionState === BookOptionType.SellBook}\n\t\t\t\t\t\t\t\tonChange={() => this.handleBookOption(BookOptionType.SellBook)}\n\t\t\t\t\t\t\t\tisSell\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</HeaderRow>\n\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t<CustomHead>\n\t\t\t\t\t\t\t<TH>{t(\"size\")}</TH>\n\t\t\t\t\t\t\t<TH>\n\t\t\t\t\t\t\t\t{t(\"price\")} ({formatTokenSymbol(selectedMarket?.quoteAsset)})\n\t\t\t\t\t\t\t</TH>\n\t\t\t\t\t\t\t<TH>{t(\"mySize\")}</TH>\n\t\t\t\t\t\t</CustomHead>\n\t\t\t\t\t\t<TBody>\n\t\t\t\t\t\t\t{(bookOptionState === BookOptionType.BuySellBook ||\n\t\t\t\t\t\t\t\tbookOptionState === BookOptionType.SellBook) &&\n\t\t\t\t\t\t\t\tasks.map((order, index) => (\n\t\t\t\t\t\t\t\t\t<OrderToRowContainer\n\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\torder={order}\n\t\t\t\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t\t\t\t\tcount={asks.length}\n\t\t\t\t\t\t\t\t\t\torders={asks}\n\t\t\t\t\t\t\t\t\t\tbaseToken={selectedMarket?.baseAsset}\n\t\t\t\t\t\t\t\t\t\tpriceColor={\"danger\"}\n\t\t\t\t\t\t\t\t\t\tmySizeOrders={mySizeSellArray}\n\t\t\t\t\t\t\t\t\t\tcurrencyPair={selectedMarket}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t))}\n\n\t\t\t\t\t\t\t<SpreadTR>\n\t\t\t\t\t\t\t\t<SpreadTitle>{t(\"spread\")}</SpreadTitle>\n\t\t\t\t\t\t\t\t<SpreadTitle>{spreadAbsFixed}</SpreadTitle>\n\t\t\t\t\t\t\t\t<SpreadTitle>{spreadPercentFixed}%</SpreadTitle>\n\t\t\t\t\t\t\t</SpreadTR>\n\n\t\t\t\t\t\t\t{(bookOptionState === BookOptionType.BuyBook ||\n\t\t\t\t\t\t\t\tbookOptionState === BookOptionType.BuySellBook) &&\n\t\t\t\t\t\t\t\tbids.map((order, index) => (\n\t\t\t\t\t\t\t\t\t<OrderToRowContainer\n\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\torder={order}\n\t\t\t\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t\t\t\t\tcount={bids.length}\n\t\t\t\t\t\t\t\t\t\torders={bids}\n\t\t\t\t\t\t\t\t\t\tbaseToken={selectedMarket?.baseAsset}\n\t\t\t\t\t\t\t\t\t\tpriceColor={\"success\"}\n\t\t\t\t\t\t\t\t\t\tmySizeOrders={mySizeBuyArray}\n\t\t\t\t\t\t\t\t\t\tcurrencyPair={selectedMarket}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</TBody>\n\t\t\t\t\t</TableRow>\n\t\t\t\t</>\n\t\t\t);\n\t\t}\n\n\t\treturn <Container>{content}</Container>;\n\t}\n}\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\torderbook: state.margin.orderbook.data,\n\t\torderbookState: state.margin.orderbook.state,\n\t\tselectedMarket: state.margin.selectedMarketStats,\n\t\tmyOrders: state.margin.orders.data,\n\t\tmyOrdersState: state.margin.orders.state,\n\t};\n};\n\nexport default connect(mapStateToProps)(withTranslation()(Orderbook));\n","import { connect } from \"react-redux\";\n\nimport { OrderSide, ServerState, USE_RELAYER_MARKET_UPDATES } from \"../../../../constants\";\nimport { changeMarket } from \"../../../../state/spot/actions\";\nimport { isWeth } from \"../../../../utils/known_tokens\";\nimport { getCurrencyPairByTokensSymbol } from \"../../../../utils/spot/knownCurrencyPair\";\nimport { marketToStringFromTokens } from \"../../../../utils/spot/market\";\nimport { formatTokenSymbol, tokenAmountInUnits } from \"../../../../utils/spot/tokens\";\nimport Loading from \"../../../../components/Loading\";\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport { lighten } from \"polished\";\nimport BigNumber from \"bignumber.js\";\nimport moment from \"moment\";\nimport { useTranslation } from \"react-i18next\";\n\nconst EmptyText = styled.span`\n\tfont-size: 0.875rem;\n\tfont-weight: 400;\n\tcolor: ${({ theme }) => theme.text1};\n`;\nconst Container = styled.div`\n\twidth: 280px;\n\tdisplay: flex;\n\tflex-direction: column;\n\n\t@media (max-width: 1400px) {\n\t\twidth: 100%;\n\t}\n`;\n\nconst TR = styled.div`\n\tpadding: 4px 16px;\n\tborder-radius: 12px;\n\tmargin-bottom: 4px;\n\tmax-height: 24px;\n\theight: 24px;\n\tdisplay: grid;\n\tgrid-template-columns: 1fr 1fr 1fr;\n\n\t@media (max-width: 1400px) {\n\t\tmax-height: 56px;\n\t\tpadding: 18px 20px;\n\t\tborder-radius: 18px;\n\t\theight: 56px;\n\t}\n`;\nconst CustomHead = styled(TR)`\n\tbackground-color: ${({ theme }) => theme.text1}10;\n\tmax-height: 32px;\n\theight: 32px;\n\tmargin-bottom: 12px;\n\tpadding: 8px 16px;\n`;\n\nconst TH = styled.span`\n\tcolor: ${({ theme }) => theme.text1};\n\tfont-size: 0.75rem;\n\tfont-weight: 400;\n`;\n\nconst TD = styled.span`\n\tcolor: ${({ theme, variant }) => (variant ? theme[variant] : theme.text1)};\n\tfont-size: 0.75rem;\n\tfont-weight: 400;\n\tpadding-right: 5px;\n`;\n\nconst TBody = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex: 1;\n\tmax-height: 366px;\n\tmin-height: 366px;\n\toverflow-x: hidden;\n\toverflow-y: auto;\n\n\t@media (max-width: 1400px) {\n\t\tmax-height: initial;\n\t}\n\n\t/* width */\n\t::-webkit-scrollbar {\n\t\twidth: 3px;\n\t}\n\n\t/* Track */\n\t::-webkit-scrollbar-track {\n\t\tbox-shadow: none;\n\t\tbackground-color: transparent;\n\t\tborder-radius: 10px;\n\t\tpadding: 0 6px;\n\t\tmargin: 0 6px;\n\t\tborder-right: 1px solid ${({ theme }) => theme.text1};\n\t}\n\n\t/* Handle */\n\t::-webkit-scrollbar-thumb {\n\t\tbackground: ${({ theme }) => theme.text1};\n\t\tborder-radius: 10px;\n\t\twidth: 4px !important;\n\t}\n\n\t/* Handle on hover */\n\t::-webkit-scrollbar-thumb:hover {\n\t\tbackground: ${({ theme }) => lighten(0.08, theme.text1)};\n\t}\n`;\n\nconst TableContainer = styled.div`\n\tpadding-top: 43px;\n\tpadding-left: 8px;\n\n\t@media (max-width: 1400px) {\n\t\tpadding: 0;\n\t}\n`;\n\nconst fillToRow = (fill, index) => {\n\tconst amount = fill.amount;\n\n\tconst price = fill.price;\n\n\treturn (\n\t\t<TR key={index}>\n\t\t\t<TD>{amount}</TD>\n\t\t\t<TD variant={\"success\"}>{price}</TD>\n\t\t\t<TD>{moment(fill.createdAt).format(\"HH:mm:ss\")}</TD>\n\t\t</TR>\n\t);\n};\n\nconst TradeHistory = (props) => {\n\tlet content;\n\tconst { t } = useTranslation();\n\tconst { selectedMarket, trades, tradesStats } = props;\n\n\tif (!selectedMarket || tradesStats === ServerState.NotLoaded) {\n\t\tcontent = (\n\t\t\t<div className=\"w-100 h-100 d-flex align-items-center justify-content-center\">\n\t\t\t\t<Loading\n\t\t\t\t\twidth={40}\n\t\t\t\t\theight={40}\n\t\t\t\t\tid={`margin-trading-history-${props.isMobile ? \"mobile\" : \"desktop\"}`}\n\t\t\t\t\tactive\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t} else if (!trades || trades.length === 0) {\n\t\tcontent = (\n\t\t\t<div className={\"d-flex flex-column\"}>\n\t\t\t\t<div className=\"w-100 h-100 d-flex align-items-center justify-content-center\">\n\t\t\t\t\t<EmptyText>{t(\"errors.noTrade\")}</EmptyText>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t} else {\n\t\tcontent = (\n\t\t\t<TableContainer className=\"d-flex flex-column\">\n\t\t\t\t<CustomHead>\n\t\t\t\t\t<TH>{t(\"size\")}</TH>\n\t\t\t\t\t<TH>\n\t\t\t\t\t\t{t(\"price\")} ({selectedMarket.quoteAsset})\n\t\t\t\t\t</TH>\n\t\t\t\t\t<TH>{t(\"time\")}</TH>\n\t\t\t\t</CustomHead>\n\t\t\t\t<TBody>{trades.map((t, i) => fillToRow(t, i, selectedMarket))}</TBody>\n\t\t\t</TableContainer>\n\t\t);\n\t}\n\n\treturn <Container>{content}</Container>;\n};\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\tselectedMarket: state.margin.selectedMarketStats,\n\t\ttrades: state.margin.trades.data,\n\t\ttradesStats: state.margin.trades.state,\n\t};\n};\n\nexport default connect(mapStateToProps)(TradeHistory);\n","import { connect } from \"react-redux\";\nimport styled from \"styled-components\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\n\nimport StyledCard from \"../../../../components/Card\";\nimport { useActiveWeb3React } from \"../../../../hooks\";\nimport React from \"react\";\nimport Img from \"../../../../components/UI/Img\";\nimport \"./styles.scss\";\nimport Loading from \"../../../../components/Loading\";\nimport { formatTokenName } from \"../../../../utils/spot/tokens\";\nimport ResponsiveTable from \"../../../../components/ResponsiveTable\";\nimport { useTranslation } from \"react-i18next\";\n\nconst Card = styled(StyledCard)`\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: stretch;\n\tmargin-bottom: 20px;\n\n\t& .card-body {\n\t\tpadding: 24px 20px 20px;\n\t}\n\n\t@media (min-width: 1400px) {\n\t\twidth: 570px;\n\t\theight: 103px;\n\t\tmargin-bottom: 10px;\n\n\t\t& .card-body {\n\t\t\tpadding: 24px;\n\t\t}\n\t}\n`;\n\nconst Logo = styled(Img)`\n\twidth: 24px;\n\tmin-width: 24px;\n\theight: 24px;\n\tborder-radius: 24px;\n\tborder: 1px solid ${({ theme }) => theme.text1};\n\tdisplay: block;\n\tmargin-right: 5px;\n\n\t@media (max-width: 1400px) {\n\t\tmargin-right: 10px;\n\t}\n`;\n\nconst Text = styled.span`\n\tcolor: ${({ theme, variant }) => (variant ? theme[variant] : theme.text1)};\n\tfont-size: 0.875rem;\n\tfont-weight: 500;\n`;\n\nconst MarketDetails = (props) => {\n\tconst { account } = useActiveWeb3React();\n\tconst { t } = useTranslation();\n\tconst { selectedMarket, marketStats } = props;\n\n\tlet content;\n\n\tif (!account || !selectedMarket || !marketStats) {\n\t\tcontent = (\n\t\t\t<div className=\"w-100 h-100 d-flex align-items-center justify-content-center\">\n\t\t\t\t<Loading\n\t\t\t\t\twidth={40}\n\t\t\t\t\theight={40}\n\t\t\t\t\tid={`spots-markets-details-${props.isMobile ? \"mobile\" : \"desktop\"}`}\n\t\t\t\t\tactive\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t} else {\n\t\tconst columns = [\n\t\t\t{\n\t\t\t\tdataField: \"project\",\n\t\t\t\ttext: t(\"project\"),\n\t\t\t\tformatter: (cellContent, row) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"d-flex align-items-center\">\n\t\t\t\t\t\t\t<Text>{row?.marketStats?.marketId}</Text>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tdataField: \"last_price\",\n\t\t\t\ttext: t(\"table.price\"),\n\t\t\t\tformatter: (cellContent, row) => {\n\t\t\t\t\treturn <Text>{row?.marketStats?.price || \"-\"}</Text>;\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tdataField: \"max_price\",\n\t\t\t\ttext: t(\"table.24_high\"),\n\t\t\t\tformatter: (cellContent, row) => {\n\t\t\t\t\treturn <Text>{row?.marketStats?.high || \"-\"}</Text>;\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tdataField: \"min_price\",\n\t\t\t\ttext: t(\"table.24_low\"),\n\t\t\t\tformatter: (cellContent, row) => {\n\t\t\t\t\treturn <Text>{row?.marketStats?.low || \"-\"}</Text>;\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tdataField: \"volume\",\n\t\t\t\ttext: t(\"table.24_volume\"),\n\t\t\t\tformatter: (cellContent, row) => {\n\t\t\t\t\treturn <Text>{row?.marketStats?.volume || \"-\"}</Text>;\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\tcontent = (\n\t\t\t<>\n\t\t\t\t<BootstrapTable\n\t\t\t\t\twrapperClasses=\"d-none d-lg-block\"\n\t\t\t\t\tbordered={false}\n\t\t\t\t\tclasses=\"table table-head-custom table-borderless table-vertical-center overflow-hidden market-details__table\"\n\t\t\t\t\tbootstrap4\n\t\t\t\t\tkeyField={\"id\"}\n\t\t\t\t\tremote\n\t\t\t\t\tdata={[{ marketStats: marketStats }]}\n\t\t\t\t\tcolumns={columns}\n\t\t\t\t/>\n\t\t\t\t<ResponsiveTable\n\t\t\t\t\tbreakpoint={\"lg\"}\n\t\t\t\t\tcolumns={columns}\n\t\t\t\t\tdata={[{ marketStats: marketStats }]}\n\t\t\t\t\tdirection={\"rtl\"}\n\t\t\t\t\twithoutBorder\n\t\t\t\t/>\n\t\t\t</>\n\t\t);\n\t}\n\n\treturn <Card>{content}</Card>;\n};\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\tselectedMarket: state.margin.selectedMarket,\n\t\tmarketStats: state.margin.marketStats.data,\n\t};\n};\n\nexport default connect(mapStateToProps)(MarketDetails);\n","import axios from \"axios\";\nimport Web3 from \"web3\";\nimport { PROXY_URL } from \"../constants\";\n\nexport default class DDexApi {\n\tconstructor(account = null, web3 = new Web3(process.env.REACT_APP_WSS_URL)) {\n\t\tthis.baseURL = `${PROXY_URL}/ddex/v4`;\n\t\tthis.web3 = web3;\n\t\tthis.instance = axios.create({\n\t\t\tbaseURL: this.baseURL,\n\t\t\ttimeout: 30000,\n\t\t});\n\t\tthis.account = account;\n\t\tthis.authCode = null;\n\t\tthis.authCodeExpire = null;\n\n\t\tthis.instance.interceptors.response.use(\n\t\t\t(res) => {\n\t\t\t\tif (res.hasOwnProperty(\"data\")) {\n\t\t\t\t\treturn res.data.data;\n\t\t\t\t}\n\t\t\t\treturn res;\n\t\t\t},\n\t\t\t(err) => {\n\t\t\t\treturn err;\n\t\t\t}\n\t\t);\n\t}\n\n\tsetAccount(account) {\n\t\tthis.account = account;\n\t}\n\n\tsetWeb3(web3Instance) {\n\t\tthis.web3 = web3Instance;\n\t}\n\n\tisValidAuthCode = (expire) => {\n\t\tconst validDate = 1000 * 60 * 60 * 24;\n\t\tconst now = Date.now();\n\n\t\treturn expire && !!(now - expire <= validDate && now > expire);\n\t};\n\n\tsetAuthCode(authCode, expire) {\n\t\tif (this.isValidAuthCode(expire)) {\n\t\t\tthis.authCode = authCode;\n\t\t\tthis.authCodeExpire = expire;\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tgetMarkets() {\n\t\treturn this.instance.get(\"markets\");\n\t}\n\n\tgetMarket(id) {\n\t\treturn this.instance.get(`markets/${id}`);\n\t}\n\n\tgetTickers() {\n\t\treturn this.instance.get(\"markets/tickers\");\n\t}\n\n\tgetTicker(id) {\n\t\treturn this.instance.get(`markets/${id}/ticker`);\n\t}\n\n\tgetOrderbook(\n\t\tid,\n\t\tparams = {\n\t\t\tlevel: 3,\n\t\t}\n\t) {\n\t\treturn this.instance.get(`markets/${id}/orderbook`, {\n\t\t\tparams,\n\t\t});\n\t}\n\n\tlistTrades(\n\t\tid,\n\t\tparams = {\n\t\t\tpage: 1,\n\t\t\tperPage: 100,\n\t\t}\n\t) {\n\t\treturn this.instance.get(`markets/${id}/trades`, {\n\t\t\tparams,\n\t\t});\n\t}\n\n\tlistCandles(id, params = {}) {\n\t\treturn this.instance.get(`markets/${id}/candles`, {\n\t\t\tparams,\n\t\t});\n\t}\n\n\tcalculateFee(params = {}) {\n\t\treturn this.instance.get(\"fees\", {\n\t\t\tparams,\n\t\t});\n\t}\n\n\tgetGas() {\n\t\treturn this.instance.get(\"fees/gas\");\n\t}\n\n\tasync signer(message) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.web3.eth.personal\n\t\t\t\t.sign(this.web3.utils.toHex(message), this.account)\n\t\t\t\t.then((sign) => {\n\t\t\t\t\tresolve(sign);\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\treject(err);\n\t\t\t\t});\n\t\t});\n\t}\n\n\tasync getAuthCode() {\n\t\tif (this.account === null) {\n\t\t\tthis.authCode = null;\n\t\t\treturn null;\n\t\t}\n\n\t\tconst now = Date.now();\n\t\tconst message = \"HYDRO-AUTHENTICATION@\" + now;\n\n\t\tconst sign = await this.signer(message);\n\n\t\tconst HydroAuthentication = this.web3.utils.toHex(this.account) + \"#\" + message + \"#\" + sign;\n\n\t\tthis.authCode = HydroAuthentication;\n\t\tthis.authCodeExpire = now;\n\t\treturn {\n\t\t\tauthCode: HydroAuthentication,\n\t\t\tauthCodeExpire: now,\n\t\t};\n\t}\n\n\tprivateReqHandler = async () => {\n\t\tif (!this.authCode && this.isValidAuthCode(this.authCodeExpire)) {\n\t\t\tawait this.getAuthCode();\n\t\t}\n\t\treturn true;\n\t};\n\n\tasync buildUnsignedOrder(body) {\n\t\tawait this.privateReqHandler();\n\t\ttry {\n\t\t\tconst res = await this.instance.post(\"orders/build\", body, {\n\t\t\t\theaders: {\n\t\t\t\t\t\"Hydro-Authentication\": this.authCode,\n\t\t\t\t},\n\t\t\t});\n\n\t\t\treturn res;\n\t\t} catch (e) {\n\t\t\treturn e;\n\t\t}\n\t}\n\n\tasync signOrder(orderId) {\n\t\tconst signature = await this.signer(orderId);\n\t\treturn signature;\n\t}\n\n\tasync placeOrder(body) {\n\t\tawait this.privateReqHandler();\n\t\treturn this.instance.post(\n\t\t\t\"orders\",\n\t\t\t{\n\t\t\t\t...body,\n\t\t\t\tmethod: 0,\n\t\t\t},\n\t\t\t{\n\t\t\t\theaders: {\n\t\t\t\t\t\"Hydro-Authentication\": this.authCode,\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\t}\n\n\tasync deleteOrder(orderId) {\n\t\tawait this.privateReqHandler();\n\t\treturn this.instance.delete(`orders/${orderId}`, {\n\t\t\theaders: {\n\t\t\t\t\"Hydro-Authentication\": this.authCode,\n\t\t\t},\n\t\t});\n\t}\n\n\tasync getOrders(params) {\n\t\tawait this.privateReqHandler();\n\t\treturn this.instance.get(`orders`, {\n\t\t\tparams,\n\t\t\theaders: {\n\t\t\t\t\"Hydro-Authentication\": this.authCode,\n\t\t\t},\n\t\t});\n\t}\n\n\tasync getOrder(orderId) {\n\t\tawait this.privateReqHandler();\n\t\treturn this.instance.get(`orders/${orderId}`, {\n\t\t\theaders: {\n\t\t\t\t\"Hydro-Authentication\": this.authCode,\n\t\t\t},\n\t\t});\n\t}\n\n\tasync getAccountTrades(\n\t\tmarketId,\n\t\tparams = {\n\t\t\tpage: 1,\n\t\t\tperPage: 100,\n\t\t}\n\t) {\n\t\tawait this.privateReqHandler();\n\t\treturn this.instance.get(`markets/${marketId}/trades/mine`, {\n\t\t\tparams,\n\t\t\theaders: {\n\t\t\t\t\"Hydro-Authentication\": this.authCode,\n\t\t\t},\n\t\t});\n\t}\n\n\tasync getLockedBalances() {\n\t\tawait this.privateReqHandler();\n\t\treturn this.instance.get(`account/lockedBalances`, {\n\t\t\theaders: {\n\t\t\t\t\"Hydro-Authentication\": this.authCode,\n\t\t\t},\n\t\t});\n\t}\n\n\tasync getPositions() {\n\t\tawait this.privateReqHandler();\n\t\treturn this.instance.get(`positions`, {\n\t\t\theaders: {\n\t\t\t\t\"Hydro-Authentication\": this.authCode,\n\t\t\t},\n\t\t});\n\t}\n}\n","import { useMemo, useEffect, useCallback } from \"react\";\nimport Web3 from \"web3\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useActiveWeb3React } from \"../../hooks\";\nimport DDexApi from \"../../http/ddex\";\nimport * as actions from \"./actions\";\nimport toast from \"react-hot-toast\";\nimport { useTranslation } from \"react-i18next\";\n\nexport const useApi = () => {\n\tconst { account } = useActiveWeb3React();\n\tconst { authCode, authCodeExpire } = useSelector((state) => state.margin);\n\tconst dispatch = useDispatch();\n\tconst web3 = new Web3(Web3.givenProvider || Web3.providers.WebsocketProvider(process.env.REACT_APP_WSS_URL));\n\n\tconst api = useMemo(() => {\n\t\treturn new DDexApi(account, web3);\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (authCode) {\n\t\t\tapi.setAuthCode(authCode, authCodeExpire);\n\t\t}\n\t}, [authCode, authCodeExpire]);\n\n\tuseEffect(() => {\n\t\tapi.setAccount(account);\n\t}, [account]);\n\n\treturn api;\n};\n\nexport const useAuthSigner = () => {\n\tconst { account } = useActiveWeb3React();\n\tconst api = useApi();\n\tconst dispatch = useDispatch();\n\n\treturn useCallback(async () => {\n\t\tif (!account) {\n\t\t\treturn null;\n\t\t}\n\t\tconst res = await api.getAuthCode();\n\t\tdispatch(actions.setAuthCode(res.authCode));\n\t\tdispatch(actions.setAuthCodeExpire(res.authCodeExpire));\n\t\tdispatch(actions.setPrivateData());\n\t\treturn res.authCode;\n\t}, [dispatch, account]);\n};\n\nexport const useUserUpdater = () => {\n\tconst dispatch = useDispatch();\n\tconst api = useApi();\n\tconst { account } = useActiveWeb3React();\n\tconst marketId = useSelector((state) => state.margin.selectedMarket);\n\n\treturn useCallback(() => {\n\t\tif (!marketId || !account) {\n\t\t\treturn null;\n\t\t}\n\n\t\tdispatch(actions.fetchUserLockedBalances(api));\n\t\tdispatch(actions.fetchUserTrades(api));\n\t\tdispatch(actions.fetchPositions(api));\n\t\tdispatch(actions.fetchOrders(api));\n\t}, [dispatch, account, marketId]);\n};\n\nexport const useMarketUpdater = () => {\n\tconst api = useApi();\n\tconst dispatch = useDispatch();\n\tconst marketId = useSelector((state) => state.margin.selectedMarket);\n\n\treturn useCallback(() => {\n\t\tdispatch(actions.fetchMarkets(api));\n\n\t\tif (marketId) {\n\t\t\tdispatch(actions.fetchOrderbook(api));\n\t\t\tdispatch(actions.fetchTrades(api));\n\t\t\tdispatch(actions.fetchMarketStats(api));\n\t\t\tdispatch(actions.getGasPrice(api));\n\t\t}\n\t}, [dispatch, marketId]);\n};\n\nexport const useMarginUpdater = () => {\n\tconst { account } = useActiveWeb3React();\n\tconst marketUpdater = useMarketUpdater();\n\tconst userUpdater = useUserUpdater();\n\n\treturn useCallback(() => {\n\t\tmarketUpdater();\n\n\t\tif (account) {\n\t\t\tuserUpdater();\n\t\t}\n\t}, [account, marketUpdater, userUpdater]);\n};\n\nexport const useOrderBuilder = () => {\n\tconst api = useApi();\n\tconst updater = useMarginUpdater();\n\tconst signer = useAuthSigner();\n\tconst { t } = useTranslation();\n\tconst { account } = useActiveWeb3React();\n\n\treturn useCallback(\n\t\tasync (body) => {\n\t\t\ttry {\n\t\t\t\tif (!account) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tawait signer();\n\t\t\t\tconst res = await api.buildUnsignedOrder(body);\n\t\t\t\tif (res.hasOwnProperty(\"order\")) {\n\t\t\t\t\tconst order = res.order;\n\t\t\t\t\tconst signature = await api.signOrder(order.id);\n\t\t\t\t\tconst signedOrder = await api.placeOrder({\n\t\t\t\t\t\torderId: order.id,\n\t\t\t\t\t\tsignature,\n\t\t\t\t\t\tmethod: 0,\n\t\t\t\t\t});\n\t\t\t\t\tif (signedOrder.desc === \"success\") {\n\t\t\t\t\t\ttoast.success(t(\"instantSwap.submitted\"));\n\t\t\t\t\t\tupdater();\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttoast.error(t(\"errors.default\"));\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tif (e.hasOwnProperty(\"desc\")) {\n\t\t\t\t\ttoast.error(e.desc);\n\t\t\t\t} else {\n\t\t\t\t\ttoast.error(t(\"errors.default\"));\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t[account, signer, t]\n\t);\n};\n\nexport const useOrderCanceler = () => {\n\tconst api = useApi();\n\tconst updater = useMarginUpdater();\n\tconst signer = useAuthSigner();\n\tconst { t } = useTranslation();\n\tconst { account } = useActiveWeb3React();\n\n\treturn useCallback(\n\t\tasync (orderId) => {\n\t\t\ttry {\n\t\t\t\tif (!account) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tawait signer();\n\t\t\t\tconst res = await api.deleteOrder(orderId);\n\n\t\t\t\tif (res.desc === \"success\") {\n\t\t\t\t\ttoast.success(t(\"txnSubmitted\"));\n\t\t\t\t\tupdater();\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\ttoast.error(t(\"errors.default\"));\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tif (e.hasOwnProperty(\"desc\")) {\n\t\t\t\t\ttoast.error(e.desc);\n\t\t\t\t} else {\n\t\t\t\t\ttoast.error(t(\"errors.default\"));\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t[account, signer]\n\t);\n};\n\nexport const useMarketChanger = () => {\n\tconst dispatch = useDispatch();\n\tconst api = useApi();\n\tconst updater = useMarginUpdater();\n\n\treturn useCallback(\n\t\tasync (marketId) => {\n\t\t\ttry {\n\t\t\t\tconst { market } = await api.getMarket(marketId);\n\t\t\t\tif (market !== null) {\n\t\t\t\t\tdispatch(actions.setSelectedMarket(market));\n\t\t\t\t\tupdater();\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t} catch (e) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t[dispatch]\n\t);\n};\n","import { connect } from \"react-redux\";\nimport styled from \"styled-components\";\nimport React from \"react\";\nimport { lighten } from \"polished\";\nimport { Button } from \"react-bootstrap\";\n\nimport { isWeth } from \"../../../../utils/known_tokens\";\nimport { tokenAmountInUnits } from \"../../../../utils/spot/tokens\";\nimport { ServerState } from \"../../../../constants\";\nimport Loading from \"../../../../components/Loading\";\nimport { ResponsiveCard } from \"../../../../components/Card\";\nimport { CloseIcon } from \"../../../../theme\";\nimport BigNumber from \"bignumber.js\";\nimport { useActiveWeb3React } from \"../../../../hooks\";\nimport { useTranslation } from \"react-i18next\";\nimport { useAuthSigner, useOrderCanceler } from \"../../../../state/margin/hooks\";\n\nconst Card = styled(ResponsiveCard)`\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: stretch;\n\tmargin-bottom: 10px;\n\tmin-height: 385px;\n\n\t& .card-body {\n\t\tpadding: 20px 30px 30px;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\n\t@media (min-width: 1400px) {\n\t\twidth: 570px;\n\t\theight: 385px;\n\n\t\t& .card-body {\n\t\t\tpadding: 15px;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t}\n\t}\n`;\n\nconst CardTitle = styled.h4`\n\tmargin-top: 5px;\n\tpadding: 0;\n\tmargin-bottom: 10px;\n\tfont-size: 0.875rem;\n\tfont-weight: 700;\n\tcolor: ${({ theme }) => theme.text1};\n`;\n\nconst Content = styled.div`\n\tbackground-color: ${({ theme }) => theme.bg3};\n\tborder-radius: 18px;\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex: 1;\n\tmax-height: 323px;\n\toverflow: hidden;\n`;\n\nconst InnerContent = styled.div`\n\twidth: 100%;\n\theight: 100%;\n\tmax-height: 100%;\n\toverflow-x: hidden;\n\toverflow-y: auto;\n\tflex: 1;\n\tpadding: 12px;\n\n\t@media (max-width: 1400px) {\n\t\tpadding: 20px;\n\t}\n\n\t/* width */\n\t::-webkit-scrollbar {\n\t\twidth: 3px;\n\t}\n\n\t/* Track */\n\t::-webkit-scrollbar-track {\n\t\tbox-shadow: none;\n\t\tbackground-color: transparent;\n\t\tborder-radius: 10px;\n\t\tpadding: 0 6px;\n\t\tmargin: 0 6px;\n\t\tborder-right: 1px solid ${({ theme }) => theme.text1};\n\t}\n\n\t/* Handle */\n\t::-webkit-scrollbar-thumb {\n\t\tbackground: ${({ theme }) => theme.text1};\n\t\tborder-radius: 10px;\n\t\twidth: 4px !important;\n\t}\n\n\t/* Handle on hover */\n\t::-webkit-scrollbar-thumb:hover {\n\t\tbackground: ${({ theme }) => lighten(0.08, theme.text1)};\n\t}\n`;\n\nconst EmptyText = styled.span`\n\tfont-size: 0.875rem;\n\tfont-weight: 400;\n\tcolor: ${({ theme }) => theme.text1};\n`;\n\nconst TR = styled.div`\n\tpadding: 4px 16px;\n\tborder-radius: 12px;\n\tmargin-bottom: 10px;\n\tmax-height: 24px;\n\theight: 24px;\n\tdisplay: grid;\n\tgrid-template-columns: 1fr 1fr 1fr 1fr 1fr;\n`;\nconst CustomHead = styled(TR)`\n\tbackground-color: ${({ theme }) => theme.text1}10;\n\tmax-height: 40px;\n\theight: 40px;\n\tpadding: 12px 16px;\n\tmargin-bottom: 12px;\n`;\n\nconst TH = styled.span`\n\tcolor: ${({ theme }) => theme.text1};\n\tfont-size: 0.75rem;\n\tfont-weight: 400;\n`;\n\nconst TD = styled.span`\n\tcolor: ${({ theme, variant }) => (variant ? theme[variant] : theme.text1)};\n\tfont-size: 0.875rem;\n\tfont-weight: 400;\n\tpadding-right: 5px;\n`;\n\nconst TBody = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex: 1;\n\n\t/* width */\n\t::-webkit-scrollbar {\n\t\twidth: 3px;\n\t}\n\n\t/* Track */\n\t::-webkit-scrollbar-track {\n\t\tbox-shadow: none;\n\t\tbackground-color: transparent;\n\t\tborder-radius: 10px;\n\t\tpadding: 0 6px;\n\t\tmargin: 0 6px;\n\t\tborder-right: 1px solid ${({ theme }) => theme.text1};\n\t}\n\n\t/* Handle */\n\t::-webkit-scrollbar-thumb {\n\t\tbackground: ${({ theme }) => theme.text1};\n\t\tborder-radius: 10px;\n\t\twidth: 4px !important;\n\t}\n\n\t/* Handle on hover */\n\t::-webkit-scrollbar-thumb:hover {\n\t\tbackground: ${({ theme }) => lighten(0.08, theme.text1)};\n\t}\n`;\n\nconst Close = styled(CloseIcon)`\n\twidth: 16px;\n\theight: 16px;\n`;\n\nconst orderToRow = (order, index, cancelOrder, market) => {\n\tconst sideLabel = order.side === \"sell\" ? \"Sell\" : \"Buy\";\n\tconst baseDecimals = market.baseAssetDecimals;\n\n\tconst orderSize = new BigNumber(order.amount).times(10 ** baseDecimals);\n\n\tconst size = tokenAmountInUnits(orderSize, baseDecimals, 3);\n\tlet status = `&mdash;`;\n\n\tconst filled = order.confirmedAmount\n\t\t? tokenAmountInUnits(new BigNumber(order.confirmedAmount), baseDecimals, 3)\n\t\t: null;\n\tif (order.status) {\n\t\tstatus = order.status || \"canceled\";\n\t}\n\tconst price = order.price;\n\n\treturn (\n\t\t<TR key={index}>\n\t\t\t<TD variant={order.side === \"buy\" ? \"success\" : \"danger\"}>{sideLabel}</TD>\n\t\t\t<TD>{size}</TD>\n\t\t\t<TD>{filled}</TD>\n\t\t\t<TD>{price}</TD>\n\t\t\t<TD>\n\t\t\t\t<div className=\"d-flex align-items-center justify-content-between\">\n\t\t\t\t\t<span>{status}</span>\n\n\t\t\t\t\t<Close onClick={cancelOrder.bind(this, order.id)} />\n\t\t\t\t</div>\n\t\t\t</TD>\n\t\t</TR>\n\t);\n};\n\nconst OrderHistory = (props) => {\n\tconst signer = useAuthSigner();\n\tconst cancelOrder = useOrderCanceler();\n\tconst { account } = useActiveWeb3React();\n\tconst { t } = useTranslation();\n\tconst { selectedMarket, orders, ordersStats, accessToPrivate } = props;\n\n\tlet content;\n\n\tif (!accessToPrivate) {\n\t\tcontent = (\n\t\t\t<div className=\"w-100 h-100 d-flex align-items-center justify-content-center flex-column\">\n\t\t\t\t<EmptyText className={\"mb-3 text-center\"}>{t(\"errors.signAccount\")}</EmptyText>\n\t\t\t\t<Button variant={\"secondary\"} onClick={signer}>\n\t\t\t\t\t{t(\"confirm\")}\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t);\n\t} else if (!selectedMarket || ordersStats === ServerState.NotLoaded) {\n\t\tcontent = (\n\t\t\t<div className=\"w-100 h-100 d-flex align-items-center justify-content-center\">\n\t\t\t\t<Loading width={40} height={40} id={`order-history-${props.isMobile ? \"mobile\" : \"desktop\"}`} active />\n\t\t\t</div>\n\t\t);\n\t} else if (ordersStats === ServerState.Error || !orders) {\n\t\tcontent = (\n\t\t\t<div className=\"w-100 h-100 d-flex align-items-center justify-content-center\">\n\t\t\t\t<EmptyText>{t(\"errors.noTrade\")}</EmptyText>\n\t\t\t</div>\n\t\t);\n\t} else {\n\t\tconst baseToken = selectedMarket.baseAsset;\n\t\tconst quoteToken = selectedMarket.quoteAsset;\n\t\tconst tokenQuoteSymbol = isWeth(quoteToken.toLowerCase()) ? \"ETH\" : quoteToken.toUpperCase();\n\t\tconst tokenBaseSymbol = isWeth(baseToken.toLowerCase()) ? \"ETH\" : baseToken.toUpperCase();\n\n\t\tcontent = (\n\t\t\t<div className=\"d-flex flex-column\">\n\t\t\t\t<CustomHead>\n\t\t\t\t\t<TH>{t(\"side\")}</TH>\n\t\t\t\t\t<TH>\n\t\t\t\t\t\t{t(\"size\")} ({tokenBaseSymbol})\n\t\t\t\t\t</TH>\n\t\t\t\t\t<TH>\n\t\t\t\t\t\t{t(\"filled\")} ({tokenBaseSymbol})\n\t\t\t\t\t</TH>\n\t\t\t\t\t<TH>\n\t\t\t\t\t\t{t(\"price\")} ({tokenQuoteSymbol})\n\t\t\t\t\t</TH>\n\t\t\t\t\t<TH>{t(\"status\")}</TH>\n\t\t\t\t</CustomHead>\n\t\t\t\t<TBody>\n\t\t\t\t\t{orders.map((order, index) => orderToRow(order, index, cancelOrder, selectedMarket, account))}\n\t\t\t\t</TBody>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Card>\n\t\t\t<CardTitle>Open Orders</CardTitle>\n\t\t\t<Content>\n\t\t\t\t<InnerContent>{content}</InnerContent>\n\t\t\t</Content>\n\t\t</Card>\n\t);\n};\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\tselectedMarket: state.margin.selectedMarketStats,\n\t\torders: state.margin.orders.data,\n\t\tordersStats: state.margin.orders.state,\n\t\taccessToPrivate: state.margin.accessToPrivate,\n\t};\n};\n\nexport default connect(mapStateToProps)(OrderHistory);\n","import { useEffect } from \"react\";\nimport { useMarginUpdater, useMarketChanger } from \"../../state/margin/hooks\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { DEFAULT_MARGIN_MARKET, UPDATE_MARGIN_INTERVAL } from \"../../constants\";\n\nlet interval = null;\n\nconst Providers = (props) => {\n\tconst updater = useMarginUpdater();\n\tconst marketChanger = useMarketChanger();\n\tconst { marketId } = useParams();\n\tconst history = useHistory();\n\n\tuseEffect(() => {\n\t\tclearInterval(interval);\n\t\tinterval = null;\n\t\tmarketChanger(marketId || DEFAULT_MARGIN_MARKET).then((res) => {\n\t\t\tif (res) {\n\t\t\t\tinterval = setInterval(() => {\n\t\t\t\t\tupdater();\n\t\t\t\t}, UPDATE_MARGIN_INTERVAL);\n\t\t\t} else {\n\t\t\t\tclearInterval(interval);\n\t\t\t\thistory.push(`/trade/margin/${DEFAULT_MARGIN_MARKET}`);\n\t\t\t}\n\t\t});\n\t}, [marketId]);\n\n\treturn props.children;\n};\n\nexport default Providers;\n","import React, { useCallback, useMemo, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport styled from \"styled-components\";\nimport { lighten } from \"polished\";\nimport { withRouter } from \"react-router-dom\";\n\nimport { ServerState } from \"../../../../constants\";\nimport { filterMarketsByString } from \"../../../../utils/spot/market\";\n\nimport { ResponsiveCard } from \"../../../../components/Card\";\nimport Loading from \"../../../../components/Loading\";\nimport SearchIcon from \"../../../../assets/images/search.svg\";\nimport \"./styles.scss\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport { useTranslation } from \"react-i18next\";\nimport SVG from \"react-inlinesvg\";\nimport {\n\tInputGroupFormControl as FormControl,\n\tInputGroupPrepend,\n\tInputGroupText,\n\tInputGroup,\n} from \"../../../../components/Form\";\nimport { useMarketChanger } from \"../../../../state/margin/hooks\";\n\nconst Card = styled(ResponsiveCard)`\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: stretch;\n\tmargin-bottom: 20px;\n\n\t& .card-body {\n\t\tpadding: 30px;\n\t}\n\n\t@media (min-width: 1400px) {\n\t\twidth: 228px;\n\t\theight: 486px;\n\t\tmargin-bottom: 10px;\n\n\t\t& .card-body {\n\t\t\tpadding: 10px;\n\t\t}\n\t}\n`;\n\nconst EmptyText = styled.span`\n\tfont-size: 0.875rem;\n\tfont-weight: 400;\n\tcolor: ${({ theme }) => theme.text1};\n`;\n\nconst CustomInputGroup = styled(InputGroup)`\n\tfont-size: 0.75rem;\n\n\t.input-group-text {\n\t\tpadding-left: 1.25rem;\n\t\tpadding-right: 0.625rem;\n\t}\n\n\t& input {\n\t\tfont-size: 0.75rem !important;\n\t\tpadding-left: 0;\n\t}\n\n\t& img {\n\t\twidth: 1rem;\n\t\theight: 1rem;\n\t}\n`;\n\nconst PriceChange = styled.span`\n\tcolor: ${(props) =>\n\t\tprops.value > 0 ? props.theme.success : props.value < 0 ? props.theme.danger : props.theme.text3};\n\tdisplay: block;\n`;\n\nconst TokenFiltersTabs = styled.div`\n\twidth: 100%;\n\tflex-wrap: nowrap;\n\tpadding: 15px 0;\n`;\n\nconst TokenFiltersTab = styled.button`\n\tbackground-color: transparent;\n\tborder: none;\n\tcolor: ${({ active, theme }) => (active ? theme.primary : theme.text1)};\n\tfont-size: 12px;\n\tfont-weight: 400;\n\n\t&:active,\n\t&:focus {\n\t\toutline: none;\n\t\tbox-shadow: none;\n\t\ttext-decoration: none;\n\t}\n`;\n\nconst Text = styled.span`\n\tcolor: ${({ theme, variant }) => (variant ? theme[variant] : theme.text1)};\n\tfont-size: 0.75rem;\n\tfont-weight: 400;\n\tcursor: pointer;\n`;\n\nconst AutoHeight = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex: 1;\n\toverflow-y: auto;\n\toverflow-x: hidden;\n\tmax-height: 360px;\n\n\t@media (max-width: 1400px) {\n\t\tmax-height: initial;\n\t}\n\n\t/* width */\n\t::-webkit-scrollbar {\n\t\twidth: 3px;\n\t}\n\n\t/* Track */\n\t::-webkit-scrollbar-track {\n\t\tbox-shadow: none;\n\t\tbackground-color: transparent;\n\t\tborder-radius: 10px;\n\t\tpadding: 0 6px;\n\t\tmargin: 0 6px;\n\t\tborder-right: 1px solid ${({ theme }) => theme.text1};\n\t}\n\n\t/* Handle */\n\t::-webkit-scrollbar-thumb {\n\t\tbackground: ${({ theme }) => theme.text1};\n\t\tborder-radius: 10px;\n\t\twidth: 4px !important;\n\t}\n\n\t/* Handle on hover */\n\t::-webkit-scrollbar-thumb:hover {\n\t\tbackground: ${({ theme }) => lighten(0.08, theme.text1)};\n\t}\n`;\n\nconst MarketStats = (props) => {\n\tconst { t } = useTranslation();\n\tconst [query, setQuery] = useState(\"\");\n\tconst { markets, marketsState } = props;\n\n\tconst _setSelectedMarket = (marketId) => {\n\t\tprops.history.push(`/trade/margin/${marketId}`);\n\t};\n\n\tconst changeQueryHandler = useCallback((e) => {\n\t\tsetQuery(e.target.value);\n\t}, []);\n\n\tconst searchedMarkets = useMemo(() => {\n\t\tif (!markets) {\n\t\t\treturn [];\n\t\t}\n\t\treturn markets.filter((market) => {\n\t\t\treturn JSON.stringify(market).indexOf(query) > -1 || query === \"\";\n\t\t});\n\t}, [markets, query]);\n\n\tconst columns = [\n\t\t{\n\t\t\tdataField: \"market\",\n\t\t\ttext: t(\"market\"),\n\t\t\tformatter: (cellContent, row, rowIndex) => {\n\t\t\t\treturn (\n\t\t\t\t\t<Text>\n\t\t\t\t\t\t{row.id}\n\t\t\t\t\t\t<span className=\"label label-light-primary label-sm label-block ml-3\">5x</span>\n\t\t\t\t\t</Text>\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t];\n\n\tconst rowEvents = {\n\t\tonClick: (e, row) => {\n\t\t\t_setSelectedMarket(row.id);\n\t\t},\n\t};\n\n\tconst _getMarkets = () => {\n\t\tconst { markets } = props;\n\n\t\tif (!markets) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<AutoHeight>\n\t\t\t\t<BootstrapTable\n\t\t\t\t\tbordered={false}\n\t\t\t\t\tclasses=\"table table-head-custom table-borderless table-vertical-center overflow-hidden margin-stats__table\"\n\t\t\t\t\tbootstrap4\n\t\t\t\t\tkeyField={\"id\"}\n\t\t\t\t\tremote\n\t\t\t\t\trowEvents={rowEvents}\n\t\t\t\t\tdata={searchedMarkets === null ? [] : searchedMarkets}\n\t\t\t\t\tcolumns={columns}\n\t\t\t\t/>\n\t\t\t</AutoHeight>\n\t\t);\n\t};\n\n\tif (marketsState === ServerState.NotLoaded) {\n\t\treturn (\n\t\t\t<Card>\n\t\t\t\t<div className=\"w-100 h-100 d-flex align-items-center justify-content-center\">\n\t\t\t\t\t<Loading\n\t\t\t\t\t\twidth={40}\n\t\t\t\t\t\theight={40}\n\t\t\t\t\t\tid={`margin-markets-${props.isMobile ? \"mobile\" : \"desktop\"}`}\n\t\t\t\t\t\tactive\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Card>\n\t\t);\n\t} else if (!markets) {\n\t\treturn (\n\t\t\t<Card>\n\t\t\t\t<div className=\"w-100 h-100 d-flex align-items-center justify-content-center\">\n\t\t\t\t\t<EmptyText>{t(\"errors.noMarket\")}</EmptyText>\n\t\t\t\t</div>\n\t\t\t</Card>\n\t\t);\n\t}\n\treturn (\n\t\t<Card>\n\t\t\t<CustomInputGroup className={\"w-auto\"}>\n\t\t\t\t<InputGroupPrepend>\n\t\t\t\t\t<InputGroupText>\n\t\t\t\t\t\t<SVG src={SearchIcon} />\n\t\t\t\t\t</InputGroupText>\n\t\t\t\t</InputGroupPrepend>\n\t\t\t\t<FormControl id=\"PoolsSearch\" placeholder={t(\"search\")} onChange={changeQueryHandler} />\n\t\t\t</CustomInputGroup>\n\n\t\t\t{_getMarkets()}\n\t\t</Card>\n\t);\n};\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\tmarketsState: state.margin.markets.state,\n\t\tmarkets: state.margin.markets.data,\n\t};\n};\n\nexport default withRouter(connect(mapStateToProps)(MarketStats));\n","import styled from \"styled-components\";\nimport { ResponsiveCard } from \"../../../../components/Card\";\nimport { Button } from \"react-bootstrap\";\nimport { useTranslation } from \"react-i18next\";\nimport { OrderSide } from \"../../../../constants\";\nimport { useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport {\n\tInputGroupFormControl as FormControl,\n\tInputGroupPrepend,\n\tInputGroup,\n\tInputGroupText,\n} from \"../../../../components/Form\";\nimport { useETHBalances, useTokenBalances } from \"../../../../state/wallet/hooks\";\nimport { useActiveWeb3React } from \"../../../../hooks\";\nimport { toast } from \"react-hot-toast\";\nimport { useOrderBuilder } from \"../../../../state/margin/hooks\";\n\nconst Card = styled(ResponsiveCard)`\n\tmargin-bottom: 20px;\n\n\t& .card-body {\n\t\tpadding: 30px;\n\t}\n\n\t@media (min-width: 1400px) {\n\t\twidth: 580px;\n\t\theight: 385px;\n\t\tmargin-bottom: 10px;\n\n\t\t& .card-body {\n\t\t\tpadding: 20px;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t}\n\t}\n`;\n\nconst QuoteContainer = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\tmargin-bottom: -5px;\n\n\t@media (max-width: 1400px) {\n\t\tpadding-top: 0;\n\t\tmargin-bottom: -24px;\n\t}\n`;\n\nconst TabsContainer = styled.div`\n\tmargin-left: -20px;\n\tmargin-right: -20px;\n\tmargin-bottom: 10px;\n\n\t@media (max-width: 1400px) {\n\t\tflex-direction: column-reverse;\n\t\talign-items: stretch !important;\n\t\tmargin-bottom: 45px;\n\t}\n`;\n\nconst TabWrapper = styled.div`\n\tpadding: 0 20px;\n\tflex: 1;\n\n\t@media (max-width: 1400px) {\n\t\t&:not(:first-child) {\n\t\t\tmargin-bottom: 10px;\n\t\t}\n\t}\n`;\n\nconst Tab = styled(Button)`\n\theight: 48px;\n\tfont-size: 1rem;\n\tfont-weight: 500;\n\twidth: 100%;\n`;\n\nconst Content = styled.div`\n\tflex: 1;\n\tposition: relative;\n`;\n\nconst DetailsContainer = styled.div`\n\tmargin-bottom: auto;\n`;\n\nconst MarketType = styled.div`\n\tposition: absolute;\n\ttop: -14px;\n\tright: 0;\n\tz-index: 2;\n`;\n\nconst MarketButton = styled.button`\n\t:disabled {\n\t\tcolor: ${({ theme }) => theme.text1};\n\t\topacity: 1;\n\t}\n`;\n\nconst FormContainer = styled.div`\n\tmargin-top: 24px;\n`;\n\nconst Label = styled.label`\n\tpadding: 0 32px;\n\tfont-size: 0.875rem;\n`;\n\nconst orderTypes = {\n\tlimit: \"Limit\",\n\tmarket: \"Market\",\n\tstopLimit: \"Stop Limit\",\n};\n\nconst BuyOrSell = (props) => {\n\tconst { account } = useActiveWeb3React();\n\tconst [activeSide, setActiveSide] = useState(OrderSide.Buy);\n\tconst [activeOrderType, setActiveOrderType] = useState(\"limit\");\n\tconst [price, setPrice] = useState(\"\");\n\tconst [amount, setAmount] = useState(\"\");\n\tconst { t } = useTranslation();\n\tconst orderBuilder = useOrderBuilder();\n\tconst selectedMarketStats = useSelector((state) => state.margin.selectedMarketStats);\n\n\tconst submitHandler = async () => {\n\t\tconst transformedPrice = Number(price);\n\t\tconst transformedAmount = Number(amount);\n\n\t\tif (isNaN(transformedAmount) || isNaN(transformedPrice)) {\n\t\t\ttoast.error(\"Please enter valid Number\");\n\t\t}\n\n\t\tconst orderBody = {\n\t\t\tmarketId: selectedMarketStats.id,\n\t\t\tside: activeSide === OrderSide.Buy ? \"buy\" : \"sell\",\n\t\t\torderType: activeOrderType,\n\t\t\twalletType: \"trading\",\n\t\t\tprice: activeOrderType === \"market\" ? \"0\" : `${transformedPrice}`,\n\t\t\tamount: activeOrderType === \"market\" ? `${transformedPrice}` : `${transformedAmount}`,\n\t\t};\n\n\t\tconst res = await orderBuilder(orderBody);\n\t\tif (res) {\n\t\t\tsetActiveSide(OrderSide.Buy);\n\t\t\tsetActiveOrderType(\"limit\");\n\t\t\tsetPrice(\"\");\n\t\t\tsetAmount(\"\");\n\t\t}\n\t};\n\n\treturn (\n\t\t<Card>\n\t\t\t<TabsContainer className=\"d-flex align-items-center justify-content-between\">\n\t\t\t\t<TabWrapper>\n\t\t\t\t\t<Tab\n\t\t\t\t\t\tvariant={activeSide === OrderSide.Buy ? \"secondary-light\" : \"light-secondary-light\"}\n\t\t\t\t\t\tonClick={setActiveSide.bind(this, OrderSide.Buy)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{t(\"orderSide.buy\")}\n\t\t\t\t\t</Tab>\n\t\t\t\t</TabWrapper>\n\t\t\t\t<TabWrapper>\n\t\t\t\t\t<Tab\n\t\t\t\t\t\tvariant={activeSide === OrderSide.Sell ? \"secondary-light\" : \"light-secondary-light\"}\n\t\t\t\t\t\tonClick={setActiveSide.bind(this, OrderSide.Sell)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{t(\"orderSide.sell\")}\n\t\t\t\t\t</Tab>\n\t\t\t\t</TabWrapper>\n\t\t\t</TabsContainer>\n\t\t\t<Content>\n\t\t\t\t<MarketType>\n\t\t\t\t\t{selectedMarketStats?.supportedOrderTypes?.map((tab, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<MarketButton\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn-link px-0\"\n\t\t\t\t\t\t\t\t\tdisabled={tab === activeOrderType}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tsetActiveOrderType(tab);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{orderTypes[tab]}\n\t\t\t\t\t\t\t\t</MarketButton>\n\t\t\t\t\t\t\t\t{index < selectedMarketStats?.supportedOrderTypes?.length - 1 && (\n\t\t\t\t\t\t\t\t\t<span className={\"px-2\"}>/</span>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</MarketType>\n\t\t\t\t<FormContainer>\n\t\t\t\t\t<Label htmlFor=\"price\">{activeOrderType === \"limit\" ? \"Price\" : \"Amount\"}</Label>\n\t\t\t\t\t<InputGroup>\n\t\t\t\t\t\t<InputGroupPrepend>\n\t\t\t\t\t\t\t<InputGroupText>{selectedMarketStats?.quoteAsset}</InputGroupText>\n\t\t\t\t\t\t</InputGroupPrepend>\n\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\ttype={\"text\"}\n\t\t\t\t\t\t\tplaceholder={\"Price\"}\n\t\t\t\t\t\t\tid={\"price\"}\n\t\t\t\t\t\t\tvalue={price}\n\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\tsetPrice(e.target.value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</InputGroup>\n\t\t\t\t</FormContainer>\n\t\t\t\t{(activeOrderType === \"limit\" || activeOrderType === \"stopLimit\") && (\n\t\t\t\t\t<FormContainer>\n\t\t\t\t\t\t<Label htmlFor=\"amount\">Amount</Label>\n\t\t\t\t\t\t<InputGroup>\n\t\t\t\t\t\t\t<InputGroupPrepend>\n\t\t\t\t\t\t\t\t<InputGroupText>{selectedMarketStats?.baseAsset}</InputGroupText>\n\t\t\t\t\t\t\t</InputGroupPrepend>\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\ttype={\"text\"}\n\t\t\t\t\t\t\t\tplaceholder={\"Amount\"}\n\t\t\t\t\t\t\t\tid={\"amount\"}\n\t\t\t\t\t\t\t\tvalue={amount}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetAmount(e.target.value);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</InputGroup>\n\t\t\t\t\t</FormContainer>\n\t\t\t\t)}\n\t\t\t\t<div className=\"d-flex flex-column align-items-xl-center align-items-stretch justify-content-center mt-auto\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\taccount &&\n\t\t\t\t\t\t\t(price === \"\" || (activeOrderType === \"limit\" && amount === \"\") || !selectedMarketStats)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvariant={\"primary\"}\n\t\t\t\t\t\tonClick={submitHandler}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tminWidth: 250,\n\t\t\t\t\t\t\theight: 56,\n\t\t\t\t\t\t\tmarginTop: 15,\n\t\t\t\t\t\t\tfontSize: 20,\n\t\t\t\t\t\t\tfontWeight: 700,\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{!account\n\t\t\t\t\t\t\t? t(\"wallet.connect\")\n\t\t\t\t\t\t\t: `${activeSide === OrderSide.Buy ? t(\"orderSide.buy\") : t(\"orderSide.sell\")} ${\n\t\t\t\t\t\t\t\t\tselectedMarketStats?.baseAsset || \"\"\n\t\t\t\t\t\t\t  }`}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</Content>\n\t\t</Card>\n\t);\n};\n\nexport default BuyOrSell;\n","import styled from \"styled-components\";\n\nimport Page from \"../../components/Page\";\nimport { DEFAULT_MARGIN_MARKET } from \"../../constants\";\nimport StyledCard, { ResponsiveCard } from \"../../components/Card\";\nimport Orderbook from \"./components/Orderbook\";\nimport TradeHistory from \"./components/TradeHistory\";\nimport MarketDetails from \"./components/MarketDetails\";\nimport TradingViewWidget, { Themes } from \"react-tradingview-widget\";\nimport OrderHistory from \"./components/OrderHistory\";\nimport Providers from \"./Provider\";\nimport { useSelector } from \"react-redux\";\nimport MarketStats from \"./components/MarketStats\";\nimport BuyOrSell from \"./components/BuyOrSell\";\n\nconst Row = styled.div`\n\tdisplay: ${({ justMobile }) => (justMobile ? \"none\" : \"flex\")};\n\tmargin-left: -5px;\n\tmargin-right: -5px;\n\n\t@media (max-width: 1400px) {\n\t\tflex-direction: column;\n\t\tdisplay: ${({ justDesktop }) => (justDesktop ? \"none\" : \"flex\")};\n\t}\n`;\nconst Col = styled.div`\n\tpadding: 0 5px;\n\tdisplay: flex;\n\tflex-direction: column;\n`;\n\nconst ContainerCard = styled(ResponsiveCard)`\n\tdisplay: flex;\n\tmargin-bottom: 20px;\n\n\t& .card-body {\n\t\tpadding: 30px;\n\t}\n\n\t@media (min-width: 1400px) {\n\t\twidth: 582px;\n\t\theight: 487px;\n\t\tmargin-bottom: 10px;\n\n\t\t& .card-body {\n\t\t\tpadding: 12px 20px 20px;\n\t\t\tdisplay: flex;\n\t\t}\n\t}\n`;\n\nconst Card = styled(StyledCard)`\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: stretch;\n\tmargin-bottom: 20px;\n\toverflow: hidden;\n\n\t& .card-body {\n\t\tpadding: 0;\n\t}\n\t@media (min-width: 1400px) {\n\t\tmargin-bottom: 10px;\n\t\twidth: 570px;\n\t\theight: 373px;\n\t}\n`;\n\nconst Margin = (props) => {\n\tconst selectedMarket = useSelector((state) => state.margin.selectedMarket);\n\n\treturn (\n\t\t<Page title={false} morePadding size={\"xl\"}>\n\t\t\t<Providers>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col>\n\t\t\t\t\t\t<MarketStats />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col>\n\t\t\t\t\t\t<MarketDetails isTradingGraphic={true} />\n\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t<TradingViewWidget\n\t\t\t\t\t\t\t\tsymbol={(selectedMarket || DEFAULT_MARGIN_MARKET).split(\"-\").join(\"\")}\n\t\t\t\t\t\t\t\ttheme={Themes.DARK}\n\t\t\t\t\t\t\t\tallow_symbol_change={false}\n\t\t\t\t\t\t\t\twidth={\"100%\"}\n\t\t\t\t\t\t\t\theight={373}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t<OrderHistory />\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col>\n\t\t\t\t\t\t<ContainerCard>\n\t\t\t\t\t\t\t<Orderbook />\n\t\t\t\t\t\t\t<TradeHistory />\n\t\t\t\t\t\t</ContainerCard>\n\t\t\t\t\t\t<BuyOrSell />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Providers>\n\t\t</Page>\n\t);\n};\n\nexport default Margin;\n"],"sourceRoot":""}