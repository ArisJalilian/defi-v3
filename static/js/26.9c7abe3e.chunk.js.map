{"version":3,"sources":["components/NumericalInput/index.tsx","hooks/useTokenToBalance.js","components/hoc/withBalance.js","../node_modules/react-i18next/dist/es/withTranslation.js","pages/Borrow/ModalProvider/modals/UnlockToken.js","pages/Borrow/Provider/index.js","pages/Borrow/GlobalOverall/index.js","services/aave/gql.js","components/BorrowInputPanel/index.js","pages/Borrow/LendingBalance/LendingModalContainer.js","pages/Borrow/LendingBalance/index.js","pages/Borrow/BorrowBalance/BorrowTokenModal.js","pages/Borrow/BorrowBalance/RepayTokenModal.js","pages/Borrow/BorrowBalance/index.js","pages/Borrow/Common/index.js","pages/Borrow/ModalProvider/index.js","pages/Borrow/ModalProvider/modals/WrapEth.js","pages/Borrow/ModalProvider/modals/LendingToken.js","state/defi/actions.js","pages/Borrow/ModalProvider/modals/BorrowToken.js","pages/Borrow/index.js"],"names":["StyledInput","styled","input","error","theme","red1","text1","bg3","align","size","reverse","noBorder","modalBG","text3","inputRegex","RegExp","Input","React","memo","value","onUserInput","placeholder","rest","onChange","event","nextUserInput","target","replace","test","escapeRegExp","inputMode","title","autoComplete","autoCorrect","type","pattern","minLength","maxLength","spellCheck","useSpotBalances","useActiveWeb3React","account","library","baseToken","useSelector","getBaseToken","quoteToken","getQuoteToken","knownTokens","useMemo","getKnownTokens","tokens","getTokens","wethToken","getWethToken","allBalances","address","useState","balances","setBalances","fetchBalances","a","tokensToTokenBalances","res","useEffect","length","useTokenToBalance","window","ethereum","ethBalance","useETHBalances","wethBalance","find","b","token","symbol","tokensBalance","filter","ethereumBalance","ETH","toExact","bn","BigNumber","currency","undefined","balance","totalEthBalance","total","plus","baseTokenBalance","searchToken","tokenBalances","wethTokenBalance","tokenToFind","quoteTokenBalance","withBalance","Component","props","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","i","arguments","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","withTranslation","ns","options","WrappedComponent","I18nextWithTranslation","_ref","forwardedRef","_objectWithoutProperties","_useTranslation","useTranslation","_useTranslation2","_slicedToArray","t","i18n","ready","passDownProps","tReady","withRef","ref","createElement","displayName","concat","getDisplayName","forwardRef","assign","UnlockToken","unlocking","setUnlocking","currentStep","getStepsModalCurrentStep","web3","dispatch","useDispatch","unlockToken","getContractWrappers","getProvider","contractWrappers","approveAddress","contractAddresses","erc20Proxy","erc20Token","ERC20TokenContract","amount","UNLIMITED_ALLOWANCE_IN_BASE_UNITS","approve","sendTransactionAsync","from","tx","awaitTransactionSuccessAsync","stepsModalAdvanceStep","onDismiss","pendingText","GraphQlProvider","client","getAaveGraphClient","children","StyledCard","Card","Text","span","variant","GlobalOverall","isNative","getAaveCurrency","userAccountData","getAaveUserAccountData","ethUsd","getEthInUsd","fetchAaveGlobal","getAaveOverall","userAcc","setAaveUserAccountData","loadingLendingPoolData","useInterval","formatETHField","field","dividedBy","toFixed","multipliedBy","totalLiquidity","totalCollateralETH","totalBorrowsETH","availableBorrowsETH","currentLiquidationThreshold","ltv","healthFactor","gt","columns","dataField","text","formatter","cellContent","row","rowIndex","wrapperClasses","bordered","classes","bootstrap4","keyField","remote","data","ResponsiveTable","breakpoint","direction","withoutBorder","GET_AAVE_RESERVES","gql","InputRow","div","flexRowNoWrap","Container","Label","InputContainer","LabelRow","Aligner","InputPanel","flexColumnNoWrap","StyledTokenName","CurrencySelect","button","bg1","BalanceRow","BorrowInputPanel","state","valueStr","tokenAmountInUnits","decimals","valueFixedDecimals","_updateValue","newValue","unitsInTokenAmount","min","isLessThan","setState","this","label","disable","selected","hideInput","id","showBalance","balanceText","Token","name","style","padding","borderRadius","className","CurrencyLogo","active","Boolean","slice","toUpperCase","NumericalInput","getDerivedStateFromProps","eq","Title","h4","SummaryRow","CustomTypeBlack","TYPE","black","StyledButton","LendingModalContainer","btnMsg","cardMsg","componentDidMount","TX_DEFAULTS_TRANSFER","gasTransferToken","toast","submit","tokenBalance","isEth","aToken","isLending","onSubmit","_reset","_closeModal","setMax","maxBalance","updateAmount","coinSymbol","displayDecimals","context","closeModal","show","liquidityRate","tokenSymbolToDisplayString","btnPrefix","balanceInUnits","btnText","isSubmitAllowed","isGreaterThan","onHide","centered","Body","Row","Col","xs","max","pow","toString","marginBottom","fontWeight","color","disabled","onClick","contextType","ThemeContext","LogoContainer","Symbol","Name","CellText","isEthState","setIsEthState","isHideZeroBalance","isStableCoin","isModalOpenState","setIsModalOpenState","isSubmittingState","setIsSubmittingState","aTokenDataState","setATokenDataState","isLendingState","setIsLendingState","tokenBalanceState","setTokenBalanceState","order","sort","setSort","aTokensData","getATokensData","tokensPrice","getTokensPrice","ethTotalBalance","currencySelector","getAaveLoadingState","tokensRow","map","tokenD","isEthToken","isWethToken","tb","isEqualTo","displayBalance","displayDepositBalance","tokB","formattedLendBalance","formattedBalance","tokenPrice","c_id","formatTokenSymbol","price_usd","apy","tokenName","tokenSymbol","sortedData","handleSubmit","startLendingTokenSteps","Protocol","Aave","startUnLendingTokenSteps","wethPlusEthBalance","openLendingModal","openUnLendingModal","bind","isAction","formatExtraData","onTableChange","sortField","sortOrder","isSubmitting","BorrowTokenModal","availableForBorrow","setError","setAmount","useTheme","variableBorrowRate","RepayTokenModal","borrowedBalance","setIsNotEnoughBalance","isLessThanOrEqualTo","balanceInShort","minus","balanceBorrowedInUnits","amountSubmit","isModalBorrowOpenState","setIsModalBorrowOpenState","isModalRepayOpenState","setIsModalRepayOpenState","isBorrowState","setIsBorrowState","availableForBorrowState","setAvailableForBorrowState","borrowBalanceState","setBorrowBalanceState","reserves","getAaveReservesGQLResponse","borrowBalance","reserve","r","displayAvailableForBorrowBalance","displayBorrowedBalance","availableBalanceForBorrowToken","priceInEth","price","totalAvailableForBorrowETH","integerValue","ROUND_DOWN","formattedBorrowedBalance","formattedAvailableForBorrowBalance","closeBorrowModal","closeRepayModal","startBorrowTokenSteps","startRepayTokenSteps","openBorrowModal","openRepayModal","modals","web3Wrapper","HeaderCol","CustomNav","Nav","CustomNavItem","Item","CustomNavLink","Link","primary","BorrowCommon","useQuery","pollInterval","loading","aaveLoadingState","setAaveReservesGQLResponse","AaveLoadingState","NotLoaded","initAave","fetchAave","Tab","defaultActiveKey","fill","eventKey","Content","Pane","wrapping","setWrapping","currentWethBalance","newWethBalance","convertingFrom","wrapEthereum","updateWethBalance","convertTxHash","connect","step","gasInfo","getGasInfo","onSubmitLendingToken","defiToken","getState","protocol","getDefiProtocol","txHash","lendingAToken","lendingDefiToken","onSubmitUnLendingToken","unLendingAToken","unLendingDefiToken","setLoading","amountOfTokenString","Lending","onDone","onSubmitBorrowToken","borrowAToken","borrowDefiToken","onSubmitRepayToken","repayAToken","repayDefiToken","isBorrow","Borrowing","ModalProvider","submitted","setSubmitted","setTxHash","isOpen","Web3","givenProvider","providers","HttpProvider","process","currentProvider","Web3Wrapper","hideModal","setStepsModalCurrentStep","chainId","CHAIN_ID","hash","kind","StepKind","ToggleTokenLock","WrapEth","LendingToken","UnLendingToken","RepayToken","BorrowToken","StyledRow","Borrow","Page"],"mappings":"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","file":"static/js/26.9c7abe3e.chunk.js","sourcesContent":["import React from 'react'\nimport styled from 'styled-components'\nimport { escapeRegExp } from '../../utils'\n\nconst StyledInput = styled.input<{ error?: boolean; fontSize?: string; align?: string, noBorder?: boolean, reverse?: boolean, size?: string }>`\n  color: ${({ error, theme }) => (error ? theme.red1 : theme.text1)};\n  width: 0;\n  position: relative;\n  font-weight: 500;\n  font-family: inherit;\n  outline: none;\n  border: none;\n  flex: 1 1 auto;\n  background-color: ${({ theme }) => theme.bg3};\n  font-size: 1rem;\n  text-align: ${({ align }) => align && align};\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  height: ${({ size}) => size === 'sm' ? '48px' : '56px'};\n  border-bottom-right-radius: ${({ reverse }) => reverse ? '0' :  `1.125rem`};\n  border-top-right-radius: ${({ reverse }) => reverse ? '0' :  `1.125rem`};\n  border-bottom-left-radius: ${({ reverse }) => reverse ? '1.125rem' :  `0`};\n  border-top-left-radius: ${({ reverse }) => reverse ? '1.125rem' :  `0`};\n  padding-right: 0.625rem;\n  padding-left: ${({ noBorder, reverse }) => reverse ? '1.375rem' : noBorder ? '0.625rem' : `1.5rem`};\n  -webkit-appearance: textfield;\n  border-left: ${({ theme, noBorder }) => noBorder ? 'none' :  `3px solid ${theme.modalBG}`};\n  \n  @media (min-width: 768px) {\n    \n    padding-right: 4.5625rem;\n  }\n\n  ::-webkit-search-decoration {\n    -webkit-appearance: none;\n  }\n\n  [type='number'] {\n    -moz-appearance: textfield;\n  }\n\n  ::-webkit-outer-spin-button,\n  ::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n  }\n\n  ::placeholder {\n    color: ${({ theme }) => theme.text3};\n  }\n`\n\nconst inputRegex = RegExp(`^\\\\d*(?:\\\\\\\\[.])?\\\\d*$`) // match escaped \".\" characters via in a non-capturing group\n\nexport const Input = React.memo(function InnerInput({\n  value,\n  onUserInput,\n  placeholder,\n  size,\n  ...rest\n}: {\n  value: string | number\n  onUserInput: (input: string) => void\n  error?: boolean\n  fontSize?: string\n  size?: string\n  align?: 'right' | 'left'\n} & Omit<React.HTMLProps<HTMLInputElement>, 'ref' | 'onChange' | 'as'>) {\n  const enforcer = (nextUserInput: string) => {\n    if (nextUserInput === '' || inputRegex.test(escapeRegExp(nextUserInput))) {\n      onUserInput(nextUserInput)\n    }\n  }\n\n  return (\n    <StyledInput\n      {...rest}\n      value={value}\n      onChange={event => {\n        // replace commas with periods, because uniswap exclusively uses period as the decimal separator\n        enforcer(event.target.value.replace(/,/g, '.'))\n      }}\n      // universal input options\n      inputMode=\"decimal\"\n      title=\"Token Amount\"\n      autoComplete=\"off\"\n      autoCorrect=\"off\"\n      size={size}\n      // text-specific options\n      type=\"text\"\n      pattern=\"^[0-9]*[.,]?[0-9]*$\"\n      placeholder={placeholder || '0.0'}\n      minLength={1}\n      maxLength={79}\n      spellCheck=\"false\"\n    />\n  )\n})\n\nexport default Input\n\n// const inputRegex = RegExp(`^\\\\d*(?:\\\\\\\\[.])?\\\\d*$`) // match escaped \".\" characters via in a non-capturing group\n","import { useMemo, useState, useEffect } from 'react';\nimport {tokensToTokenBalances} from \"../utils/spot/tokens\";\nimport {useActiveWeb3React} from \"./index\";\nimport {useSelector} from \"react-redux\";\nimport {getBaseToken, getQuoteToken, searchToken} from \"../state/selectors\";\nimport {getKnownTokens} from \"../utils/known_tokens\";\nimport {useETHBalances} from \"../state/wallet/hooks\";\nimport {BigNumber} from \"@0x/utils\";\n\nexport const useTokenToBalance = (tokens, address, library) => {\n    const [balances, setBalances] = useState([]);\n\n    const fetchBalances = async () => {\n        if(address) {\n            const res = await tokensToTokenBalances(tokens, address, library)\n            setBalances(res);\n        }\n    }\n    useEffect(() => {\n        fetchBalances()\n    }, [address, tokens])\n\n    return useMemo(() => {\n        if(balances.length > 0) {\n            return balances;\n        } else {\n            return []\n        }\n    }, [address, balances, tokens])\n}\n\n\nexport const useSpotBalances = () => {\n    const { account, library } = useActiveWeb3React()\n\n    const baseToken = useSelector(getBaseToken);\n    const quoteToken = useSelector(getQuoteToken);\n\n    const knownTokens = useMemo(() => {\n        return getKnownTokens();\n    }, [])\n    const tokens = useMemo(() => {\n        return knownTokens.getTokens()\n    }, [])\n\n    const wethToken = useMemo(() => {\n        return knownTokens.getWethToken()\n    }, []);\n\n    const t = useMemo(() => {\n        return [...tokens, wethToken]\n    }, [wethToken, tokens])\n    const allBalances = useTokenToBalance(t, account, window.ethereum || library);\n\n    const ethBalance = useETHBalances([account])\n\n    const wethBalance = useMemo(() => {\n        return allBalances.find(b => b.token.symbol === wethToken.symbol);\n    }, [allBalances])\n\n    const tokensBalance = useMemo(() => {\n        return allBalances.filter(b => b.token.symbol !== wethToken.symbol);\n    }, [allBalances])\n\n    const ethereumBalance = useMemo(() => {\n        const ETH = ethBalance[account] ? ethBalance[account].toExact() : null\n        const bn = new BigNumber(ETH * (10 ** 18))\n\n        return {\n            token: ethBalance[account] ? ethBalance[account].currency : undefined,\n            balance: bn\n        }\n    }, [ethBalance]);\n\n    const totalEthBalance = useMemo(() => {\n        if(wethBalance && ethereumBalance) {\n            let total = wethBalance.balance;\n            if(ethereumBalance.token !== undefined) {\n                total = ethereumBalance.balance.plus(wethBalance.balance);\n            }\n\n            return total;\n        } else {\n            return undefined;\n        }\n    }, [ethereumBalance, wethBalance])\n\n    const baseTokenBalance = useMemo(() => {\n\n        return searchToken({ tokenBalances: tokensBalance, wethTokenBalance: wethBalance, tokenToFind: baseToken });\n    }, [baseToken, tokensBalance, wethBalance])\n\n    const quoteTokenBalance = useMemo(() => {\n\n        return searchToken({ tokenBalances: tokensBalance, wethTokenBalance: wethBalance, tokenToFind: quoteToken });\n    }, [quoteToken, tokensBalance, wethBalance])\n\n    return useMemo(() => {\n        return {\n            quoteTokenBalance,\n            baseTokenBalance,\n            totalEthBalance,\n            ethBalance: ethereumBalance,\n            wethBalance,\n            tokensBalance,\n        }\n    }, [account, baseToken, quoteToken, allBalances, baseTokenBalance, quoteTokenBalance])\n}\n","import {useSpotBalances} from \"../../hooks/useTokenToBalance\";\n\n\nconst withBalance = Component => {\n    return props => {\n        const balances = useSpotBalances();\n        return (\n            <Component\n                {...props}\n                {...balances}\n            />\n        )\n    }\n\n}\n\nexport default withBalance;\n","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport { useTranslation } from './useTranslation';\nimport { getDisplayName } from './utils';\nexport function withTranslation(ns) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return function Extend(WrappedComponent) {\n    function I18nextWithTranslation(_ref) {\n      var forwardedRef = _ref.forwardedRef,\n          rest = _objectWithoutProperties(_ref, [\"forwardedRef\"]);\n\n      var _useTranslation = useTranslation(ns, rest),\n          _useTranslation2 = _slicedToArray(_useTranslation, 3),\n          t = _useTranslation2[0],\n          i18n = _useTranslation2[1],\n          ready = _useTranslation2[2];\n\n      var passDownProps = _objectSpread(_objectSpread({}, rest), {}, {\n        t: t,\n        i18n: i18n,\n        tReady: ready\n      });\n\n      if (options.withRef && forwardedRef) {\n        passDownProps.ref = forwardedRef;\n      } else if (!options.withRef && forwardedRef) {\n        passDownProps.forwardedRef = forwardedRef;\n      }\n\n      return React.createElement(WrappedComponent, passDownProps);\n    }\n\n    I18nextWithTranslation.displayName = \"withI18nextTranslation(\".concat(getDisplayName(WrappedComponent), \")\");\n    I18nextWithTranslation.WrappedComponent = WrappedComponent;\n\n    var forwardRef = function forwardRef(props, ref) {\n      return React.createElement(I18nextWithTranslation, Object.assign({}, props, {\n        forwardedRef: ref\n      }));\n    };\n\n    return options.withRef ? React.forwardRef(forwardRef) : I18nextWithTranslation;\n  };\n}","import {ConfirmationPendingContent} from \"../../../../components/TransactionConfirmationModal\";\nimport React, {useEffect, useState} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\n\nimport {getStepsModalCurrentStep} from \"../../../../state/selectors\";\nimport {UNLIMITED_ALLOWANCE_IN_BASE_UNITS} from \"../../../../constants\";\nimport {useActiveWeb3React} from \"../../../../hooks\";\nimport {getContractWrappers} from \"../../../../utils/spot/contractWrapper\";\nimport {ERC20TokenContract} from \"@0x/contract-wrappers\";\nimport {stepsModalAdvanceStep} from \"../../../../state/spotUI/actions\";\n\nconst UnlockToken = props => {\n    const [unlocking, setUnlocking] = useState(false);\n    const { account, library } = useActiveWeb3React();\n    const currentStep = useSelector(getStepsModalCurrentStep);\n    const { address, token } = currentStep;\n    const web3 = props.web3;\n    const dispatch = useDispatch();\n\n    const unlockToken = async () => {\n        try {\n\n            const contractWrappers = await getContractWrappers(web3.getProvider());\n            const approveAddress = address ? address : contractWrappers.contractAddresses.erc20Proxy;\n\n            const erc20Token = new ERC20TokenContract(token.address, contractWrappers.getProvider());\n            const amount = UNLIMITED_ALLOWANCE_IN_BASE_UNITS;\n\n            const tx = await erc20Token.approve(approveAddress, amount).sendTransactionAsync({\n                from: account,\n            });\n            setUnlocking(true)\n            await web3.awaitTransactionSuccessAsync(tx);\n\n            if(tx) {\n                setUnlocking(false)\n                dispatch(stepsModalAdvanceStep());\n            }\n\n        } catch(e) {\n            setUnlocking(false)\n            props.onDismiss();\n        }\n    }\n\n    useEffect(() => {\n        unlockToken();\n    }, [currentStep])\n\n    return (\n        <ConfirmationPendingContent onDismiss={unlocking ? () => null : props.onDismiss} pendingText={unlocking ? 'Unlocking' : 'Waiting for confirmation'} />\n    )\n}\n\nexport default UnlockToken;\n","import { ApolloProvider } from '@apollo/react-hooks';\n\nimport {getAaveGraphClient} from \"../../../services/aave/aave\";\n\nconst GraphQlProvider = props => {\n    return (\n        <ApolloProvider client={getAaveGraphClient()}>\n            {props.children}\n        </ApolloProvider>\n    )\n}\n\nexport default GraphQlProvider;\n","import { BigNumber } from '@0x/utils';\nimport {useDispatch, useSelector} from \"react-redux\";\n\nimport './styles.scss';\nimport {useActiveWeb3React} from \"../../../hooks\";\nimport {getAaveCurrency, getAaveUserAccountData, getEthInUsd} from \"../../../state/selectors\";\nimport {getAaveOverall} from \"../../../services/aave/aave\";\nimport {setAaveUserAccountData} from \"../../../state/aave/actions\";\nimport React, {useEffect} from \"react\";\nimport useInterval from \"../../../hooks/useInterval\";\nimport Card from '../../../components/Card';\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport ResponsiveTable from \"../../../components/ResponsiveTable\";\nimport styled from \"styled-components\";\nimport {useTranslation} from \"react-i18next\";\n\nconst StyledCard = styled(Card)`\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  \n  & .card-body {\n    padding: 24px 20px 20px;\n  }\n  \n  @media (min-width: 1400px) {  \n    & .card-body {\n      padding: 24px;\n    }\n  }\n`\n\nconst Text = styled.span`\n  color: ${({theme, variant}) => variant ? theme[variant] : theme.text1};\n  font-size: 1rem;\n  font-weight: 700;\n`\n\nconst GlobalOverall = props => {\n    const { account } = useActiveWeb3React();\n    const currencySelector = useSelector(getAaveCurrency);\n    const isNative = currencySelector === 'NATIVE'\n    const dispatch = useDispatch();\n    const userAccountData = useSelector(getAaveUserAccountData);\n    const ethUsd = useSelector(getEthInUsd);\n    const { t } = useTranslation()\n\n    const fetchAaveGlobal = async () => {\n        const userAcc = await getAaveOverall(account);\n        dispatch(setAaveUserAccountData(userAcc));\n    };\n\n\n    // initial loading\n    useEffect(() => {\n        const loadingLendingPoolData = async () => {\n            if (account) {\n                await fetchAaveGlobal();\n            }\n        };\n\n        loadingLendingPoolData();\n    }, [account]);\n\n\n    // Update global state\n    useInterval(async () => {\n        if (account) {\n            await fetchAaveGlobal();\n        }\n    }, 30 * 1000);\n\n    const formatETHField = (field = undefined) => {\n        if (field) {\n            return isNative\n                ? `${field.dividedBy('1e18').toFixed(3)} ETH`\n                : ethUsd\n                    ? `${field\n                        .dividedBy('1e18')\n                        .multipliedBy(ethUsd)\n                        .toFixed(3)} USD`\n                    : '- USD';\n        } else {\n            return '-';\n        }\n    };\n\n\n    const totalLiquidity = formatETHField(userAccountData && userAccountData.totalLiquidity);\n    const totalCollateralETH = formatETHField(userAccountData && userAccountData.totalCollateralETH);\n    const totalBorrowsETH = formatETHField(userAccountData && userAccountData.totalBorrowsETH);\n    const availableBorrowsETH = formatETHField(userAccountData && userAccountData.availableBorrowsETH);\n    const currentLiquidationThreshold =\n        (userAccountData && `${userAccountData.currentLiquidationThreshold.toFixed(0)} %`) || '-';\n    const ltv = (userAccountData && `${userAccountData.ltv.toFixed(0)} %`) || '-';\n    let healthFactor = '-';\n    let healtFactorValue;\n    // const healthFactor = (userAccountData && userAccountData.healthFactor.toFixed(3)) || '-';;\n    if (userAccountData && userAccountData.totalBorrowsETH.gt(0)) {\n        healthFactor = userAccountData && userAccountData.healthFactor.dividedBy('1e18').toFixed(3);\n        healtFactorValue = new BigNumber(healthFactor);\n    }\n\n    const columns = [\n        {\n            dataField: \"total_liquidity\",\n            text: t('borrow.totalLiquidity'),\n            formatter: (cellContent, row, rowIndex) => {\n                return (\n                    <Text>{row.totalLiquidity}</Text>\n                )\n            },\n        },\n        {\n            dataField: \"total_collateral\",\n            text: t('borrow.totalCollateral'),\n            formatter: (cellContent, row, rowIndex) => {\n                return (\n                    <Text>{row.totalCollateralETH}</Text>\n                )\n            },\n        },\n        {\n            dataField: \"total_borrows\",\n            text: t('borrow.totalBorrows'),\n            formatter: (cellContent, row, rowIndex) => {\n                return (\n                    <Text>{row.totalBorrowsETH}</Text>\n                )\n            },\n        },\n        {\n            dataField: \"available\",\n            text: t('borrow.available'),\n            formatter: (cellContent, row, rowIndex) => {\n                return (\n                    <Text>{row.availableBorrowsETH}</Text>\n                )\n            },\n        },\n        {\n            dataField: \"liquidation_threshold\",\n            text: t('borrow.liquidationThreshold'),\n            formatter: (cellContent, row, rowIndex) => {\n                return (\n                    <Text>{row.currentLiquidationThreshold}</Text>\n                )\n            },\n        },\n        {\n            dataField: \"ltv\",\n            text: \"LTV\",\n            formatter: (cellContent, row, rowIndex) => {\n                return (\n                    <Text>{row.ltv}</Text>\n                )\n            },\n        },\n        {\n            dataField: \"health_factor\",\n            text: t('borrow.healthFactor'),\n            formatter: (cellContent, row, rowIndex) => {\n                return (\n                    <Text>{row.healthFactor}</Text>\n                )\n            },\n        },\n    ]\n\n    return (\n        <StyledCard>\n            <BootstrapTable\n                wrapperClasses=\"d-none d-lg-block\"\n                bordered={false}\n                classes=\"table table-head-custom table-borderless table-vertical-center overflow-hidden global-overall__table mb-0\"\n                bootstrap4\n                keyField={'id'}\n                remote\n                data={[{totalLiquidity, totalCollateralETH, totalBorrowsETH, availableBorrowsETH, currentLiquidationThreshold, ltv, healthFactor}]}\n                columns={columns}\n            />\n            <ResponsiveTable breakpoint={'lg'} columns={columns} data={[{totalLiquidity, totalCollateralETH, totalBorrowsETH, availableBorrowsETH, currentLiquidationThreshold, ltv, healthFactor}]} direction={'rtl'} withoutBorder/>\n        </StyledCard>\n    )\n}\n\nexport default GlobalOverall;\n","/**\n * GraphQl Queries\n *\n */\nimport { gql } from 'apollo-boost';\n\nexport const GET_AAVE_RESERVES = gql`\n    {\n        reserves {\n            id\n            name\n            symbol\n            decimals\n            liquidityRate\n            variableBorrowRate\n            price {\n                priceInEth\n            }\n            stableBorrowRate\n            averageStableBorrowRate\n            aToken {\n                id\n            }\n        }\n    }\n`;\n\n/*export const GET_USER_AAVE_DATA = gql`\n{\n    query UserData($userAddress: String! ){\n        user(id: $userAddress){\n           id,\n           reserves{\n            id,\n            userBalanceIndex,\n            principalATokenBalance,\n            redirectedBalance,\n            principalBorrows,\n            borrowRateMode,\n            borrowRate,\n            usageAsCollateralEnabledOnUser,\n           }\n     }\n   }\n`;*/\n","import React, {useEffect, useState} from 'react'\nimport styled from 'styled-components'\n\nimport { RowBetween } from '../Row'\nimport { Input as NumericalInput } from '../NumericalInput'\nimport {tokenAmountInUnits, unitsInTokenAmount} from \"../../utils/spot/tokens\";\nimport {ZERO} from \"../../constants\";\nimport {ETHER, Token} from \"@uniswap/sdk\";\nimport {useCurrencyBalance} from \"../../state/wallet/hooks\";\nimport {useActiveWeb3React} from \"../../hooks\";\nimport CurrencyLogo from \"../CurrencyLogo\";\n\nconst InputRow = styled.div`\n  ${({ theme }) => theme.flexRowNoWrap};\n  align-items: center;\n  \n  padding: 0.625rem 0 0;\n  \n  \n  @media (min-width: 768px) {\n    padding-top: 0.75rem;\n  }\n`\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 34px;\n  \n  @media (min-width: 768px) {\n    margin-bottom: 36px;\n  }\n`\n\nconst Label = styled.span`\n  color: ${({ theme }) => theme.text1};\n  font-size: .875rem;\n  font-weight: 400;\n  padding: 0 ;\n  \n  @media (min-width: 768px) {\n    padding: 0 1rem;\n  font-weight: 700;\n  }\n`\n\nconst InputContainer = styled.div`\n  position: relative;\n  display: flex;\n  align-items: center;\n  flex-wrap: nowrap;\n  flex: 1;\n  \n`\n\nconst LabelRow = styled.div`\n  ${({ theme }) => theme.flexRowNoWrap};\n  align-items: center;\n  color: ${({ theme }) => theme.text1};\n  font-size: 0.75rem;\n  line-height: 1rem;\n  padding: 0;\n`\n\n\nconst Aligner = styled.span`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  \n  @media (min-width: 768px) {\n  justify-content: space-between;\n  }\n`\n\nconst InputPanel = styled.div`\n  ${({ theme }) => theme.flexColumnNoWrap};\n  position: relative;\n  border-radius: 0.42rem;\n`\n\n\nconst StyledTokenName = styled.span`\n  font-size:  0.875rem;\n  font-weight: 500;\n  margin-left: 15px;\n  \n  @media (min-width: 768px) {\n    font-size:  1rem;\n    margin-right: auto;\n  }\n\n`\n\n\nconst CurrencySelect = styled.button`\n  align-items: center;\n  height: 56px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  background-color: ${({ theme }) => theme.bg3};\n  color: ${({ theme }) => theme.text1};\n  border-bottom-left-radius: 18px;\n  border-top-left-radius: 18px;\n  box-shadow: none;\n  outline: none;\n  cursor: pointer;\n  user-select: none;\n  border: none;\n  padding: 0.875rem 0.625rem;\n  min-width: 116px;\n  width: 116px;\n  text-align: center;\n  \n  \n  @media (min-width: 768px) {\n  min-width: 116px;\n  width: 116px;\n  padding: .625rem 1rem;\n  font-size: 1rem;\n  font-weight: 700;\n  text-align: left;\n  }\n\n  :focus,\n  :hover {\n    background-color: ${({ theme }) => theme.bg1};\n    outline: none;\n  }\n`\n\nlet BalanceRow = styled.div`\n  ${({ theme }) => theme.flexRowNoWrap};\n  align-items: center;\n  margin-top: 10px;\n  color: ${({ theme }) => theme.text1};\n  opacity: 0.5;\n  font-size: 0.75rem;\n  font-weight: 400;\n  line-height: 1rem;\n  padding: 0;\n  \n  \n  @media (min-width: 768px) {\n    padding: 0 1rem;\n  }\n`\n\nexport default class BorrowInputPanel extends React.Component {\n    state = {\n        valueStr: this.props.value\n            ? tokenAmountInUnits(this.props.value, this.props.decimals, this.props.valueFixedDecimals)\n            : '',\n    }\n\n\n    _updateValue = value => {\n\n        const newValue = unitsInTokenAmount(value || '0', this.props.decimals);\n        const invalidValue = this.props.min && newValue.isLessThan(this.props.min);\n        if (invalidValue) {\n            return;\n        }\n\n        this.props.onUserInput(newValue);\n        this.setState({\n            valueStr: value,\n        })\n    };\n\n\n    static getDerivedStateFromProps = (props, state) => {\n        const { decimals, value, valueFixedDecimals } = props;\n        const { valueStr } = state;\n\n        if (!value) {\n            return {\n                valueStr: '',\n            };\n        } else if (value && !unitsInTokenAmount(valueStr || '0', decimals).eq(value)) {\n            return {\n                valueStr: tokenAmountInUnits(value, decimals, valueFixedDecimals),\n            };\n        } else {\n            return null;\n        }\n    };\n\n\n    render() {\n        const {\n            label = 'Input',\n            disable = false,\n            selected,\n            hideInput = false,\n            id,\n            showBalance = true,\n            balanceText,\n            token = undefined\n        } = this.props;\n        const { valueStr } = this.state;\n\n        const currency = token ? new Token(1, token.address, token.decimals, token.symbol, token.name) : undefined\n\n        return (\n            <InputPanel id={id}>\n                <Container>\n                    {!hideInput && (\n                        <LabelRow>\n                            <RowBetween>\n                                <Label>\n                                    {label}\n                                </Label>\n                            </RowBetween>\n                        </LabelRow>\n                    )}\n                    <InputRow style={hideInput ? { padding: '0', borderRadius: '0.42rem' } : {}} selected={disable}>\n                        <CurrencySelect\n                            selected={!!selected}\n                            className=\"open-currency-select-button\"\n                        >\n                            <Aligner>\n                                {token && (\n                                    <CurrencyLogo currency={currency} size={'24px'} />\n                                )}\n                                <StyledTokenName className=\"token-symbol-container\" active={Boolean(selected)}>\n                                    {(selected && selected?.length > 20\n                                        ? (selected?.slice(0, 4) +\n                                            '...' +\n                                            selected?.slice(selected?.length - 5, selected?.length)).toUpperCase()\n                                        : selected.toUpperCase()) || `Select`}\n                                </StyledTokenName>\n                            </Aligner>\n                        </CurrencySelect>\n\n                        {!hideInput && (\n                            <InputContainer>\n                                <NumericalInput\n                                    className=\"token-amount-input pl-3 \"\n                                    value={valueStr}\n                                    onUserInput={this._updateValue}\n                                />\n                            </InputContainer>\n                        )}\n                    </InputRow>\n                    {selected && showBalance && (\n                        <BalanceRow>\n                            {balanceText()}\n                        </BalanceRow>\n                    )}\n                </Container>\n            </InputPanel>\n        )\n    }\n\n}\n","import React from 'react';\nimport {Row, Col} from \"react-bootstrap\";\nimport {BigNumber} from \"@0x/utils\";\nimport styled, {ThemeContext} from 'styled-components';\n\nimport { Modal } from '../../../components/Modal/bootstrap'\nimport {TX_DEFAULTS_TRANSFER} from \"../../../constants\";\nimport {tokenAmountInUnits, tokenSymbolToDisplayString} from \"../../../utils/spot/tokens\";\nimport BorrowInputPanel from \"../../../components/BorrowInputPanel\";\nimport {AutoColumn} from \"../../../components/Column\";\nimport {RowFixed} from \"../../../components/Row\";\nimport {Field} from \"../../../state/swap/actions\";\nimport {TYPE} from \"../../../theme\";\nimport {toast} from \"react-hot-toast\";\nimport {withTranslation} from \"react-i18next\";\n\nconst Title = styled.h4`\n  font-size: 1.25rem;\n  font-weight: 500;\n  margin-top: 0;\n  margin-bottom: 2.25rem;\n`\n\nexport const SummaryRow = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1rem 0;\n  border-bottom: 1px solid ${({ theme }) => theme.text3};\n  font-size: 1rem;\n  font-weight: 500;\n`\n\nconst CustomTypeBlack = styled(TYPE.black)`\n  font-size: 0.75rem;\n  \n  @media (min-width: 768px) {\n    font-size: 1rem;\n  }\n`\n\nconst StyledButton = styled.button`\n  height: 56px;\n  min-height: 56px;\n  min-width: 250px;\n`\n\nclass LendingModalContainer extends React.Component {\n    static contextType = ThemeContext\n    state = {\n        amount: null,\n        error: {\n            btnMsg: null,\n            cardMsg: null,\n        },\n    };\n\n    componentDidMount = () => {\n        const { ethBalance, t } = this.props;\n        if (ethBalance.isLessThan(TX_DEFAULTS_TRANSFER.gasTransferToken)) {\n            toast.error(t('errors.notEnoughGas'))\n            this.setState({\n                error: {\n                    btnMsg: 'Error',\n                    cardMsg: t('errors.notEnoughGas'),\n                },\n            });\n        }\n    };\n\n    render() {\n        const theme = this.context;\n        const { tokenBalance, closeModal, ethBalance, isEth, wethToken, aToken, isLending, show, t, ...restProps } = this.props;\n        const { error, amount } = this.state;\n        const { liquidityRate } = aToken;\n        let coinSymbol;\n        let maxBalance;\n        let decimals;\n        let displayDecimals;\n\n        if (isEth) {\n            displayDecimals = wethToken.displayDecimals;\n            decimals = 18;\n            maxBalance = isLending ? ethBalance : aToken.balance || new BigNumber(0);\n            coinSymbol = tokenSymbolToDisplayString('ETH');\n        } else if (tokenBalance) {\n            const { token, balance } = tokenBalance;\n            displayDecimals = token.displayDecimals;\n            decimals = token.decimals;\n            maxBalance = isLending ? balance : aToken.balance || new BigNumber(0);\n            coinSymbol = tokenSymbolToDisplayString(token.symbol);\n        } else {\n            return null;\n        }\n\n        const { token } = tokenBalance;\n        const btnPrefix = isLending ? 'Deposit ' : 'Withdraw ';\n        const balanceInUnits = tokenAmountInUnits(maxBalance, decimals, displayDecimals);\n        const btnText = error && error.btnMsg ? 'Error' : btnPrefix + coinSymbol;\n        const isSubmitAllowed = amount === null || (amount && amount.isGreaterThan(maxBalance));\n\n        return (\n           <Modal show={show} onHide={closeModal} centered>\n               <Modal.Body style={{ padding: 30 }}>\n                   <Row>\n                       <Col xs={12}>\n                           <Title>{isLending ? t('Deposit') : t('withdraw')} {coinSymbol}</Title>\n                       </Col>\n                       <Col xs={12}>\n                           <BorrowInputPanel\n                               decimals={decimals}\n                               min={0}\n                               max={maxBalance}\n                               onUserInput={this.updateAmount}\n                               value={amount}\n                               token={token}\n                               selected={coinSymbol}\n                               showBalance={false}\n                               label={isLending ? t('wantToDeposit') : t('wantToWithdraw')}\n                               placeholder={new BigNumber(1).div(new BigNumber(10).pow(displayDecimals)).toString()}\n                               valueFixedDecimals={displayDecimals}\n                           />\n                       </Col>\n                       <Col xs={12} style={{ marginBottom: 56 }}>\n                           <AutoColumn>\n                               <SummaryRow>\n                                   <RowFixed>\n                                       <CustomTypeBlack fontWeight={500} color={theme.text1}>\n                                           {t('interestAPR')}\n                                       </CustomTypeBlack>\n                                   </RowFixed>\n                                   <RowFixed>\n                                       <CustomTypeBlack color={theme.text1} fontWeight={500}>\n                                           {liquidityRate\n                                               .div('1e27')\n                                               .multipliedBy(100)\n                                               .toFixed(5)}{' '}\n                                           %\n                                       </CustomTypeBlack>\n                                   </RowFixed>\n                               </SummaryRow>\n                               <SummaryRow>\n                                   <RowFixed>\n                                       <CustomTypeBlack fontWeight={500} color={theme.text1}>\n                                           {t('amount')}\n                                       </CustomTypeBlack>\n                                   </RowFixed>\n                                   <RowFixed>\n                                       <CustomTypeBlack color={theme.text1} fontWeight={500}>\n                                           {balanceInUnits}\n                                       </CustomTypeBlack>\n                                   </RowFixed>\n                               </SummaryRow>\n                           </AutoColumn>\n                       </Col>\n                       <Col xs={12} className={'d-flex align-items-stretch align-items-lg-center justify-content-center flex-column'}>\n                           <StyledButton\n                               className={`btn btn-${isLending ? 'primary' : \"warning\"}`}\n                               disabled={isSubmitAllowed}\n                               onClick={this.submit}\n                           >\n\n                               {btnText}\n                           </StyledButton>\n                       </Col>\n                   </Row>\n\n               </Modal.Body>\n           </Modal>\n        )\n    }\n\n    submit = async () => {\n        const { tokenBalance, isEth, wethToken, aToken, isLending } = this.props;\n        let token;\n        if (isEth) {\n            token = {\n                ...wethToken,\n                symbol: 'ETH',\n            };\n        } else if (tokenBalance) {\n            token = tokenBalance.token;\n        } else {\n            return null;\n        }\n        const amount = this.state.amount || new BigNumber(0);\n        this.props.onSubmit(amount, token, aToken, isEth, isLending);\n    };\n\n    _reset = () => {\n        this.setState({\n            amount: null,\n        });\n    };\n\n    _closeModal = () => {\n        this._reset();\n    };\n\n    setMax = () => {\n        const { tokenBalance, isEth, ethBalance, isLending, aToken } = this.props;\n        if (isEth) {\n            const maxBalance = isLending ? ethBalance : aToken.balance || new BigNumber(0);\n            this.setState({\n                amount: maxBalance,\n            });\n        } else if (tokenBalance) {\n            this.setState({\n                amount: isLending ? tokenBalance.balance : aToken.balance || new BigNumber(0),\n            });\n        }\n    };\n\n    updateAmount = (newValue) => {\n        this.setState({\n            amount: newValue,\n        });\n    };\n}\n\nexport default withTranslation()(LendingModalContainer);\n","import React, {useMemo, useState} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport { BigNumber } from \"@0x/utils\";\nimport styled from \"styled-components\";\nimport { Token } from \"@uniswap/sdk\";\n\nimport {getAaveCurrency, getAaveLoadingState, getATokensData, getTokensPrice} from \"../../../state/selectors\";\nimport withBalance from \"../../../components/hoc/withBalance\";\nimport {useActiveWeb3React} from \"../../../hooks\";\nimport {setAaveCurrency} from \"../../../state/aave/actions\";\nimport {getKnownTokens, isWethToken} from \"../../../utils/known_tokens\";\nimport {formatTokenSymbol, tokenAmountInUnits} from \"../../../utils/spot/tokens\";\nimport {Protocol} from \"../../../utils/aave/types\";\nimport {startLendingTokenSteps, startUnLendingTokenSteps} from \"../../../state/spotUI/actions\";\nimport CurrencyLogo from \"../../../components/CurrencyLogo\";\nimport Skeleton from \"react-loading-skeleton\";\nimport {StyledLink, TradeButton} from \"../../Wallet\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport ResponsiveTable from \"../../../components/ResponsiveTable\";\nimport LendingModalContainer from \"./LendingModalContainer\";\nimport {sortedData} from \"../../../lib/helper\";\nimport {useTranslation} from \"react-i18next\";\n\n\nconst LogoContainer = styled.div`\n  width: 32px;\n  height: 32px;\n  border-radius: 32px;\n  background-color: ${({ theme }) => theme.text1};  \n  \n  @media (max-width: 991px) {\n    width: 24px;\n    height: 24px;\n    border-radius: 24px;\n  }\n`\n\nconst Symbol = styled.span`\n  color: ${({ theme }) => theme.text1};\n  font-size: 1rem;\n  margin-right: 10px;\n  font-weight: 700;\n`\n\n\nconst Name = styled.span`\n  font-weight: 400;\n  color: ${({ theme }) => theme.text1};\n  font-size: 0.875rem;\n  \n  @media (max-width: 991px) {\n    font-size: 0.875rem;\n    font-weight: 400;\n  }\n`\n\nconst CellText = styled.span`\n  font-weight: 500;\n  font-size: .875rem;\n  color: ${({ theme }) => theme.text1};\n  \n  &.font-size-base {\n    font-size: 1rem;\n  }\n  \n  @media (max-width: 991px) {\n    font-weight: 700;\n    \n    &.label {\n    font-weight: 500;\n    }\n  }\n`\n\nconst LendingBalance = props => {\n    const [isEthState, setIsEthState] = useState(false);\n    const [isHideZeroBalance, setIsHideZeroBalance] = useState(false);\n    const [isStableCoin, setIsStableCoin] = useState(false);\n    const [isModalOpenState, setIsModalOpenState] = useState(false);\n    const [isSubmittingState, setIsSubmittingState] = useState(false);\n    const [aTokenDataState, setATokenDataState] = useState();\n    const [isLendingState, setIsLendingState] = useState(true);\n    const [tokenBalanceState, setTokenBalanceState] = useState();\n    const [sort, setSort] = useState({\n        field: false,\n        order: 'desc',\n    });\n    const { t } = useTranslation();\n\n    const { account } = useActiveWeb3React();\n    const dispatch = useDispatch();\n    const aTokensData = useSelector(getATokensData);\n    const tokensPrice = useSelector(getTokensPrice);\n    const tokenBalances = props.tokensBalance;\n    const ethBalance = props.ethBalance;\n    const ethTotalBalance = props.totalEthBalance;\n    const wethTokenBalance = props.wethBalance;\n    const aaveLoadingState = useSelector(getAaveLoadingState);\n    const currencySelector = useSelector(getAaveCurrency);\n\n    const innerTabs = [\n        {\n            active: currencySelector === 'NATIVE',\n            onClick: () => dispatch(setAaveCurrency('NATIVE')),\n            text: 'Native',\n        },\n        {\n            active: currencySelector === 'USD',\n            onClick: () => dispatch(setAaveCurrency('USD')),\n            text: 'USD',\n        },\n    ];\n\n\n    const openLendingModal = (...rest) => {\n        const [tokenD, isEthToken, tokB, token] = rest;\n        setATokenDataState(tokenD);\n        setIsModalOpenState(true);\n        if (isEthToken) {\n            setIsEthState(true);\n            setTokenBalanceState({ ...wethTokenBalance, balance: tokB });\n        } else {\n            setIsEthState(false);\n            setTokenBalanceState(tokenBalances.find(tb => tb.token === token));\n        }\n        setIsLendingState(true);\n    };\n\n    const openUnLendingModal = (...rest) => {\n        const [tokenD, isEthToken, tokB, token] = rest;\n        setATokenDataState(tokenD);\n        if (isEthToken) {\n            setIsEthState(true);\n            setTokenBalanceState({ ...wethTokenBalance, balance: tokB });\n        } else {\n            setIsEthState(false);\n            setTokenBalanceState(tokenBalances.find(tb => tb.token === token));\n        }\n        setIsModalOpenState(true);\n        setIsLendingState(false);\n    };\n\n    const tokensRow = useMemo(() => {\n        const data = aTokensData.map(tokenD => {\n            const { token, balance } = tokenD;\n\n            const { symbol } = token;\n            const isEthToken = isWethToken(token);\n            const tokenBalance = tokenBalances.find(tb => tb.token.symbol === symbol);\n            if (isHideZeroBalance) {\n                if (isEthToken && ethTotalBalance.isEqualTo(0) && balance && balance.isEqualTo(0)) {\n                    return null;\n                }\n\n                if (tokenBalance && tokenBalance.balance.isEqualTo(0) && balance && balance.isEqualTo(0)) {\n                    return null;\n                }\n            }\n            if (isStableCoin) {\n                if (!token.isStableCoin) {\n                    return null;\n                }\n            }\n\n            const tokB = isEthToken\n                ? ethTotalBalance || new BigNumber(0)\n                : (tokenBalance && tokenBalance.balance) || new BigNumber(0);\n            let displayBalance;\n            let displayDepositBalance;\n\n            if (account && balance) {\n                const formattedLendBalance = tokenAmountInUnits(balance, token.decimals, token.displayDecimals);\n                const formattedBalance = tokenAmountInUnits(tokB, token.decimals, token.displayDecimals);\n                const tokenPrice = tokensPrice && tokensPrice.find(t => t.c_id === token.c_id);\n                if (currencySelector === 'NATIVE') {\n                    displayBalance = `${formattedBalance} ${formatTokenSymbol(symbol)}`;\n                    displayDepositBalance = `${formattedLendBalance} ${formatTokenSymbol(symbol)}`;\n                } else {\n                    displayBalance = tokenPrice\n                        ? `${tokenPrice.price_usd.multipliedBy(new BigNumber(formattedBalance)).toFixed(3)}$`\n                        : '-';\n                    displayDepositBalance = tokenPrice\n                        ? `${tokenPrice.price_usd.multipliedBy(new BigNumber(formattedLendBalance)).toFixed(3)}$`\n                        : '-';\n                }\n            } else {\n                displayBalance = '-';\n                displayDepositBalance = '-';\n            }\n\n            const apy = `${tokenD.liquidityRate\n                .dividedBy('1e27')\n                .multipliedBy(100)\n                .toFixed(5)} %`;\n\n            const tokenName = isEthToken ? 'Ethereum' : token.name;\n            const tokenSymbol = isEthToken ? 'ETH' : token.symbol.toUpperCase();\n\n            return {\n                token,\n                symbol,\n                tokenSymbol,\n                tokenName,\n                displayBalance,\n                displayDepositBalance,\n                apy,\n                balance,\n                tokB,\n                isEthToken,\n                tokenD\n            }\n\n        })\n\n        return sortedData(data, sort);\n    }, [aTokensData, sort])\n\n    const closeModal = () => {\n        setIsModalOpenState(false);\n    };\n\n\n    const handleSubmit = async (\n        amount,\n        token,\n        aToken,\n        isEth,\n        isLending,\n    ) => {\n        setIsSubmittingState(true);\n\n        try {\n            if (isLending) {\n                await dispatch(startLendingTokenSteps(amount, token, aToken, isEth, Protocol.Aave, ethBalance, wethTokenBalance, ethTotalBalance));\n            } else {\n                await dispatch(startUnLendingTokenSteps(amount, token, aToken, isEth));\n            }\n        } finally {\n            setIsSubmittingState(false);\n            closeModal();\n        }\n    };\n\n    const wethToken = getKnownTokens().getWethToken();\n    const onHideZeroBalance = () => {\n        setIsHideZeroBalance(!isHideZeroBalance);\n    };\n    const onIsStableCoin = () => {\n        setIsStableCoin(!isStableCoin);\n    };\n\n    const wethPlusEthBalance = wethTokenBalance ? wethTokenBalance.balance.plus(ethBalance) : new BigNumber(0);\n\n    const onTableChange = (type, context) => {\n        if(type === 'sort') {\n            setSort({\n                field: context.sortField,\n                order: context.sortOrder,\n            });\n        }\n    }\n\n    const columns = [\n        {\n            dataField: \"tokenName\",\n            text:t('token'),\n            formatter: (cellContent, row, rowIndex) => {\n                const currency = new Token(1, row.token.address, row.token.decimals, row.token.symbol, row.token.name);\n                return (\n                    <div key={rowIndex} className=\"d-flex flex-row-reverse flex-lg-row align-items-start align-items-lg-center py-lg-2 pr-lg-4\">\n                        <LogoContainer><CurrencyLogo currency={currency}/></LogoContainer>\n                        <div className=\"d-flex flex-column justify-content-center ml-lg-3 mr-3 mr-lg-0\">\n                            <Symbol>{row.tokenSymbol}</Symbol>\n                            <Name>{row.tokenName}</Name>\n                        </div>\n                    </div>\n                )\n            },\n            sort: true,\n        },\n        {\n            dataField: \"displayBalance\",\n            text: t('borrow.balance'),\n            formatter: (cellContent, row, rowIndex) => {\n                return (\n                    <CellText>{row.displayBalance}</CellText>\n                )\n            },\n            sort: true,\n        },\n        {\n            dataField: \"displayDepositBalance\",\n            text: t('borrow.depositBalance'),\n            formatter: (cellContent, row, rowIndex) => {\n                return (\n                    <CellText>{row.displayDepositBalance}</CellText>\n                )\n            },\n            sort: true,\n        },\n        {\n            dataField: \"apy\",\n            text: \"APY\",\n            formatter: (cellContent, row, rowIndex) => {\n                return (\n                    <CellText>{row.apy}</CellText>\n                )\n            },\n            sort: true,\n        },\n        {\n            dataField: \"actions\",\n            text: t('table.actions'),\n            formatter: (cellContent, row, rowIndex, { openLendingModal, openUnLendingModal }) => {\n                const { balance, tokB, tokenD, isEthToken, token } = row;\n                return (\n                    <div className={'d-flex align-items-stretch justify-content-center flex-column flex-lg-row align-items-lg-center justify-content-lg-start w-100'}>\n                        <StyledLink>\n                            <TradeButton\n                                onClick={openLendingModal.bind(this, tokenD, isEthToken, tokB, token)}\n                                disabled={tokB.isEqualTo(0)}\n                            >\n                                {t('deposit')}\n                            </TradeButton>\n                        </StyledLink>\n\n                        <StyledLink>\n                            <TradeButton\n                                variant={'warning'}\n                                onClick={openUnLendingModal.bind(this, tokenD, isEthToken, tokB, token)}\n                                disabled={balance && balance.isEqualTo(0)}\n                            >\n                                {t('withdraw')}\n                            </TradeButton>\n                        </StyledLink>\n                    </div>\n                )\n            },\n            isAction: true,\n            formatExtraData: {\n                openLendingModal,\n                openUnLendingModal\n            }\n        },\n\n    ]\n\n    return (\n        <div className=\"d-flex flex-column\">\n            <BootstrapTable\n                wrapperClasses=\"table-responsive d-none d-lg-block\"\n                bordered={false}\n                classes=\"table table-head-custom table-borderless table-vertical-center overflow-hidden borrow__table\"\n                bootstrap4\n                remote\n                keyField=\"id\"\n                data={tokensRow}\n                columns={columns}\n                onTableChange={onTableChange}\n            >\n            </BootstrapTable>\n            <ResponsiveTable breakpoint={'lg'} columns={columns} data={tokensRow} direction={'rtl'}/>\n\n            {isModalOpenState && aTokenDataState && (\n                <LendingModalContainer\n                    show={isModalOpenState}\n                    tokenBalance={tokenBalanceState}\n                    isSubmitting={isSubmittingState}\n                    onSubmit={handleSubmit}\n                    aToken={aTokenDataState}\n                    closeModal={closeModal}\n                    ethBalance={wethPlusEthBalance}\n                    isEth={isEthState}\n                    wethToken={wethToken}\n                    isLending={isLendingState}\n                />\n            )}\n        </div>\n    )\n}\n\nexport default withBalance(LendingBalance);\n","import {Row, Col} from 'react-bootstrap';\nimport React, {useEffect, useState} from \"react\";\nimport {BigNumber} from \"@0x/utils\";\n\nimport { Modal } from '../../../components/Modal/bootstrap'\nimport {TX_DEFAULTS_TRANSFER} from \"../../../constants\";\nimport {tokenAmountInUnits, tokenSymbolToDisplayString} from \"../../../utils/spot/tokens\";\nimport styled from \"styled-components\";\nimport BorrowInputPanel from \"../../../components/BorrowInputPanel\";\nimport {AutoColumn} from \"../../../components/Column\";\nimport {RowFixed} from \"../../../components/Row\";\nimport {TYPE} from \"../../../theme\";\nimport {toast} from \"react-hot-toast\";\nimport {useTranslation} from \"react-i18next\";\nimport useTheme from \"../../../hooks/useTheme\";\n\nconst Title = styled.h4`\n  font-size: 1.25rem;\n  font-weight: 500;\n  margin-top: 0;\n  margin-bottom: 2.25rem;\n`\n\nexport const SummaryRow = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1rem 0;\n  border-bottom: 1px solid ${({ theme }) => theme.text3};\n  font-size: 1rem;\n  font-weight: 500;\n`\n\nconst CustomTypeBlack = styled(TYPE.black)`\n  font-size: 0.75rem;\n  \n  @media (min-width: 768px) {\n    font-size: 1rem;\n  }\n`\n\nconst StyledButton = styled.button`\n  height: 56px;\n  min-height: 56px;\n  min-width: 250px;\n`\n\nconst BorrowTokenModal = props => {\n    const { tokenBalance, closeModal, ethBalance, isEth, wethToken, aToken, availableForBorrow, show, ...restProps } = props;\n    const [error, setError] = useState({\n        btnMsg: null,\n        cardMsg: null,\n    });\n    const [amount, setAmount] = useState(new BigNumber(0));\n    const { t } = useTranslation();\n\n    const theme = useTheme()\n\n    useEffect(() => {\n        if (ethBalance.isLessThan(TX_DEFAULTS_TRANSFER.gasTransferToken)) {\n            toast.error(t('errors.notEnoughGas'))\n            setError({\n                btnMsg: 'Error',\n                cardMsg: t('errors.notEnoughGas'),\n            });\n        }\n    }, [ethBalance]);\n\n    const { variableBorrowRate } = aToken;\n    const { token } = tokenBalance;\n    let coinSymbol;\n    let maxBalance = availableForBorrow;\n    let decimals;\n    let displayDecimals;\n\n    if (isEth) {\n        displayDecimals = wethToken.displayDecimals;\n        decimals = 18;\n        coinSymbol = tokenSymbolToDisplayString('ETH');\n    } else if (tokenBalance) {\n        displayDecimals = token.displayDecimals;\n        decimals = token.decimals;\n        maxBalance = availableForBorrow;\n        coinSymbol = tokenSymbolToDisplayString(token.symbol);\n    } else {\n        return null;\n    }\n\n    const btnPrefix = 'Borrow ';\n    const balanceInUnits = tokenAmountInUnits(maxBalance, decimals, displayDecimals);\n    const btnText = error && error.btnMsg ? 'Error' : btnPrefix + coinSymbol;\n    const isSubmitAllowed = amount === null || (amount && amount.isGreaterThan(maxBalance));\n    const onUpdateAmount = (newValue) => {\n        setAmount(newValue);\n    };\n    const onSetMax = () => {\n        setAmount(availableForBorrow);\n    };\n    const onSubmit = () => {\n        let token;\n        if (isEth) {\n            token = {\n                ...wethToken,\n                symbol: 'ETH',\n            };\n        } else if (tokenBalance) {\n            token = tokenBalance.token;\n        } else {\n            return null;\n        }\n\n        props.onSubmit(amount, token, aToken, isEth);\n    };\n\n    return (\n        <Modal show={show} onHide={closeModal} centered>\n            <Modal.Body style={{ padding: 30 }}>\n                <Row>\n                    <Col xs={12}>\n                        <Title>{t('borrow.title')} {coinSymbol}</Title>\n                    </Col>\n                    <Col xs={12}>\n                        <BorrowInputPanel\n                            decimals={decimals}\n                            min={0}\n                            max={maxBalance}\n                            onUserInput={onUpdateAmount}\n                            value={amount}\n                            token={token}\n                            selected={coinSymbol}\n                            showBalance={false}\n                            label={t('wantToBorrow')}\n                            placeholder={new BigNumber(1).div(new BigNumber(10).pow(displayDecimals)).toString()}\n                            valueFixedDecimals={displayDecimals}\n                        />\n                    </Col>\n                    <Col xs={12} style={{ marginBottom: 56 }}>\n                        <AutoColumn>\n                            <SummaryRow>\n                                <RowFixed>\n                                    <CustomTypeBlack fontWeight={500} color={theme.text1}>\n                                        {t('borrow.borrowRate')}\n                                    </CustomTypeBlack>\n                                </RowFixed>\n                                <RowFixed>\n                                    <CustomTypeBlack color={theme.text1} fontWeight={500}>\n                                        {variableBorrowRate\n                                            .div('1e27')\n                                            .multipliedBy(100)\n                                            .toFixed(5)}{' '}\n                                        %\n                                    </CustomTypeBlack>\n                                </RowFixed>\n                            </SummaryRow>\n                            <SummaryRow>\n                                <RowFixed>\n                                    <CustomTypeBlack fontWeight={500} color={theme.text1}>\n                                        {t('borrow.available')}\n                                    </CustomTypeBlack>\n                                </RowFixed>\n                                <RowFixed>\n                                    <CustomTypeBlack color={theme.text1} fontWeight={500}>\n                                        {balanceInUnits}\n                                    </CustomTypeBlack>\n                                </RowFixed>\n                            </SummaryRow>\n                        </AutoColumn>\n                    </Col>\n\n                    <Col xs={12} className={'d-flex align-items-stretch align-items-lg-center justify-content-center flex-column'}>\n                        <StyledButton\n                            className={`btn btn-${error && error.btnMsg ? 'danger' : \"primary\"}`}\n                            disabled={isSubmitAllowed}\n                            onClick={onSubmit}\n                        >\n                            {btnText}\n                        </StyledButton>\n                    </Col>\n                </Row>\n            </Modal.Body>\n        </Modal>\n    )\n}\n\nexport default BorrowTokenModal;\n","import { Row, Col } from 'react-bootstrap';\nimport React, {useEffect, useState} from \"react\";\nimport {BigNumber} from \"@0x/utils\";\nimport {useDispatch} from \"react-redux\";\n\nimport { Modal } from '../../../components/Modal/bootstrap'\nimport {TX_DEFAULTS_TRANSFER} from \"../../../constants\";\nimport {tokenAmountInUnits, tokenSymbolToDisplayString} from \"../../../utils/spot/tokens\";\nimport styled from \"styled-components\";\nimport {TYPE} from \"../../../theme\";\nimport BorrowInputPanel from \"../../../components/BorrowInputPanel\";\nimport {AutoColumn} from \"../../../components/Column\";\nimport {RowFixed} from \"../../../components/Row\";\nimport {toast} from \"react-hot-toast\";\nimport {useTranslation} from \"react-i18next\";\nimport useTheme from \"../../../hooks/useTheme\";\n\nconst Title = styled.h4`\n  font-size: 1.25rem;\n  font-weight: 500;\n  margin-top: 0;\n  margin-bottom: 2.25rem;\n`\n\nexport const SummaryRow = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1rem 0;\n  border-bottom: 1px solid ${({ theme }) => theme.text3};\n  font-size: 1rem;\n  font-weight: 500;\n`\n\nconst CustomTypeBlack = styled(TYPE.black)`\n  font-size: 0.75rem;\n  \n  @media (min-width: 768px) {\n    font-size: 1rem;\n  }\n`\n\nconst StyledButton = styled.button`\n  height: 56px;\n  min-height: 56px;\n  min-width: 250px;\n`\n\nconst RepayTokenModal = props => {\n    const { tokenBalance, closeModal, ethBalance, isEth, wethToken, aToken, borrowedBalance, show, ...restProps } = props;\n    const [error, setError] = useState({\n        btnMsg: null,\n        cardMsg: null,\n    });\n    const [amount, setAmount] = useState(null);\n    const [isNotEnoughBalance, setIsNotEnoughBalance] = useState(false);\n    const dispatch = useDispatch();\n    const { t } = useTranslation();\n    const theme = useTheme()\n\n    useEffect(() => {\n        if (ethBalance.isLessThan(TX_DEFAULTS_TRANSFER.gasTransferToken)) {\n            toast.error( t('errors.notEnoughGas'))\n            setError({\n                btnMsg: 'Error',\n                cardMsg: t('errors.notEnoughGas'),\n            });\n        }\n        if (isEth) {\n            setIsNotEnoughBalance(ethBalance.isLessThanOrEqualTo(borrowedBalance));\n        } else {\n            setIsNotEnoughBalance(tokenBalance.balance.isLessThanOrEqualTo(borrowedBalance));\n        }\n    }, [ethBalance, tokenBalance]);\n\n\n    let coinSymbol;\n    let maxBalance = new BigNumber(0);\n    let balance = new BigNumber(0);\n    let decimals;\n    let displayDecimals;\n    let balanceInShort;\n\n    const { token } = tokenBalance;\n    if (isEth) {\n        displayDecimals = wethToken.displayDecimals;\n        decimals = 18;\n        maxBalance = borrowedBalance || new BigNumber(0);\n        coinSymbol = tokenSymbolToDisplayString('ETH');\n        balance = ethBalance;\n        balanceInShort = maxBalance.minus(ethBalance);\n    } else if (tokenBalance) {\n        displayDecimals = token.displayDecimals;\n        decimals = token.decimals;\n        maxBalance = borrowedBalance || new BigNumber(0);\n        coinSymbol = tokenSymbolToDisplayString(token.symbol);\n        balanceInShort = maxBalance.minus(tokenBalance.balance);\n        balance = tokenBalance.balance;\n    } else {\n        return null;\n    }\n\n\n    const btnPrefix = 'Repay ';\n    const balanceBorrowedInUnits = tokenAmountInUnits(maxBalance, decimals, displayDecimals);\n    const balanceInUnits = tokenAmountInUnits(balance, decimals, displayDecimals);\n    const displayBalanceInShort = tokenAmountInUnits(balanceInShort, decimals, displayDecimals + 1);\n    const btnText = error && error.btnMsg ? 'Error' : btnPrefix + coinSymbol;\n    const isSubmitAllowed =\n        amount === null || (amount && amount.isGreaterThan(maxBalance)) || (amount && amount.isEqualTo(0));\n    const onUpdateAmount = (newValue) => {\n        setAmount(newValue);\n    };\n    const onSetMax = () => {\n        if (isEth) {\n            const bal = ethBalance.isLessThanOrEqualTo(maxBalance) ? ethBalance : maxBalance;\n            setAmount(bal);\n        } else if (tokenBalance) {\n            const bal = tokenBalance.balance.isLessThanOrEqualTo(maxBalance) ? tokenBalance.balance : maxBalance;\n            setAmount(bal);\n        }\n    };\n\n    const onSubmit = () => {\n        let token;\n        if (isEth) {\n            token = {\n                ...wethToken,\n                symbol: 'ETH',\n            };\n        } else if (tokenBalance) {\n            token = tokenBalance.token;\n        } else {\n            return null;\n        }\n        const amountSubmit = amount || new BigNumber(0);\n        props.onSubmit(amountSubmit, token, aToken, isEth);\n    };\n\n    return (\n        <Modal show={show} onHide={closeModal} centered>\n            <Modal.Body style={{ padding: 30 }}>\n                <Row>\n                    <Col xs={12}>\n                        <Title>{t('repay')} {coinSymbol}</Title>\n                    </Col>\n                    <Col xs={12}>\n                        <BorrowInputPanel\n                            decimals={decimals}\n                            min={0}\n                            max={maxBalance}\n                            onUserInput={onUpdateAmount}\n                            value={amount}\n                            token={token}\n                            selected={coinSymbol}\n                            showBalance={false}\n                            label={t('wantToRepay')}\n                            placeholder={new BigNumber(1).div(new BigNumber(10).pow(displayDecimals)).toString()}\n                            valueFixedDecimals={displayDecimals}\n                        />\n                    </Col>\n\n                    <Col xs={12} style={{ marginBottom: 56 }}>\n                        <AutoColumn>\n                            <SummaryRow>\n                                <RowFixed>\n                                    <CustomTypeBlack fontWeight={500} color={theme.text1}>\n                                        {t('borrow.amountBorrowed')}\n                                    </CustomTypeBlack>\n                                </RowFixed>\n                                <RowFixed>\n                                    <CustomTypeBlack color={theme.text1} fontWeight={500}>\n                                        {balanceBorrowedInUnits}\n                                    </CustomTypeBlack>\n                                </RowFixed>\n                            </SummaryRow>\n                            <SummaryRow>\n                                <RowFixed>\n                                    <CustomTypeBlack fontWeight={500} color={theme.text1}>\n                                        {t('borrow.amountAvailable')}\n                                    </CustomTypeBlack>\n                                </RowFixed>\n                                <RowFixed>\n                                    <CustomTypeBlack color={theme.text1} fontWeight={500}>\n                                        {balanceInUnits}\n                                    </CustomTypeBlack>\n                                </RowFixed>\n                            </SummaryRow>\n                        </AutoColumn>\n                    </Col>\n\n                    <Col xs={12} className={'d-flex align-items-stretch align-items-lg-center justify-content-center flex-column'}>\n                        <StyledButton\n                            className={`btn btn-${error && error.btnMsg ? 'danger' : \"primary\"}`}\n                            disabled={isSubmitAllowed}\n                            onClick={onSubmit}\n                        >\n                            {btnText}\n                        </StyledButton>\n                    </Col>\n                </Row>\n            </Modal.Body>\n        </Modal>\n    )\n}\n\nexport default RepayTokenModal;\n","import React, {useMemo, useState} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport { BigNumber } from \"@0x/utils\";\nimport styled from \"styled-components\";\n\nimport {\n    getAaveCurrency,\n    getAaveLoadingState,\n    getAaveReservesGQLResponse, getAaveUserAccountData,\n    getATokensData,\n    getTokensPrice\n} from \"../../../state/selectors\";\nimport withBalance from \"../../../components/hoc/withBalance\";\nimport {useActiveWeb3React} from \"../../../hooks\";\nimport {setAaveCurrency} from \"../../../state/aave/actions\";\nimport {getKnownTokens, isWethToken} from \"../../../utils/known_tokens\";\nimport {formatTokenSymbol, tokenAmountInUnits} from \"../../../utils/spot/tokens\";\nimport {Protocol} from \"../../../utils/aave/types\";\nimport {\n    startBorrowTokenSteps,\n    startLendingTokenSteps,\n    startRepayTokenSteps,\n    startUnLendingTokenSteps\n} from \"../../../state/spotUI/actions\";\nimport CurrencyLogo from \"../../../components/CurrencyLogo\";\nimport Skeleton from \"react-loading-skeleton\";\nimport {StyledLink, TradeButton} from \"../../Wallet\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport ResponsiveTable from \"../../../components/ResponsiveTable\";\nimport BorrowTokenModal from \"./BorrowTokenModal\";\nimport RepayTokenModal from \"./RepayTokenModal\";\nimport {Token} from \"@uniswap/sdk\";\nimport {sortedData} from \"../../../lib/helper\";\nimport {useTranslation} from \"react-i18next\";\n\n\nconst LogoContainer = styled.div`\n  width: 32px;\n  height: 32px;\n  border-radius: 32px;\n  background-color: ${({ theme }) => theme.text1};\n  \n  @media (max-width: 991px) {\n    width: 24px;\n    height: 24px;\n    border-radius: 24px;\n  }\n`\n\nconst Symbol = styled.span`\n  color: ${({ theme }) => theme.text1};\n  font-size: 1rem;\n  margin-right: 10px;\n  font-weight: 500;\n`\n\n\nconst Name = styled.span`\n  font-weight: 400;\n  font-size: 0.875rem;\n  color: ${({ theme }) => theme.text1};\n  \n  @media (max-width: 991px) {\n    font-size: 0.875rem;\n    font-weight: 400;\n  }\n`\n\nconst CellText = styled.span`\n  font-weight: 500;\n  font-size: .875rem;\n  color: ${({ theme }) => theme.text1};\n  \n  &.font-size-base {\n    font-size: 1rem;\n  }\n  \n  @media (max-width: 991px) {\n    font-weight: 700;\n    \n    &.label {\n    font-weight: 500;\n    }\n  }\n`\n\nconst BorrowBalance = props => {\n    const [isEthState, setIsEthState] = useState(false);\n    const [isHideZeroBalance, setIsHideZeroBalance] = useState(false);\n    const [isStableCoin, setIsStableCoin] = useState(false);\n    const { t } = useTranslation()\n    const [isModalBorrowOpenState, setIsModalBorrowOpenState] = useState(false);\n    const [isModalRepayOpenState, setIsModalRepayOpenState] = useState(false);\n    const [isSubmittingState, setIsSubmittingState] = useState(false);\n    const [aTokenDataState, setATokenDataState] = useState();\n    const [isBorrowState, setIsBorrowState] = useState(true);\n    const [tokenBalanceState, setTokenBalanceState] = useState();\n    const [availableForBorrowState, setAvailableForBorrowState] = useState(new BigNumber(0));\n    const [borrowBalanceState, setBorrowBalanceState] = useState(new BigNumber(0));\n    const [sort, setSort] = useState({\n        field: false,\n        order: 'desc',\n    });\n\n    const { account } = useActiveWeb3React();\n    const reserves = useSelector(getAaveReservesGQLResponse);\n    const userAccountData = useSelector(getAaveUserAccountData);\n    const dispatch = useDispatch();\n    const aTokensData = useSelector(getATokensData);\n    const tokensPrice = useSelector(getTokensPrice);\n    const tokenBalances = props.tokensBalance;\n    const ethBalance = props.ethBalance;\n    const ethTotalBalance = props.totalEthBalance;\n    const wethTokenBalance = props.wethBalance;\n    const aaveLoadingState = useSelector(getAaveLoadingState);\n    const currencySelector = useSelector(getAaveCurrency);\n\n    const innerTabs = [\n        {\n            active: currencySelector === 'NATIVE',\n            onClick: () => dispatch(setAaveCurrency('NATIVE')),\n            text: 'Native',\n        },\n        {\n            active: currencySelector === 'USD',\n            onClick: () => dispatch(setAaveCurrency('USD')),\n            text: 'USD',\n        },\n    ];\n\n    const openBorrowModal = (...rest) => {\n        const [tokenD, isEthToken, tokB, token, availableBalanceForBorrowToken] = rest;\n        setATokenDataState(tokenD);\n        setIsModalBorrowOpenState(true);\n        if (isEthToken) {\n            setIsEthState(true);\n            setTokenBalanceState({ ...wethTokenBalance, balance: tokB });\n        } else {\n            setIsEthState(false);\n            setTokenBalanceState(tokenBalances.find(tb => tb.token === token));\n        }\n        setAvailableForBorrowState(availableBalanceForBorrowToken);\n        setIsBorrowState(true);\n    };\n\n    const openRepayModal = (...rest) => {\n        const [tokenD, isEthToken, tokB, token, borrowBalance] = rest;\n        setATokenDataState(tokenD);\n        if (isEthToken) {\n            setIsEthState(true);\n            setTokenBalanceState({ ...wethTokenBalance, balance: tokB });\n        } else {\n            setIsEthState(false);\n            setTokenBalanceState(tokenBalances.find(tb => tb.token === token));\n        }\n        setBorrowBalanceState(borrowBalance || new BigNumber(0));\n        setIsModalRepayOpenState(true);\n        setIsBorrowState(false);\n    };\n\n    const tokensRow = useMemo(() => {\n        const data = aTokensData.map(tokenD => {\n            const { token, balance, borrowBalance } = tokenD;\n\n            const { symbol } = token;\n            const reserve = reserves.find(r => r.aToken.id === tokenD.address);\n            const isEthToken = isWethToken(token);\n            const tokenBalance = tokenBalances.find(tb => tb.token.symbol === symbol);\n            if (isHideZeroBalance) {\n                /* if ((isEthToken && ethTotalBalance.isEqualTo(0)) && (balance && balance.isEqualTo(0))) {\n                     return null;\n                 }*/\n\n                if (borrowBalance && borrowBalance.isEqualTo(0)) {\n                    return null;\n                }\n            }\n            if (isStableCoin) {\n                if (!token.isStableCoin) {\n                    return null;\n                }\n            }\n\n            const tokB = isEthToken\n                ? ethTotalBalance || new BigNumber(0)\n                : (tokenBalance && tokenBalance.balance) || new BigNumber(0);\n            let displayAvailableForBorrowBalance;\n            let displayBorrowedBalance;\n            let availableForBorrow = new BigNumber(0);\n            let availableBalanceForBorrowToken = new BigNumber(0);\n\n            if (account && borrowBalance && reserve && userAccountData) {\n                const priceInEth = reserve.price.priceInEth;\n                const totalAvailableForBorrowETH = userAccountData.availableBorrowsETH;\n                availableForBorrow = userAccountData.availableBorrowsETH;\n                availableBalanceForBorrowToken = totalAvailableForBorrowETH\n                    .dividedBy(new BigNumber(priceInEth).div(new BigNumber(10).pow(token.decimals)))\n                    .integerValue(BigNumber.ROUND_DOWN);\n                const formattedBorrowedBalance = tokenAmountInUnits(\n                    borrowBalance,\n                    token.decimals,\n                    token.displayDecimals,\n                );\n                const formattedAvailableForBorrowBalance = tokenAmountInUnits(\n                    availableBalanceForBorrowToken,\n                    token.decimals,\n                    token.displayDecimals,\n                );\n                const tokenPrice = tokensPrice && tokensPrice.find(t => t.c_id === token.c_id);\n                if (currencySelector === 'NATIVE') {\n                    displayAvailableForBorrowBalance = `${formattedAvailableForBorrowBalance} ${formatTokenSymbol(\n                        symbol,\n                    )}`;\n                    displayBorrowedBalance = `${formattedBorrowedBalance} ${formatTokenSymbol(symbol)}`;\n                } else {\n                    displayAvailableForBorrowBalance = tokenPrice\n                        ? `${tokenPrice.price_usd\n                            .multipliedBy(new BigNumber(formattedAvailableForBorrowBalance))\n                            .toFixed(3)}$`\n                        : '-';\n                    displayBorrowedBalance = tokenPrice\n                        ? `${tokenPrice.price_usd.multipliedBy(new BigNumber(formattedBorrowedBalance)).toFixed(3)}$`\n                        : '-';\n                }\n            } else {\n                displayAvailableForBorrowBalance = '-';\n                displayBorrowedBalance = '-';\n            }\n\n            const apy = `${tokenD.variableBorrowRate\n                .dividedBy('1e27')\n                .multipliedBy(100)\n                .toFixed(5)} %`;\n\n            const tokenName = isEthToken ? 'Ethereum' : token.name;\n            const tokenSymbol = isEthToken ? 'ETH' : token.symbol.toUpperCase();\n\n            return {\n                token,\n                symbol,\n                tokenSymbol,\n                tokenName,\n                displayAvailableForBorrowBalance,\n                availableBalanceForBorrowToken,\n                displayBorrowedBalance,\n                availableForBorrow,\n                borrowBalance,\n                apy,\n                balance,\n                tokB,\n                isEthToken,\n                tokenD\n            }\n\n        })\n\n        return sortedData(data, sort)\n    }, [aTokensData, sort])\n\n    const closeBorrowModal = () => {\n        setIsModalBorrowOpenState(false);\n    };\n    const closeRepayModal = () => {\n        setIsModalRepayOpenState(false);\n    };\n\n\n    const handleSubmit = async (amount, token, aToken, isEth) => {\n        setIsSubmittingState(true);\n\n        try {\n            if (isBorrowState) {\n                await dispatch(startBorrowTokenSteps(amount, token, aToken, isEth, Protocol.Aave, ethBalance, wethTokenBalance, ethTotalBalance));\n            } else {\n                await dispatch(startRepayTokenSteps(amount, token, aToken, isEth, Protocol.Aave, ethBalance, wethTokenBalance, ethTotalBalance));\n            }\n        } finally {\n            setIsSubmittingState(false);\n            if (isBorrowState) {\n                closeBorrowModal();\n            } else {\n                closeRepayModal();\n            }\n        }\n    };\n    const wethToken = getKnownTokens().getWethToken();\n    const onHideZeroBalance = () => {\n        setIsHideZeroBalance(!isHideZeroBalance);\n    };\n    const onIsStableCoin = () => {\n        setIsStableCoin(!isStableCoin);\n    };\n\n    const wethPlusEthBalance = wethTokenBalance ? wethTokenBalance.balance.plus(ethBalance) : new BigNumber(0);\n\n\n    const onTableChange = (type, context) => {\n        if(type === 'sort') {\n            setSort({\n                field: context.sortField,\n                order: context.sortOrder,\n            });\n        }\n    }\n\n    const columns = [\n        {\n            dataField: \"tokenName\",\n            text: t('token'),\n            formatter: (cellContent, row, rowIndex) => {\n                const currency = new Token(1, row.token.address, row.token.decimals, row.token.symbol, row.token.name);\n                return (\n                    <div key={rowIndex} className=\"d-flex flex-row-reverse flex-lg-row align-items-start align-items-lg-center py-lg-2 pr-lg-4\">\n                        <LogoContainer><CurrencyLogo currency={currency}/></LogoContainer>\n                        <div className=\"d-flex flex-column justify-content-center ml-lg-3 mr-3 mr-lg-0\">\n                            <Symbol className={'font-weight-bold'}>{row.tokenSymbol}</Symbol>\n                            <Name className={'font-weight-bold'}>{row.tokenName}</Name>\n                        </div>\n                    </div>\n                )\n            },\n            sort: true,\n        },\n        {\n            dataField: \"displayAvailableForBorrowBalance\",\n            text: t('borrow.available'),\n            formatter: (cellContent, row, rowIndex) => {\n                return (\n                    <CellText>{row.displayAvailableForBorrowBalance}</CellText>\n                )\n            },\n            sort: true,\n        },\n        {\n            dataField: \"displayBorrowedBalance\",\n            text: t('borrow.borrowBalance'),\n            formatter: (cellContent, row, rowIndex) => {\n                return (\n                    <CellText>{row.displayBorrowedBalance}</CellText>\n                )\n            },\n            sort: true,\n        },\n        {\n            dataField: \"apy\",\n            text: t('borrow.borrowRate'),\n            formatter: (cellContent, row, rowIndex) => {\n                return (\n                    <CellText>{row.apy}</CellText>\n                )\n            },\n            sort: true,\n        },\n        {\n            dataField: \"actions\",\n            text: t('table.actions'),\n            formatter: (cellContent, row, rowIndex, { openBorrowModal, openRepayModal }) => {\n                const { tokB, tokenD, isEthToken, token, borrowBalance, availableBalanceForBorrowToken, availableForBorrow } = row;\n                return (\n                    <div className={'d-flex align-items-stretch justify-content-center flex-column flex-lg-row align-items-lg-center justify-content-lg-start w-100'}>\n                        <StyledLink>\n                            <TradeButton\n                                onClick={openBorrowModal.bind(this, tokenD, isEthToken, tokB, token, availableBalanceForBorrowToken)}\n                                disabled={availableForBorrow.isEqualTo(0) || !account}\n                            >\n                                {t('borrow.title')}\n                            </TradeButton>\n                        </StyledLink>\n\n                        <StyledLink>\n                            <TradeButton\n                                variant={'warning'}\n                                onClick={openRepayModal.bind(this, tokenD, isEthToken, tokB, token, borrowBalance)}\n                                disabled={(borrowBalance && borrowBalance.isEqualTo(0)) || !account}\n                            >\n                                {t('repay')}\n                            </TradeButton>\n                        </StyledLink>\n                    </div>\n                )\n            },\n            isAction: true,\n            formatExtraData: {\n                openBorrowModal,\n                openRepayModal\n            }\n        },\n\n    ]\n\n    const modals = (\n        <>\n            {isModalBorrowOpenState && aTokenDataState && (\n                <BorrowTokenModal\n                    show={isModalBorrowOpenState}\n                    tokenBalance={tokenBalanceState}\n                    isSubmitting={isSubmittingState}\n                    availableForBorrow={availableForBorrowState}\n                    onSubmit={handleSubmit}\n                    aToken={aTokenDataState}\n                    closeModal={closeBorrowModal}\n                    ethBalance={wethPlusEthBalance}\n                    isEth={isEthState}\n                    wethToken={wethToken}\n                />\n            )}\n            {isModalRepayOpenState && aTokenDataState && (\n                <RepayTokenModal\n                    show={isModalRepayOpenState}\n                    tokenBalance={tokenBalanceState}\n                    isSubmitting={isSubmittingState}\n                    onSubmit={handleSubmit}\n                    borrowedBalance={borrowBalanceState}\n                    aToken={aTokenDataState}\n                    closeModal={closeRepayModal}\n                    ethBalance={wethPlusEthBalance}\n                    isEth={isEthState}\n                    wethToken={wethToken}\n                />\n            )}\n        </>\n    );\n\n    return (\n        <div className=\"d-flex flex-column\">\n\n            <BootstrapTable\n                wrapperClasses=\"table-responsive d-none d-lg-block\"\n                bordered={false}\n                classes=\"table table-head-custom table-borderless table-vertical-center overflow-hidden borrow__table\"\n                bootstrap4\n                remote\n                keyField=\"id\"\n                data={tokensRow}\n                columns={columns}\n                onTableChange={onTableChange}\n            >\n            </BootstrapTable>\n            <ResponsiveTable breakpoint={'lg'} columns={columns} data={tokensRow} direction={'rtl'}/>\n\n            {modals}\n        </div>\n    )\n}\n\nexport default withBalance(BorrowBalance);\n","import {Col, Nav, Row, Tab} from 'react-bootstrap';\nimport styled from \"styled-components\";\n\nimport {ResponsiveCard} from '../../../components/Card';\nimport React, {useEffect} from \"react\";\nimport {GET_AAVE_RESERVES} from \"../../../services/aave/gql\";\nimport {useQuery} from \"@apollo/client\";\nimport {getAaveGraphClient} from \"../../../services/aave/aave\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {useActiveWeb3React} from \"../../../hooks\";\nimport {getAaveLoadingState} from \"../../../state/selectors\";\nimport {fetchAave, initAave, setAaveReservesGQLResponse} from \"../../../state/aave/actions\";\nimport {AaveLoadingState} from \"../../../utils/aave/types\";\nimport useInterval from \"../../../hooks/useInterval\";\nimport LendingBalance from \"../LendingBalance\";\nimport BorrowBalance from \"../BorrowBalance\";\nimport {useTranslation} from \"react-i18next\";\n\n\nconst HeaderCol = styled(Col)`\n  margin: -10px 0 20px;\n  \n  @media (min-width: 768px) {\n    margin-bottom: 25px;\n  }\n`\n\nconst CustomNav = styled(Nav)`\n  margin-left: -30px !important;\n  margin-right: -30px !important;\n  overflow: auto;\n  \n  @media (min-width: 768px) {\n    margin-left: -10px !important;\n    margin-right: -10px !important;\n  }\n`\n\nconst CustomNavItem = styled(Nav.Item)`\n  flex-grow: initial !important;\n  \n  padding: 0 10px 10px;\n  \n  \n    @media (max-width: 767px) {\n      padding: 0 5px 10px;\n    }\n  \n  &:first-child {\n    @media (max-width: 767px) {\n      padding-left: 30px;\n    }\n  }\n  &:last-child {\n    @media (max-width: 767px) {\n      padding-right: 30px;\n    }\n  }\n`\nconst CustomNavLink = styled(Nav.Link)`\n  border-radius: 18px !important;\n  color: ${({ theme }) => theme.primary};\n  background-color: rgba(135, 220, 225, 0.15);\n  white-space: nowrap;\n  padding: 14px 24px;\n  min-height: 56px;\n  font-weight: 500;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  \n  \n    @media (max-width: 767px) {\n      padding: 6px 15px;\n      font-size: 1rem;\n      min-height: 32px;\n      border-radius: 12px !important;\n    }\n  \n  &:hover {\n    color: ${({ theme }) => theme.primary};\n  }\n  \n  &.active {\n    color: ${({ theme }) => theme.text1};\n    background-color: ${({ theme }) => theme.primary};\n  }\n`\n\nconst BorrowCommon = props => {\n    const { account } = useActiveWeb3React();\n    const { loading, error, data } = useQuery(GET_AAVE_RESERVES, {\n        client: getAaveGraphClient(),\n        pollInterval: 1000,\n    });\n    const dispatch = useDispatch();\n    const aaveLoadingState = useSelector(getAaveLoadingState);\n    const { t } = useTranslation()\n\n\n    useEffect(() => {\n        if (!loading && !error && data) {\n            dispatch(setAaveReservesGQLResponse(data.reserves));\n            if (aaveLoadingState === AaveLoadingState.NotLoaded) {\n                dispatch(initAave(account));\n            } else {\n                dispatch(fetchAave(account));\n            }\n        }\n    }, [loading, data, account]);\n\n    // Update Aaave state each 60 seconds\n    useInterval(async () => {\n        if (account && data && !loading && !error) {\n            dispatch(fetchAave(account));\n        }\n    }, 60 * 1000);\n\n    return (\n        <ResponsiveCard>\n            <Tab.Container defaultActiveKey=\"deposit\">\n                <Row>\n                    <HeaderCol xs={12} className={'d-flex flex-column-reverse flex-lg-row align-items-stretch align-items-lg-start justify-content-start justify-content-lg-between'}>\n                        <CustomNav fill variant=\"pills\" className={'d-flex flex-row align-items-center flex-nowrap'}>\n                            <CustomNavItem>\n                                <CustomNavLink eventKey=\"deposit\">{t('deposit')}</CustomNavLink>\n                            </CustomNavItem>\n                            <CustomNavItem>\n                                <CustomNavLink eventKey=\"borrow\">{t('borrow.title')}</CustomNavLink>\n                            </CustomNavItem>\n                        </CustomNav>\n                    </HeaderCol>\n\n                    <Col xs={12}>\n                        <Tab.Content className={'bg-transparent'}>\n                            <Tab.Pane eventKey=\"deposit\">\n                                <LendingBalance/>\n                            </Tab.Pane>\n                            <Tab.Pane eventKey=\"borrow\">\n                                <BorrowBalance/>\n                            </Tab.Pane>\n                        </Tab.Content>\n                    </Col>\n                </Row>\n            </Tab.Container>\n        </ResponsiveCard>\n    )\n}\n\nexport default BorrowCommon;\n","import { Modal } from '../../../components/Modal/bootstrap';\nimport {useDispatch, useSelector} from \"react-redux\";\nimport Web3 from \"web3\";\nimport {Web3Wrapper} from \"@0x/web3-wrapper\";\n\nimport {getStepsModalCurrentStep} from \"../../../state/selectors\";\nimport {setStepsModalCurrentStep} from \"../../../state/spotUI/actions\";\nimport {CHAIN_ID, StepKind} from \"../../../constants\";\n\nimport UnlockToken from \"./modals/UnlockToken\";\nimport React, {useEffect, useState} from \"react\";\nimport {TransactionSubmittedContent} from \"../../../components/TransactionConfirmationModal\";\nimport WrapEth from \"./modals/WrapEth\";\nimport LendingToken from \"./modals/LendingToken\";\nimport BorrowToken from \"./modals/BorrowToken\";\n\nlet web3;\nlet web3Wrapper;\n\nconst ModalProvider = props => {\n    const [submitted, setSubmitted] = useState(false);\n    const [txHash, setTxHash] = useState(null)\n    const currentStep = useSelector(getStepsModalCurrentStep);\n    const dispatch = useDispatch();\n    const isOpen = currentStep !== null;\n\n    useEffect(() => {\n        web3 = new Web3(Web3.givenProvider || Web3.providers.HttpProvider(process.env.REACT_APP_NETWORK_URL));\n        if(web3.currentProvider) {\n            web3Wrapper = new Web3Wrapper(web3.currentProvider);\n        }\n    }, [])\n\n    const hideModal = () => {\n        setSubmitted(false);\n        setTxHash(null);\n        dispatch(setStepsModalCurrentStep(null))\n    }\n\n    const onDone = (tx) => {\n        setSubmitted(true);\n        setTxHash(tx);\n    }\n\n    return (\n        <>\n            {props.children}\n            <Modal show={isOpen} centered onHide={hideModal}>\n                <Modal.Body className={'px-0 py-0'}>\n                    {!submitted ? (\n                        <>\n                            {currentStep && currentStep.kind === StepKind.ToggleTokenLock && (\n                                (<UnlockToken onDismiss={hideModal} web3={web3Wrapper}/>)\n                            )}\n                            {currentStep && currentStep.kind === StepKind.WrapEth && (\n                                (<WrapEth onDismiss={hideModal} web3={web3Wrapper}/>)\n                            )}\n                            {currentStep && currentStep.kind === StepKind.LendingToken && (\n                                (<LendingToken onDismiss={hideModal} onDone={onDone} web3={web3Wrapper}/>)\n                            )}\n                            {currentStep && currentStep.kind === StepKind.UnLendingToken && (\n                                (<LendingToken onDismiss={hideModal} onDone={onDone} web3={web3Wrapper}/>)\n                            )}\n                            {currentStep && currentStep.kind === StepKind.RepayToken && (\n                                (<BorrowToken onDismiss={hideModal} onDone={onDone} web3={web3Wrapper}/>)\n                            )}\n                            {currentStep && currentStep.kind === StepKind.BorrowToken && (\n                                (<BorrowToken onDismiss={hideModal} onDone={onDone} web3={web3Wrapper}/>)\n                            )}\n                        </>\n                    ) : (\n                        <TransactionSubmittedContent chainId={CHAIN_ID} hash={txHash} onDismiss={hideModal}/>\n                    )}\n                </Modal.Body>\n            </Modal>\n        </>\n\n    )\n}\n\nexport default ModalProvider;\n","import {ConfirmationPendingContent} from \"../../../../components/TransactionConfirmationModal\";\nimport React, {useEffect, useState} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\n\nimport {getStepsModalCurrentStep} from \"../../../../state/selectors\";\nimport {UNLIMITED_ALLOWANCE_IN_BASE_UNITS} from \"../../../../constants\";\nimport {useActiveWeb3React} from \"../../../../hooks\";\nimport {getContractWrappers} from \"../../../../utils/spot/contractWrapper\";\nimport {ERC20TokenContract} from \"@0x/contract-wrappers\";\nimport {stepsModalAdvanceStep, updateWethBalance} from \"../../../../state/spotUI/actions\";\nimport withBalance from \"../../../../components/hoc/withBalance\";\nimport {\n    INSUFFICIENT_ETH_BALANCE_FOR_DEPOSIT,\n    UNEXPECTED_ERROR,\n    USER_DENIED_TRANSACTION_SIGNATURE_ERR\n} from \"../../../../lib/exceptions/common\";\nimport {tokenAmountInUnits} from \"../../../../utils/spot/tokens\";\nimport {ConvertBalanceMustNotBeEqualException} from \"../../../../lib/exceptions/convertBalance\";\n\nconst WrapEth = props => {\n    const [wrapping, setWrapping] = useState(false);\n    const { account } = useActiveWeb3React();\n    const currentStep = useSelector(getStepsModalCurrentStep);\n    const { wethBalance } = props;\n    const { currentWethBalance, newWethBalance } = currentStep;\n    const web3 = props.web3;\n    const dispatch = useDispatch();\n\n    const amount = newWethBalance.minus(currentWethBalance);\n    const isEthToWeth = amount.isGreaterThan(0);\n    const convertingFrom = isEthToWeth ? 'ETH' : 'wETH';\n\n\n    const wrapEthereum = async () => {\n        try {\n\n            const convertTxHash = await dispatch(updateWethBalance(wethBalance, newWethBalance, account, web3.getProvider()));\n            setWrapping(true);\n            const tx = await web3.awaitTransactionSuccessAsync(convertTxHash);\n\n            if(tx) {\n                setWrapping(false)\n                dispatch(stepsModalAdvanceStep());\n            }\n\n        } catch(err) {\n            setWrapping(false)\n            props.onDismiss();\n        }\n    }\n\n    useEffect(() => {\n        wrapEthereum();\n    }, [currentStep])\n\n    return (\n        <ConfirmationPendingContent onDismiss={wrapping ? () => null : props.onDismiss} pendingText={wrapping ? 'Wrapping...' : `Convert ${convertingFrom}`} />\n    )\n}\n\nexport default withBalance(WrapEth);\n","import {ConfirmationPendingContent} from \"../../../../components/TransactionConfirmationModal\";\nimport React, {useEffect, useState} from \"react\";\nimport { connect  } from \"react-redux\";\n\nimport {useActiveWeb3React} from \"../../../../hooks\";\nimport {tokenAmountInUnits, tokenSymbolToDisplayString} from \"../../../../utils/spot/tokens\";\nimport {getGasInfo, getStepsModalCurrentStep} from \"../../../../state/selectors\";\nimport {lendingDefiToken, unLendingDefiToken} from \"../../../../state/defi/actions\";\n\nconst LendingToken = props => {\n    const [loading, setLoading] = useState(false);\n    const { account } = useActiveWeb3React();\n\n    const { step, onSubmitLendingToken, onSubmitUnLendingToken } = props;\n    const { amount, token, isEth, defiToken, isLending } = step;\n\n    const coinSymbol = isEth ? tokenSymbolToDisplayString('ETH') : tokenSymbolToDisplayString(token.symbol);\n    const decimals = isEth ? 18 : step.token.decimals;\n    const amountOfTokenString = `${tokenAmountInUnits(\n        step.amount,\n        decimals,\n        step.token.displayDecimals,\n    ).toString()} ${coinSymbol}`;\n\n    const web3 = props.web3;\n\n    const Lending = async () => {\n        try {\n\n            const txHash = isLending\n                ? await onSubmitLendingToken(token, defiToken, amount, isEth, account)\n                : await onSubmitUnLendingToken(token, defiToken, amount, isEth, account);\n            setLoading(true);\n            const tx = await web3.awaitTransactionSuccessAsync(txHash);\n            if(tx) {\n                setLoading(false)\n                props.onDone(txHash)\n            }\n\n        } catch(err) {\n            setLoading(false)\n            props.onDismiss();\n        }\n    }\n\n    useEffect(() => {\n        Lending();\n    }, [step])\n\n    return (\n        <ConfirmationPendingContent onDismiss={loading ? () => null : props.onDismiss} pendingText={loading ? `Pending Transaction...` : `Confirm on ${account} to ${isLending ? 'deposit' : 'withdraw'} ${amountOfTokenString}.`} />\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        step: getStepsModalCurrentStep(state),\n        gasInfo: getGasInfo(state)\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onSubmitLendingToken: (token, defiToken, amount, isEth, account) =>\n            dispatch(lendingDefiToken(token, defiToken, amount, isEth, account)),\n        onSubmitUnLendingToken: (token, defiToken, amount, isEth, account) =>\n            dispatch(unLendingDefiToken(token, defiToken, amount, isEth, account)),\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LendingToken);\n","import { getUpdateAToken } from '../../services/aave/aave';\nimport { Protocol } from '../../utils/aave/types';\nimport { borrowAToken, lendingAToken, repayAToken, setATokenBalance, unLendingAToken } from '../aave/actions';\nimport { getDefiProtocol } from '../selectors';\n\nexport const lendingDefiToken = (\n    token,\n    defiToken,\n    amount,\n    isEth,\n    account,\n) => {\n    return async (dispatch, getState) => {\n        const state = getState();\n        const protocol = getDefiProtocol(state);\n        switch (protocol) {\n            case Protocol.Aave:\n                const txHash = dispatch(lendingAToken(token, defiToken, amount, isEth, account));\n                return txHash;\n            default:\n                break;\n        }\n    };\n};\n\nexport const borrowDefiToken = (\n    token,\n    defiToken,\n    amount,\n    isEth,\n    account,\n) => {\n    return async (dispatch, getState) => {\n        const state = getState();\n        const protocol = getDefiProtocol(state);\n        switch (protocol) {\n            case Protocol.Aave:\n                const txHash = dispatch(borrowAToken(token, defiToken, amount, isEth, account));\n                return txHash;\n            default:\n                break;\n        }\n    };\n};\n\nexport const repayDefiToken = (\n    token,\n    defiToken,\n    amount,\n    isEth,\n    account\n) => {\n    return async (dispatch, getState) => {\n        const state = getState();\n        const protocol = getDefiProtocol(state);\n        switch (protocol) {\n            case Protocol.Aave:\n                const txHash = dispatch(repayAToken(token, defiToken, amount, isEth, account));\n                return txHash;\n            default:\n                break;\n        }\n    };\n};\n\nexport const unLendingDefiToken = (\n    token,\n    defiToken,\n    amount,\n    isEth,\n    account\n) => {\n    return async (dispatch, getState) => {\n        const state = getState();\n        const protocol = getDefiProtocol(state);\n        switch (protocol) {\n            case Protocol.Aave:\n                const txHash = dispatch(unLendingAToken(token, defiToken, amount, isEth, account));\n                return txHash;\n            default:\n                break;\n        }\n    };\n};\n\nexport const updateDefiTokenBalance = (defiToken, ethAccount) => {\n    return async (dispatch, getState) => {\n        const state = getState();\n        const protocol = getDefiProtocol(state);\n        switch (protocol) {\n            case Protocol.Aave:\n                const token = await getUpdateAToken(ethAccount, defiToken);\n                dispatch(setATokenBalance(token));\n                break;\n\n            default:\n                break;\n        }\n    };\n};\n","import {ConfirmationPendingContent} from \"../../../../components/TransactionConfirmationModal\";\nimport React, {useEffect, useState} from \"react\";\nimport { connect  } from \"react-redux\";\n\nimport {useActiveWeb3React} from \"../../../../hooks\";\nimport {tokenAmountInUnits, tokenSymbolToDisplayString} from \"../../../../utils/spot/tokens\";\nimport {getGasInfo, getStepsModalCurrentStep} from \"../../../../state/selectors\";\nimport {borrowDefiToken, lendingDefiToken, repayDefiToken, unLendingDefiToken} from \"../../../../state/defi/actions\";\n\nconst LendingToken = props => {\n    const [loading, setLoading] = useState(false);\n    const { account } = useActiveWeb3React();\n\n    const { step, onSubmitBorrowToken, onSubmitRepayToken } = props;\n    const { amount, token, isEth, defiToken, isBorrow } = step;\n\n    const coinSymbol = isEth ? tokenSymbolToDisplayString('ETH') : tokenSymbolToDisplayString(token.symbol);\n    const decimals = isEth ? 18 : step.token.decimals;\n\n    const amountOfTokenString = `${tokenAmountInUnits(\n        step.amount,\n        decimals,\n        step.token.displayDecimals,\n    ).toString()} ${coinSymbol}`;\n\n    const web3 = props.web3;\n\n    const Borrowing = async () => {\n        try {\n            const txHash = isBorrow\n                ? await onSubmitBorrowToken(token, defiToken, amount, isEth, account)\n                : await onSubmitRepayToken(token, defiToken, amount, isEth, account);\n\n            setLoading(true);\n            const tx = await web3.awaitTransactionSuccessAsync(txHash);\n            if(tx) {\n                setLoading(false)\n                props.onDone(txHash)\n            }\n\n        } catch(err) {\n            setLoading(false)\n            props.onDismiss();\n        }\n    }\n\n    useEffect(() => {\n        Borrowing();\n    }, [step])\n\n    return (\n        <ConfirmationPendingContent onDismiss={loading ? () => null : props.onDismiss} pendingText={loading ? `Pending Transaction...` : `Confirm on ${account} to ${isBorrow ? 'Borrow' : 'Repay'} ${amountOfTokenString}.`} />\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        step: getStepsModalCurrentStep(state),\n        gasInfo: getGasInfo(state)\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onSubmitBorrowToken: (token, defiToken, amount, isEth, account) =>\n            dispatch(borrowDefiToken(token, defiToken, amount, isEth, account)),\n        onSubmitRepayToken: (token, defiToken, amount, isEth, account) =>\n            dispatch(repayDefiToken(token, defiToken, amount, isEth, account)),\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LendingToken);\n","import { Row, Col } from 'react-bootstrap';\n\nimport GraphQlProvider from \"./Provider\";\nimport Page from \"../../components/Page\";\nimport GlobalOverall from \"./GlobalOverall\";\nimport BorrowCommon from \"./Common\";\nimport './style.scss';\nimport ModalProvider from \"./ModalProvider\";\nimport styled from \"styled-components\";\n\nconst StyledRow = styled(Row)`\n  margin-top: 40px;\n  \n  @media (max-width: 767px) {\n    margin-top: 20px;\n  }\n`\n\nconst Borrow = props => {\n    return (\n        <Page>\n            <GraphQlProvider>\n                <ModalProvider />\n                <StyledRow>\n                    <Col xs={12}>\n                        <GlobalOverall/>\n                    </Col>\n                    <Col xs={12}>\n                        <BorrowCommon/>\n                    </Col>\n                </StyledRow>\n            </GraphQlProvider>\n        </Page>\n    )\n}\n\nexport default Borrow;\n"],"sourceRoot":""}