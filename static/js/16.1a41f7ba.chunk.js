(this.webpackJsonpdefi_v2=this.webpackJsonpdefi_v2||[]).push([[16],{2965:function(e,t,r){"use strict";var a,n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=r(38),o=r(2972),i=r(3123),u=r(3014),c="0x0000000000000000000000000000000000000000",l={expiryBufferMs:12e4,permittedOrderFeeTypes:new Set([o.OrderPrunerPermittedFeeTypes.NoFees,o.OrderPrunerPermittedFeeTypes.MakerDenominatedTakerFee])},d=new s.BigNumber(15e4),f=n({chainId:1,orderRefreshIntervalMs:1e4},l,{samplerGasLimit:59e6}),h={feePercentage:0,feeRecipient:c},p={useExtensionContract:o.ExtensionContractType.Forwarder,extensionContractOpts:h},b=p,A=n({slippagePercentage:.2},i.constants.DEFAULT_GET_MARKET_ORDERS_OPTS),y=((a={})[u.ERC20BridgeSource.CurveUsdcDai]={version:1,curveAddress:"0xa2b47e3d5c44877cca798226b7b8118f9bfb7a56",tokens:["0x6b175474e89094c44da98b954eedeac495271d0f","0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48"]},a[u.ERC20BridgeSource.CurveUsdcDaiUsdt]={version:1,curveAddress:"0x52ea46506b9cc5ef470c5bf89f17dc28bb35d85c",tokens:["0x6b175474e89094c44da98b954eedeac495271d0f","0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48","0xdac17f958d2ee523a2206206994597c13d831ec7"]},a[u.ERC20BridgeSource.CurveUsdcDaiUsdtTusd]={version:1,curveAddress:"0x45f783cce6b7ff23b2ab2d70e416cdb7d6055f51",tokens:["0x6b175474e89094c44da98b954eedeac495271d0f","0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48","0xdac17f958d2ee523a2206206994597c13d831ec7","0x0000000000085d4780b73119b644ae5ecd22b376"]},a[u.ERC20BridgeSource.CurveUsdcDaiUsdtBusd]={version:1,curveAddress:"0x79a8c46dea5ada233abaffd40f3a0a2b1e5a4f27",tokens:["0x6b175474e89094c44da98b954eedeac495271d0f","0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48","0xdac17f958d2ee523a2206206994597c13d831ec7","0x4fabb145d64652a948d72533023f6e7a623c7c53"]},a);t.constants={ETH_GAS_STATION_API_BASE_URL:"https://ethgasstation.info",PROTOCOL_FEE_MULTIPLIER:d,NULL_BYTES:"0x",ZERO_AMOUNT:new s.BigNumber(0),NULL_ADDRESS:c,MAINNET_CHAIN_ID:1,DEFAULT_ORDER_PRUNER_OPTS:l,ETHER_TOKEN_DECIMALS:18,ONE_AMOUNT:new s.BigNumber(1),ONE_SECOND_MS:1e3,DEFAULT_SWAP_QUOTER_OPTS:f,DEFAULT_FORWARDER_SWAP_QUOTE_GET_OPTS:p,DEFAULT_FORWARDER_SWAP_QUOTE_EXECUTE_OPTS:b,DEFAULT_SWAP_QUOTE_REQUEST_OPTS:A,DEFAULT_PER_PAGE:1e3,NULL_ERC20_ASSET_DATA:"0xf47261b00000000000000000000000000000000000000000000000000000000000000000",PROTOCOL_FEE_UTILS_POLLING_INTERVAL_IN_MS:15e3,MARKET_UTILS_AMOUNT_BUFFER_PERCENTAGE:.5,BRIDGE_ASSET_DATA_PREFIX:"0xdc1600f3",DEFAULT_CURVE_OPTS:y}},2972:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Forwarder="FORWARDER",e.None="NONE"}(t.ExtensionContractType||(t.ExtensionContractType={})),function(e){e.InvalidMarketSellOrMarketBuySwapQuote="INVALID_MARKET_BUY_SELL_SWAP_QUOTE",e.InvalidForwarderSwapQuote="INVALID_FORWARDER_SWAP_QUOTE_PROVIDED",e.NoAddressAvailable="NO_ADDRESS_AVAILABLE",e.SignatureRequestDenied="SIGNATURE_REQUEST_DENIED",e.TransactionValueTooLow="TRANSACTION_VALUE_TOO_LOW"}(t.SwapQuoteConsumerError||(t.SwapQuoteConsumerError={})),function(e){e.NoEtherTokenContractFound="NO_ETHER_TOKEN_CONTRACT_FOUND",e.StandardRelayerApiError="STANDARD_RELAYER_API_ERROR",e.InsufficientAssetLiquidity="INSUFFICIENT_ASSET_LIQUIDITY",e.AssetUnavailable="ASSET_UNAVAILABLE",e.NoGasPriceProvidedOrEstimated="NO_GAS_PRICE_PROVIDED_OR_ESTIMATED",e.AssetDataUnsupported="ASSET_DATA_UNSUPPORTED"}(t.SwapQuoterError||(t.SwapQuoterError={})),function(e){e.Sell="Sell",e.Buy="Buy"}(t.MarketOperation||(t.MarketOperation={})),function(e){e.NoFees="NO_FEES",e.MakerDenominatedTakerFee="MAKER_DENOMINATED_TAKER_FEE",e.TakerDenominatedTakerFee="TAKER_DENOMINATED_TAKER_FEE"}(t.OrderPrunerPermittedFeeTypes||(t.OrderPrunerPermittedFeeTypes={}))},2982:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Box",{enumerable:!0,get:function(){return n.Box}}),Object.defineProperty(t,"Flex",{enumerable:!0,get:function(){return n.Flex}}),t.Card=t.Image=t.Button=t.Link=t.Heading=t.Text=void 0;var a=function(e){if(e&&e.__esModule)return e;var t=s();if(t&&t.has(e))return t.get(e);var r={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=a?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n]}}r.default=e,t&&t.set(e,r);return r}(r(0)),n=r(3051);function s(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}var i=(0,a.forwardRef)((function(e,t){return a.default.createElement(n.Box,o({ref:t,tx:"text"},e))}));t.Text=i;var u=(0,a.forwardRef)((function(e,t){return a.default.createElement(n.Box,o({ref:t,as:"h2",tx:"text",variant:"heading"},e,{__css:{fontSize:4,fontFamily:"heading",fontWeight:"heading",lineHeight:"heading"}}))}));t.Heading=u;var c=(0,a.forwardRef)((function(e,t){return a.default.createElement(n.Box,o({ref:t,as:"a",variant:"link"},e))}));t.Link=c;var l=(0,a.forwardRef)((function(e,t){return a.default.createElement(n.Box,o({ref:t,as:"button",tx:"buttons",variant:"primary"},e,{__css:{appearance:"none",display:"inline-block",textAlign:"center",lineHeight:"inherit",textDecoration:"none",fontSize:"inherit",px:3,py:2,color:"white",bg:"primary",border:0,borderRadius:4}}))}));t.Button=l;var d=(0,a.forwardRef)((function(e,t){return a.default.createElement(n.Box,o({ref:t,as:"img"},e,{__css:{maxWidth:"100%",height:"auto"}}))}));t.Image=d;var f=(0,a.forwardRef)((function(e,t){return a.default.createElement(n.Box,o({ref:t,variant:"card"},e))}));t.Card=f},3014:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.NoOptimalPath="NO_OPTIMAL_PATH",e.EmptyOrders="EMPTY_ORDERS",e.NotERC20AssetData="NOT_ERC20ASSET_DATA",e.NoBridgeForSource="NO_BRIDGE_FOR_SOURCE"}(t.AggregationError||(t.AggregationError={})),function(e){e.Native="Native",e.Uniswap="Uniswap",e.Eth2Dai="Eth2Dai",e.Kyber="Kyber",e.CurveUsdcDai="Curve_USDC_DAI",e.CurveUsdcDaiUsdt="Curve_USDC_DAI_USDT",e.CurveUsdcDaiUsdtTusd="Curve_USDC_DAI_USDT_TUSD",e.CurveUsdcDaiUsdtBusd="Curve_USDC_DAI_USDT_BUSD"}(t.ERC20BridgeSource||(t.ERC20BridgeSource={})),function(e){e[e.SourceNative=1]="SourceNative",e[e.SourceUniswap=2]="SourceUniswap",e[e.SourceEth2Dai=4]="SourceEth2Dai",e[e.SourceKyber=8]="SourceKyber"}(t.FillFlags||(t.FillFlags={}))},3015:function(e,t,r){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var n=r(71),s=r(95),o=r(12),i=r(2972),u=r(3016);t.assert=a({},n.assert,{isValidSwapQuote:function(e,r){n.assert.isHexString(e+".takerAssetData",r.takerAssetData),n.assert.isHexString(e+".makerAssetData",r.makerAssetData),n.assert.doesConformToSchema(e+".orders",r.orders,s.schemas.signedOrdersSchema),t.assert.isValidSwapQuoteOrders(e+".orders",r.orders,r.makerAssetData,r.takerAssetData),t.assert.isValidSwapQuoteInfo(e+".bestCaseQuoteInfo",r.bestCaseQuoteInfo),t.assert.isValidSwapQuoteInfo(e+".worstCaseQuoteInfo",r.worstCaseQuoteInfo),r.type===i.MarketOperation.Buy?n.assert.isBigNumber(e+".makerAssetFillAmount",r.makerAssetFillAmount):n.assert.isBigNumber(e+".takerAssetFillAmount",r.takerAssetFillAmount)},isValidSwapQuoteOrders:function(e,r,a,n){o.every(r,(function(r,s){t.assert.assert(u.utils.isAssetDataEquivalent(n,r.takerAssetData),"Expected "+e+"["+s+"].takerAssetData to be "+n+" but found "+r.takerAssetData),t.assert.assert(u.utils.isAssetDataEquivalent(a,r.makerAssetData),"Expected "+e+"["+s+"].makerAssetData to be "+a+" but found "+r.makerAssetData)}))},isValidOrdersForSwapQuoter:function(e,r){o.every(r,(function(r,a){t.assert.assert(r.takerFee.isZero()||u.utils.isOrderTakerFeePayableWithTakerAsset(r)||u.utils.isOrderTakerFeePayableWithMakerAsset(r),"Expected "+e+"["+a+"].takerFeeAssetData to be "+r.makerAssetData+" or "+r.takerAssetData+" but found "+r.takerFeeAssetData)}))},isValidForwarderSwapQuote:function(e,r,a){t.assert.isValidSwapQuote(e,r),t.assert.isValidForwarderSignedOrders(e+".orders",r.orders,a)},isValidForwarderSignedOrders:function(e,r,a){o.forEach(r,(function(r,n){t.assert.isValidForwarderSignedOrder(e+"["+n+"]",r,a)}))},isValidForwarderSignedOrder:function(e,r,a){t.assert.assert(u.utils.isExactAssetData(r.takerAssetData,a),"Expected "+e+" to have takerAssetData set as "+a+", but is "+r.takerAssetData)},isValidSwapQuoteInfo:function(e,t){n.assert.isBigNumber(e+".feeTakerAssetAmount",t.feeTakerAssetAmount),n.assert.isBigNumber(e+".totalTakerAssetAmount",t.totalTakerAssetAmount),n.assert.isBigNumber(e+".takerAssetAmount",t.takerAssetAmount),n.assert.isBigNumber(e+".makerAssetAmount",t.makerAssetAmount)},isValidOrderbook:function(e,t){n.assert.isFunction(e+".getOrdersAsync",t.getOrdersAsync)},isValidOrderProviderRequest:function(e,t){n.assert.isHexString(e+".makerAssetData",t.makerAssetData),n.assert.isHexString(e+".takerAssetData",t.takerAssetData)},isValidPercentage:function(e,r){t.assert.isNumber(e,r),t.assert.assert(r>=0&&r<=1,"Expected "+e+" to be between 0 and 1, but is "+r)},isValidForwarderExtensionContractOpts:function(e,r){t.assert.isValidPercentage(e+".feePercentage",r.feePercentage),t.assert.isETHAddressHex(e+".feeRecipient",r.feeRecipient)}})},3016:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(62),n=r(124),s=r(38),o=r(93),i=r(2965);t.utils={isSupportedAssetDataInOrders:function(e){var t=e[0]?a.assetDataUtils.decodeAssetDataOrThrow(e[0].makerAssetData):{assetProxyId:""};return e.every((function(e){var r=a.assetDataUtils.decodeAssetDataOrThrow(e.takerAssetData),s=a.assetDataUtils.decodeAssetDataOrThrow(e.makerAssetData);return(s.assetProxyId===n.AssetProxyId.ERC20||s.assetProxyId===n.AssetProxyId.ERC721)&&r.assetProxyId===n.AssetProxyId.ERC20&&t.assetProxyId===s.assetProxyId}))},numberPercentageToEtherTokenAmountPercentage:function(e){return o.Web3Wrapper.toBaseUnitAmount(i.constants.ONE_AMOUNT,i.constants.ETHER_TOKEN_DECIMALS).multipliedBy(e)},isOrderTakerFeePayableWithMakerAsset:function(e){return!e.takerFee.isZero()&&t.utils.isAssetDataEquivalent(e.takerFeeAssetData,e.makerAssetData)},isOrderTakerFeePayableWithTakerAsset:function(e){return!e.takerFee.isZero()&&t.utils.isAssetDataEquivalent(e.takerFeeAssetData,e.takerAssetData)},getAdjustedMakerAndTakerAmountsFromTakerFees:function(e){return[t.utils.isOrderTakerFeePayableWithMakerAsset(e)?e.makerAssetAmount.minus(e.takerFee):e.makerAssetAmount,t.utils.isOrderTakerFeePayableWithTakerAsset(e)?e.takerAssetAmount.plus(e.takerFee):e.takerAssetAmount]},isExactAssetData:function(e,t){return e===t},isAssetDataEquivalent:function(e,r){if(t.utils.isExactAssetData(e,r))return!0;var n=a.assetDataUtils.decodeAssetDataOrThrow(e),o=a.assetDataUtils.decodeAssetDataOrThrow(r);if(t.utils.isERC20EquivalentAssetData(n)&&t.utils.isERC20EquivalentAssetData(o))return i=n.tokenAddress===o.tokenAddress;if(a.assetDataUtils.isERC1155TokenAssetData(n)&&a.assetDataUtils.isERC1155TokenAssetData(o)){var i=n.tokenAddress===o.tokenAddress,u=n.tokenIds.every((function(e){return-1!==o.tokenIds.findIndex((function(t){return e.eq(t)}))})),c=n.tokenIds.every((function(e,t){return n.tokenValues[t].eq(o.tokenValues[o.tokenIds.findIndex((function(t){return e.eq(t)}))])})),l=n.callbackData===s.NULL_BYTES||n.callbackData===o.callbackData;return i&&u&&c&&l}return!(!a.assetDataUtils.isERC721TokenAssetData(n)&&!a.assetDataUtils.isERC721TokenAssetData(o))&&t.utils.isExactAssetData(e,r)},isERC20EquivalentAssetData:function(e){return a.assetDataUtils.isERC20TokenAssetData(e)||a.assetDataUtils.isERC20BridgeAssetData(e)}}},3051:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Flex=t.Box=void 0;u(r(0));var a=u(r(22)),n=r(145),s=function(e){if(e&&e.__esModule)return e;var t=i();if(t&&t.has(e))return t.get(e);var r={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var s=a?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(r,n,s):r[n]=e[n]}}r.default=e,t&&t.set(e,r);return r}(r(550)),o=u(r(1234));function i(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,a.default)("div",{shouldForwardProp:o.default})({boxSizing:"border-box",margin:0,minWidth:0},(function(e){return(0,s.default)(e.__css)(e.theme)}),(function(e){var t=e.theme,r=e.variant,a=e.tx,n=void 0===a?"variants":a;return(0,s.default)((0,s.get)(t,n+"."+r,(0,s.get)(t,r)))(t)}),(function(e){return(0,s.default)(e.sx)(e.theme)}),(function(e){return e.css}),(0,n.compose)(n.space,n.layout,n.typography,n.color,n.flexbox));t.Box=c;var l=(0,a.default)(c)({display:"flex"});t.Flex=l},3123:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(38),n=r(3014),s=new a.BigNumber(2524604400);t.SELL_SOURCES=[n.ERC20BridgeSource.Uniswap,n.ERC20BridgeSource.Eth2Dai,n.ERC20BridgeSource.Kyber,n.ERC20BridgeSource.CurveUsdcDai,n.ERC20BridgeSource.CurveUsdcDaiUsdt,n.ERC20BridgeSource.CurveUsdcDaiUsdtTusd,n.ERC20BridgeSource.CurveUsdcDaiUsdtBusd],t.BUY_SOURCES=[n.ERC20BridgeSource.Uniswap,n.ERC20BridgeSource.Eth2Dai],t.DEFAULT_GET_MARKET_ORDERS_OPTS={runLimit:Math.pow(2,15),excludedSources:[],bridgeSlippage:5e-4,dustFractionThreshold:.0025,numSamples:13,noConflicts:!0,sampleDistributionBase:1.05,fees:{}},t.FEE_QUOTE_SOURCES=t.SELL_SOURCES,t.constants={INFINITE_TIMESTAMP_SEC:s,SELL_SOURCES:t.SELL_SOURCES,BUY_SOURCES:t.BUY_SOURCES,DEFAULT_GET_MARKET_ORDERS_OPTS:t.DEFAULT_GET_MARKET_ORDERS_OPTS,ERC20_PROXY_ID:"0xf47261b0",FEE_QUOTE_SOURCES:t.FEE_QUOTE_SOURCES,WALLET_SIGNATURE:"0x04",ONE_ETHER:new a.BigNumber(1e18)}},3190:function(e,t,r){"use strict";var a=this&&this.__awaiter||function(e,t,r,a){return new(r||(r=Promise))((function(n,s){function o(e){try{u(a.next(e))}catch(t){s(t)}}function i(e){try{u(a.throw(e))}catch(t){s(t)}}function u(e){e.done?n(e.value):new r((function(t){t(e.value)})).then(o,i)}u((a=a.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,a,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,a&&(n=2&s[0]?a.return:s[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,s[1])).done)return n;switch(a=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(i){s=[6,i],a=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(381),o=r(62),i=r(93),u=r(12),c=r(2965),l=r(2972),d=r(3016),f=r(3015);t.swapQuoteConsumerUtils={getTakerAddressOrThrowAsync:function(e,r){return a(this,void 0,void 0,(function(){var a;return n(this,(function(n){switch(n.label){case 0:return[4,t.swapQuoteConsumerUtils.getTakerAddressAsync(e,r)];case 1:if(void 0===(a=n.sent()))throw new Error(l.SwapQuoteConsumerError.NoAddressAvailable);return[2,a]}}))}))},getTakerAddressAsync:function(e,t){return a(this,void 0,void 0,(function(){var r,a;return n(this,(function(n){switch(n.label){case 0:return void 0===t.takerAddress?[3,1]:[2,t.takerAddress];case 1:return[4,new i.Web3Wrapper(e).getAvailableAddressesAsync()];case 2:return r=n.sent(),void 0!==(a=u.head(r))?[2,a]:[2,void 0];case 3:return[2]}}))}))},getEthAndWethBalanceAsync:function(e,t,r){return a(this,void 0,void 0,(function(){var a,o,u;return n(this,(function(n){switch(n.label){case 0:return a=new s.WETH9Contract(t.etherToken,e),[4,new i.Web3Wrapper(e).getBalanceInWeiAsync(r)];case 1:return o=n.sent(),[4,a.balanceOf(r).callAsync()];case 2:return u=n.sent(),[2,[o,u]]}}))}))},isValidForwarderSwapQuote:function(e,r){return t.swapQuoteConsumerUtils.isValidForwarderSignedOrders(e.orders,r)},isValidForwarderSignedOrders:function(e,r){return u.every(e,(function(e){return t.swapQuoteConsumerUtils.isValidForwarderSignedOrder(e,r)}))},isValidForwarderSignedOrder:function(e,t){return d.utils.isExactAssetData(e.takerAssetData,t)},getExtensionContractTypeForSwapQuoteAsync:function(e,r,s,i){return a(this,void 0,void 0,(function(){var a,d,h,p,b,A;return n(this,(function(n){switch(n.label){case 0:return a=o.assetDataUtils.encodeERC20AssetData(r.etherToken),t.swapQuoteConsumerUtils.isValidForwarderSwapQuote(e,a)?(void 0!==i.takerAddress&&f.assert.isETHAddressHex("takerAddress",i.takerAddress),d=i.ethAmount||e.worstCaseQuoteInfo.takerAssetAmount.plus(e.worstCaseQuoteInfo.protocolFeeInWeiAmount),[4,t.swapQuoteConsumerUtils.getTakerAddressAsync(s,i)]):[3,5];case 1:return void 0===(h=n.sent())?[3,3]:[4,t.swapQuoteConsumerUtils.getEthAndWethBalanceAsync(s,r,h)];case 2:return b=n.sent(),[3,4];case 3:b=[c.constants.ZERO_AMOUNT,c.constants.ZERO_AMOUNT],n.label=4;case 4:return p=b,(A=u.map(p,(function(e){return e.isGreaterThanOrEqualTo(d)})))[1]?[2,l.ExtensionContractType.None]:(A[0]&&A[1],[2,l.ExtensionContractType.Forwarder]);case 5:return[2,l.ExtensionContractType.None]}}))}))}}},3314:function(e,t,r){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(3956));!function(e){e[e.Mainnet=1]="Mainnet",e[e.Ropsten=3]="Ropsten",e[e.Rinkeby=4]="Rinkeby",e[e.Kovan=42]="Kovan",e[e.Ganache=1337]="Ganache"}(t.ChainId||(t.ChainId={})),t.getContractAddressesForChainOrThrow=function(e){var t=n.default;if(void 0===t[e])throw new Error("Unknown chain id (".concat(e,"). No known 0x contracts have been deployed on this chain."));return t[e]}},3315:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(38),n=r(3015);t.affiliateFeeUtils={getTotalEthAmountWithAffiliateFee:function(e,r){return e.protocolFeeInWeiAmount.plus(e.totalTakerAssetAmount).plus(t.affiliateFeeUtils.getFeeAmount(e,r))},getFeeAmount:function(e,t){return n.assert.assert(t>=0,"feePercentage must be >= 0"),e.protocolFeeInWeiAmount.plus(e.totalTakerAssetAmount).times(t).integerValue(a.BigNumber.ROUND_UP)}}},3316:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(3016);t.fillableAmountsUtils={getTakerAssetAmountSwappedAfterOrderFees:function(e){return a.utils.isOrderTakerFeePayableWithTakerAsset(e)?e.fillableTakerAssetAmount.plus(e.fillableTakerFeeAmount):e.fillableTakerAssetAmount},getMakerAssetAmountSwappedAfterOrderFees:function(e){return a.utils.isOrderTakerFeePayableWithMakerAsset(e)?e.fillableMakerAssetAmount.minus(e.fillableTakerFeeAmount):e.fillableMakerAssetAmount}}},3317:function(e,t,r){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=this&&this.__values||function(e){var t="function"===typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(62),o=r(38),i=r(2965),u=r(3123),c=r(3014),l=i.constants.NULL_BYTES,d=i.constants.NULL_ADDRESS,f=i.constants.ZERO_AMOUNT,h=u.constants.INFINITE_TIMESTAMP_SEC,p=u.constants.WALLET_SIGNATURE,b=function(){function e(e){this._contractAddress=e}return e.convertNativeOrderToFullyFillableOptimizedOrders=function(e){return a({},e,{fillableMakerAssetAmount:e.makerAssetAmount,fillableTakerAssetAmount:e.takerAssetAmount,fillableTakerFeeAmount:e.takerFee,fill:{source:c.ERC20BridgeSource.Native,totalMakerAssetAmount:e.makerAssetAmount,totalTakerAssetAmount:e.takerAssetAmount,subFills:[]}})},e.prototype.createSellOrdersFromPath=function(e,t,r,a,s){var o,i,u=[];try{for(var l=n(a),d=l.next();!d.done;d=l.next()){var f=d.value;f.source===c.ERC20BridgeSource.Native?u.push(y(f)):u.push(A(e,f,this._getBridgeAddressFromSource(f.source),r,t,s))}}catch(h){o={error:h}}finally{try{d&&!d.done&&(i=l.return)&&i.call(l)}finally{if(o)throw o.error}}return u},e.prototype.createBuyOrdersFromPath=function(e,t,r,a,s){var o,i,u=[];try{for(var l=n(a),d=l.next();!d.done;d=l.next()){var f=d.value;f.source===c.ERC20BridgeSource.Native?u.push(y(f)):u.push(A(e,f,this._getBridgeAddressFromSource(f.source),t,r,s,!0))}}catch(h){o={error:h}}finally{try{d&&!d.done&&(i=l.return)&&i.call(l)}finally{if(o)throw o.error}}return u},e.prototype._getBridgeAddressFromSource=function(e){switch(e){case c.ERC20BridgeSource.Eth2Dai:return this._contractAddress.eth2DaiBridge;case c.ERC20BridgeSource.Kyber:return this._contractAddress.kyberBridge;case c.ERC20BridgeSource.Uniswap:return this._contractAddress.uniswapBridge;case c.ERC20BridgeSource.CurveUsdcDai:case c.ERC20BridgeSource.CurveUsdcDaiUsdt:case c.ERC20BridgeSource.CurveUsdcDaiUsdtTusd:case c.ERC20BridgeSource.CurveUsdcDaiUsdtBusd:return this._contractAddress.curveBridge}throw new Error(c.AggregationError.NoBridgeForSource)},e}();function A(e,t,r,n,u,c,b){var A,y;if(void 0===b&&(b=!1),Object.keys(i.constants.DEFAULT_CURVE_OPTS).includes(t.source)){var m=i.constants.DEFAULT_CURVE_OPTS[t.source],v=m.curveAddress,g=m.tokens,x=m.version,O=g.indexOf(u),_=g.indexOf(n);A=s.assetDataUtils.encodeERC20BridgeAssetData(n,r,function(e,t,r,a){return o.AbiEncoder.create([{name:"curveAddress",type:"address"},{name:"fromTokenIdx",type:"int128"},{name:"toTokenIdx",type:"int128"},{name:"version",type:"int128"}]).encode([e,t,r,a])}(v,O,_,x))}else A=s.assetDataUtils.encodeERC20BridgeAssetData(n,r,(y=u,o.AbiEncoder.create([{name:"tokenAddress",type:"address"}]).encode({tokenAddress:y})));return a({makerAddress:r,makerAssetData:A,takerAssetData:s.assetDataUtils.encodeERC20AssetData(u)},function(e,t,r,n){void 0===n&&(n=!1);var i=n?t.totalMakerAssetAmount:t.totalMakerAssetAmount.times(1-r).integerValue(o.BigNumber.ROUND_DOWN),u=n?t.totalTakerAssetAmount.times(r+1).integerValue(o.BigNumber.ROUND_UP):t.totalTakerAssetAmount;return a({fill:t,takerAddress:d,senderAddress:d,feeRecipientAddress:d,salt:s.generatePseudoRandomSalt(),expirationTimeSeconds:h,makerFeeAssetData:l,takerFeeAssetData:l,makerFee:f,takerFee:f,makerAssetAmount:i,fillableMakerAssetAmount:i,takerAssetAmount:u,fillableTakerAssetAmount:u,fillableTakerFeeAmount:f,signature:p},e)}(e,t,c,b))}function y(e){return a({fill:{source:e.source,totalMakerAssetAmount:e.totalMakerAssetAmount,totalTakerAssetAmount:e.totalTakerAssetAmount,subFills:e.subFills}},e.nativeOrder)}t.CreateOrderUtils=b},3318:function(e,t,r){"use strict";var a=this&&this.__awaiter||function(e,t,r,a){return new(r||(r=Promise))((function(n,s){function o(e){try{u(a.next(e))}catch(t){s(t)}}function i(e){try{u(a.throw(e))}catch(t){s(t)}}function u(e){e.done?n(e.value):new r((function(t){t(e.value)})).then(o,i)}u((a=a.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,a,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,a&&(n=2&s[0]?a.return:s[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,s[1])).done)return n;switch(a=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(i){s=[6,i],a=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}},s=this&&this.__read||function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var a,n,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(a=s.next()).done;)o.push(a.value)}catch(i){n={error:i}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var i=r(38),u=r(2965),c=r(3014),l={getOrderFillableTakerAmounts:function(e){var t=this;return{encodeCall:function(t){return t.getOrderFillableTakerAssetAmounts(e,e.map((function(e){return e.signature}))).getABIEncodedTransactionData()},handleCallResultsAsync:function(e,r){return a(t,void 0,void 0,(function(){return n(this,(function(t){return[2,e.getABIDecodedReturnData("getOrderFillableTakerAssetAmounts",r)]}))}))}}},getOrderFillableMakerAmounts:function(e){var t=this;return{encodeCall:function(t){return t.getOrderFillableMakerAssetAmounts(e,e.map((function(e){return e.signature}))).getABIEncodedTransactionData()},handleCallResultsAsync:function(e,r){return a(t,void 0,void 0,(function(){return n(this,(function(t){return[2,e.getABIDecodedReturnData("getOrderFillableMakerAssetAmounts",r)]}))}))}}},getKyberSellQuotes:function(e,t,r){var s=this;return{encodeCall:function(a){return a.sampleSellsFromKyberNetwork(t,e,r).getABIEncodedTransactionData()},handleCallResultsAsync:function(e,t){return a(s,void 0,void 0,(function(){return n(this,(function(r){return[2,e.getABIDecodedReturnData("sampleSellsFromKyberNetwork",t)]}))}))}}},getUniswapSellQuotes:function(e,t,r){var s=this;return{encodeCall:function(a){return a.sampleSellsFromUniswap(t,e,r).getABIEncodedTransactionData()},handleCallResultsAsync:function(e,t){return a(s,void 0,void 0,(function(){return n(this,(function(r){return[2,e.getABIDecodedReturnData("sampleSellsFromUniswap",t)]}))}))}}},getEth2DaiSellQuotes:function(e,t,r){var s=this;return{encodeCall:function(a){return a.sampleSellsFromEth2Dai(t,e,r).getABIEncodedTransactionData()},handleCallResultsAsync:function(e,t){return a(s,void 0,void 0,(function(){return n(this,(function(r){return[2,e.getABIDecodedReturnData("sampleSellsFromEth2Dai",t)]}))}))}}},getCurveSellQuotes:function(e,t,r,s){var o=this;return{encodeCall:function(a){return a.sampleSellsFromCurve(e,new i.BigNumber(t),new i.BigNumber(r),s).getABIEncodedTransactionData()},handleCallResultsAsync:function(e,t){return a(o,void 0,void 0,(function(){return n(this,(function(r){return[2,e.getABIDecodedReturnData("sampleSellsFromCurve",t)]}))}))}}},getUniswapBuyQuotes:function(e,t,r){var s=this;return{encodeCall:function(a){return a.sampleBuysFromUniswap(t,e,r).getABIEncodedTransactionData()},handleCallResultsAsync:function(e,t){return a(s,void 0,void 0,(function(){return n(this,(function(r){return[2,e.getABIDecodedReturnData("sampleBuysFromUniswap",t)]}))}))}}},getEth2DaiBuyQuotes:function(e,t,r){var s=this;return{encodeCall:function(a){return a.sampleBuysFromEth2Dai(t,e,r).getABIEncodedTransactionData()},handleCallResultsAsync:function(e,t){return a(s,void 0,void 0,(function(){return n(this,(function(r){return[2,e.getABIDecodedReturnData("sampleBuysFromEth2Dai",t)]}))}))}}},getMedianSellRate:function(e,t,r,s){var u=this,c=l.getSellQuotes(e,t,r,[s]);return{encodeCall:function(e){var t=[c.encodeCall(e)];return e.batchCall(t).getABIEncodedTransactionData()},handleCallResultsAsync:function(e,t){return a(u,void 0,void 0,(function(){var r,a,s,u;return n(this,(function(n){switch(n.label){case 0:return r=e.getABIDecodedReturnData("batchCall",t),[4,c.handleCallResultsAsync(e,r[0])];case 1:return 0===(a=n.sent()).length||0===(s=a.reduce((function(e,t){return e.concat.apply(e,o(t))})).sort((function(e,t){return e.output.comparedTo(t.output)}))).length?[2,new i.BigNumber(0)]:[2,(u=s[Math.floor(s.length/2)]).output.div(u.input)]}}))}))}}},constant:function(e){var t=this;return{encodeCall:function(e){return"0x"},handleCallResultsAsync:function(r,s){return a(t,void 0,void 0,(function(){return n(this,(function(t){return[2,e]}))}))}}},getSellQuotes:function(e,t,r,s){var o=this,i=e.map((function(e){var a;if(e===c.ERC20BridgeSource.Eth2Dai)a=l.getEth2DaiSellQuotes(t,r,s);else if(e===c.ERC20BridgeSource.Uniswap)a=l.getUniswapSellQuotes(t,r,s);else if(e===c.ERC20BridgeSource.Kyber)a=l.getKyberSellQuotes(t,r,s);else{if(!Object.keys(u.constants.DEFAULT_CURVE_OPTS).includes(e))throw new Error("Unsupported sell sample source: "+e);var n=u.constants.DEFAULT_CURVE_OPTS[e],o=n.curveAddress,i=n.tokens,d=i.indexOf(r),f=i.indexOf(t);-1!==d&&-1!==f&&(a=l.getCurveSellQuotes(o,d,f,s))}return{batchedOperation:a,source:e}})).filter((function(e){return e.batchedOperation}));return{encodeCall:function(e){var t=i.map((function(t){return t.batchedOperation.encodeCall(e)}));return e.batchCall(t).getABIEncodedTransactionData()},handleCallResultsAsync:function(e,t){return a(o,void 0,void 0,(function(){var r,o,u=this;return n(this,(function(c){switch(c.label){case 0:return r=e.getABIDecodedReturnData("batchCall",t),[4,Promise.all(i.map((function(t,s){return a(u,void 0,void 0,(function(){return n(this,(function(a){return[2,t.batchedOperation.handleCallResultsAsync(e,r[s])]}))}))})))];case 1:return o=c.sent(),[2,i.map((function(e,t){return o[t].map((function(t,r){return{source:e.source,output:t,input:s[r]}}))}))]}}))}))}}},getBuyQuotes:function(e,t,r,s){var o=this,i=e.map((function(e){if(e===c.ERC20BridgeSource.Eth2Dai)return l.getEth2DaiBuyQuotes(t,r,s);if(e===c.ERC20BridgeSource.Uniswap)return l.getUniswapBuyQuotes(t,r,s);throw new Error("Unsupported buy sample source: "+e)}));return{encodeCall:function(e){var t=i.map((function(t){return t.encodeCall(e)}));return e.batchCall(t).getABIEncodedTransactionData()},handleCallResultsAsync:function(t,r){return a(o,void 0,void 0,(function(){var o,u,c=this;return n(this,(function(l){switch(l.label){case 0:return o=t.getABIDecodedReturnData("batchCall",r),[4,Promise.all(i.map((function(e,r){return a(c,void 0,void 0,(function(){return n(this,(function(a){return[2,e.handleCallResultsAsync(t,o[r])]}))}))})))];case 1:return u=l.sent(),[2,e.map((function(e,t){return u[t].map((function(t,r){return{source:e,output:t,input:s[r]}}))}))]}}))}))}}}};t.getSampleAmounts=function(e,t,r){void 0===r&&(r=1);var a=o(Array(t)).map((function(e,t){return new i.BigNumber(r).pow(t)})),n=a.map((function(e){return e.div(i.BigNumber.sum.apply(i.BigNumber,o(a)))}));return n.map((function(t,r){return e.times(i.BigNumber.sum.apply(i.BigNumber,o([0],n.slice(0,r+1)))).integerValue(i.BigNumber.ROUND_UP)}))};var d=function(){function e(e){this._samplerContract=e}return e.prototype.executeAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a(this,void 0,void 0,(function(){return n(this,(function(t){return[2,this.executeBatchAsync(e)]}))}))},e.prototype.executeBatchAsync=function(e){return a(this,void 0,void 0,(function(){var t,r,s,o=this;return n(this,(function(i){switch(i.label){case 0:return t=e.map((function(e){return e.encodeCall(o._samplerContract)})),[4,this._samplerContract.batchCall(t.filter((function(e){return"0x"!==e}))).callAsync()];case 1:return r=i.sent(),s=0,[2,Promise.all(t.map((function(t,i){return a(o,void 0,void 0,(function(){return n(this,(function(a){return"0x"!==t?[2,e[i].handleCallResultsAsync(this._samplerContract,r[s++])]:[2,e[i].handleCallResultsAsync(this._samplerContract,"0x")]}))}))})))]}}))}))},e.ops=l,e}();t.DexOrderSampler=d},3319:function(e,t,r){"use strict";var a=this&&this.__awaiter||function(e,t,r,a){return new(r||(r=Promise))((function(n,s){function o(e){try{u(a.next(e))}catch(t){s(t)}}function i(e){try{u(a.throw(e))}catch(t){s(t)}}function u(e){e.done?n(e.value):new r((function(t){t(e.value)})).then(o,i)}u((a=a.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,a,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,a&&(n=2&s[0]?a.return:s[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,s[1])).done)return n;switch(a=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(i){s=[6,i],a=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(38),o=r(3966),i=r(2965),u=r(2972),c=function(){function e(e,t){void 0===t&&(t=i.constants.ZERO_AMOUNT),this._gasPriceHeart=o.createHeart(e),this.gasPriceEstimation=t,this._initializeHeartBeat()}return e.prototype.getProtocolFeeMultiplierAsync=function(){return a(this,void 0,void 0,(function(){return n(this,(function(e){return[2,i.constants.PROTOCOL_FEE_MULTIPLIER]}))}))},e.prototype.getGasPriceEstimationOrThrowAsync=function(e){return a(this,void 0,void 0,(function(){return n(this,(function(t){return this.gasPriceEstimation.eq(i.constants.ZERO_AMOUNT)||e?[2,this._getGasPriceFromGasStationOrThrowAsync()]:[2,this.gasPriceEstimation]}))}))},e.prototype.destroyAsync=function(){return a(this,void 0,void 0,(function(){return n(this,(function(e){return this._gasPriceHeart.kill(),[2]}))}))},e.prototype.calculateWorstCaseProtocolFeeAsync=function(e,t){return a(this,void 0,void 0,(function(){var r;return n(this,(function(a){switch(a.label){case 0:return[4,this.getProtocolFeeMultiplierAsync()];case 1:return r=a.sent(),[2,new s.BigNumber(e.length).times(r).times(t)]}}))}))},e.prototype._getGasPriceFromGasStationOrThrowAsync=function(){return a(this,void 0,void 0,(function(){var e,t,r;return n(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,fetch(i.constants.ETH_GAS_STATION_API_BASE_URL+"/json/ethgasAPI.json")];case 1:return[4,a.sent().json()];case 2:return e=a.sent(),10,t=new s.BigNumber(e.fast/10),r=new s.BigNumber(10).pow(9),[2,r.times(t)];case 3:throw a.sent(),new Error(u.SwapQuoterError.NoGasPriceProvidedOrEstimated);case 4:return[2]}}))}))},e.prototype._initializeHeartBeat=function(){var e=this;this._gasPriceHeart.createEvent(1,(function(){return a(e,void 0,void 0,(function(){var e;return n(this,(function(t){switch(t.label){case 0:return e=this,[4,this._getGasPriceFromGasStationOrThrowAsync()];case 1:return e.gasPriceEstimation=t.sent(),[2]}}))}))}))},e}();t.ProtocolFeeUtils=c},3953:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(764);t.BaseOrderProvider=a.BaseOrderProvider,t.Orderbook=a.Orderbook,t.OrderSet=a.OrderSet,t.OrderStore=a.OrderStore;var n=r(38);t.BigNumber=n.BigNumber;var s=r(3954);t.InsufficientAssetLiquidityError=s.InsufficientAssetLiquidityError;var o=r(3955);t.SwapQuoteConsumer=o.SwapQuoteConsumer;var i=r(3959);t.SwapQuoter=i.SwapQuoter;var u=r(2972);t.ExtensionContractType=u.ExtensionContractType,t.SwapQuoterError=u.SwapQuoterError,t.SwapQuoteConsumerError=u.SwapQuoteConsumerError;var c=r(3014);t.ERC20BridgeSource=c.ERC20BridgeSource;var l=r(3315);t.affiliateFeeUtils=l.affiliateFeeUtils;var d=r(3319);t.ProtocolFeeUtils=d.ProtocolFeeUtils},3954:function(e,t,r){"use strict";var a=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function a(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=r(2972),s=function(e){function t(r){var a=e.call(this,n.SwapQuoterError.InsufficientAssetLiquidity)||this;return a.amountAvailableToFill=r,Object.setPrototypeOf(a,t.prototype),a}return a(t,e),t}(Error);t.InsufficientAssetLiquidityError=s},3955:function(e,t,r){"use strict";var a=this&&this.__awaiter||function(e,t,r,a){return new(r||(r=Promise))((function(n,s){function o(e){try{u(a.next(e))}catch(t){s(t)}}function i(e){try{u(a.throw(e))}catch(t){s(t)}}function u(e){e.done?n(e.value):new r((function(t){t(e.value)})).then(o,i)}u((a=a.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,a,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,a&&(n=2&s[0]?a.return:s[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,s[1])).done)return n;switch(a=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(i){s=[6,i],a=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(3314),o=r(38),i=r(12),u=r(2965),c=r(2972),l=r(3015),d=r(3190),f=r(3957),h=r(3958),p=function(){function e(e,t){void 0===t&&(t={});var r=i.merge({},u.constants.DEFAULT_SWAP_QUOTER_OPTS,t).chainId;l.assert.isNumber("chainId",r);var a=o.providerUtils.standardizeOrThrow(e);this.provider=a,this.chainId=r,this._contractAddresses=t.contractAddresses||s.getContractAddressesForChainOrThrow(r),this._exchangeConsumer=new f.ExchangeSwapQuoteConsumer(e,this._contractAddresses,t),this._forwarderConsumer=new h.ForwarderSwapQuoteConsumer(e,this._contractAddresses,t)}return e.getSwapQuoteConsumer=function(t,r){return void 0===r&&(r={}),new e(t,r)},e.prototype.getCalldataOrThrowAsync=function(e,t){return void 0===t&&(t={}),a(this,void 0,void 0,(function(){return n(this,(function(r){switch(r.label){case 0:return l.assert.isValidSwapQuote("quote",e),[4,this._getConsumerForSwapQuoteAsync(t)];case 1:return[2,r.sent().getCalldataOrThrowAsync(e,t)]}}))}))},e.prototype.executeSwapQuoteOrThrowAsync=function(e,t){return void 0===t&&(t={}),a(this,void 0,void 0,(function(){return n(this,(function(r){switch(r.label){case 0:return l.assert.isValidSwapQuote("quote",e),[4,this._getConsumerForSwapQuoteAsync(t)];case 1:return[2,r.sent().executeSwapQuoteOrThrowAsync(e,t)]}}))}))},e.prototype.getOptimalExtensionContractTypeAsync=function(e,t){return void 0===t&&(t={}),a(this,void 0,void 0,(function(){return n(this,(function(r){return[2,d.swapQuoteConsumerUtils.getExtensionContractTypeForSwapQuoteAsync(e,this._contractAddresses,this.provider,t)]}))}))},e.prototype._getConsumerForSwapQuoteAsync=function(e){return a(this,void 0,void 0,(function(){return n(this,(function(t){return e.useExtensionContract===c.ExtensionContractType.Forwarder?[2,this._forwarderConsumer]:[2,this._exchangeConsumer]}))}))},e}();t.SwapQuoteConsumer=p},3956:function(e){e.exports=JSON.parse('{"1":{"exchangeV2":"0x080bf510fcbf18b91105470639e9561022937712","exchange":"0x61935cbdd02287b511119ddb11aeb42f1593b7ef","erc20Proxy":"0x95e6f48254609a6ee006f7d493c8e5fb97094cef","erc721Proxy":"0xefc70a1b18c432bdc64b596838b4d138f6bc6cad","forwarder":"0x6958f5e95332d93d21af0d7b9ca85b8212fee0a5","zrxToken":"0xe41d2489571d322189246dafa5ebde1f4699f498","etherToken":"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2","assetProxyOwner":"0xdffe798c7172dd6deb32baee68af322e8f495ce0","zeroExGovernor":"0x7d3455421bbc5ed534a83c88fd80387dc8271392","coordinatorRegistry":"0x45797531b873fd5e519477a070a955764c1a5b07","coordinator":"0x38a795580d0f687e399913a00ddef6a17612c722","multiAssetProxy":"0xef701d5389ae74503d633396c4d654eabedc9d78","staticCallProxy":"0x3517b88c19508c08650616019062b898ab65ed29","erc1155Proxy":"0x7eefbd48fd63d441ec7435d024ec7c5131019add","zrxVault":"0xba7f8b5fb1b19c1211c5d49550fcd149177a5eaf","staking":"0x2a17c35ff147b32f13f19f2e311446eeb02503f3","stakingProxy":"0xa26e80e7dea86279c6d778d702cc413e6cffa777","devUtils":"0x74134cf88b21383713e096a5ecf59e297dc7f547","erc20BridgeProxy":"0x8ed95d1746bf1e4dab58d8ed4724f1ef95b20db0","uniswapBridge":"0x36691c4f426eb8f42f150ebde43069a31cb080ad","uniswapV2Bridge":"0xdcd6011f4c6b80e470d9487f5871a0cba7c93f48","erc20BridgeSampler":"0xd8c38704c9937ea3312de29f824b4ad3450a5e61","kyberBridge":"0xadd97271402590564ddd8ad23cb5317b1fb0fffb","eth2DaiBridge":"0x991c745401d5b5e469b8c3e2cb02c748f08754f1","chaiBridge":"0x77c31eba23043b9a72d13470f3a3a311344d7438","dydxBridge":"0x92af95e37afddac412e5688a9dcc1dd815d4ae53","godsUnchainedValidator":"0x09a379ef7218bcfd8913faa8b281ebc5a2e0bc04","broker":"0xd4690a51044db77d91d7aa8f7a3a5ad5da331af0","chainlinkStopLimit":"0xeb27220f95f364e1d9531992c48613f231839f53","curveBridge":"0x1796cd592d19e3bcd744fbb025bb61a6d8cb2c09","maximumGasPrice":"0xe2bfd35306495d11e3c9db0d8de390cda24563cf","dexForwarderBridge":"0xc47b7094f378e54347e281aab170e8cca69d880a","multiBridge":"0xc03117a8c9bde203f70aa911cb64a7a0df5ba1e1","balancerBridge":"0xfe01821ca163844203220cd08e4f2b2fb43ae4e4","bancorBridge":"0x259897d9699553edbdf8538599242354e957fb94","exchangeProxyGovernor":"0x618f9c67ce7bf1a50afa1e7e0238422601b0ff6e","exchangeProxy":"0xdef1c0ded9bec7f1a1670819833240f027b25eff","exchangeProxyAllowanceTarget":"0xf740b67da229f2f10bcbd38a7979992fcc71b8eb","exchangeProxyTransformerDeployer":"0x39dce47a67ad34344eab877eae3ef1fa2a1d50bb","exchangeProxyFlashWallet":"0x22f9dcf4647084d6c31b2765f6910cd85c178c18","mStableBridge":"0x2bf04fcea05f0989a14d9afa37aa376baca6b2b3","mooniswapBridge":"0x02b7eca484ad960fca3f7709e0b2ac81eec3069c","sushiswapBridge":"0x47ed0262a0b688dcb836d254c6a2e96b6c48a9f5","shellBridge":"0x21fb3862eed7911e0f8219a077247b849846728d","dodoBridge":"0xe9da66965a9344aab2167e6813c03f043cc7a6ca","creamBridge":"0xb9d4bf2c8dab828f4ffb656acdb6c2b497d44f25","transformers":{"wethTransformer":"0x68c0bb685099dc7cb5c5ce2b26185945b357383e","payTakerTransformer":"0x49b9df2c58491764cf40cb052dd4243df63622c7","affiliateFeeTransformer":"0x4581b59a05ba373b9f67676f66bdb5fcd67e7567","fillQuoteTransformer":"0xaaeb683b35a36876bd44aea6b704f58614889228"}},"3":{"erc20Proxy":"0xf1ec7d0ba42f15fb5c9e3adbe86431973e44764c","erc721Proxy":"0x070efeb7e5ffa3d1a59d03a219539551ae60ba43","zrxToken":"0xff67881f8d12f372d91baae9752eb3631ff0ed00","etherToken":"0xc778417e063141139fce010982780140aa0cd5ab","exchangeV2":"0xbff9493f92a3df4b0429b6d00743b3cfb4c85831","exchange":"0x5d8c9ba74607d2cbc4176882a42d4ace891c1c00","assetProxyOwner":"0x0000000000000000000000000000000000000000","zeroExGovernor":"0x53993733d41a88ae86f77a18a024e5548ee26579","forwarder":"0xd5abddda4ba89c0120edc0ca8a95ed1ad0bf9fc3","coordinatorRegistry":"0xf8becacec90bfc361c0a2c720839e08405a72f6d","coordinator":"0xc2e2f8faf4bf649123b6f94103646cb4a0331006","multiAssetProxy":"0x7b70a148e20b348c320208df84fdd642aab49fd0","staticCallProxy":"0xaa460127562482faa5df42f2c39a025cd4a1cc0a","erc1155Proxy":"0x7f10d80f2659aaae790ab03da12be11c4e6008c3","devUtils":"0xc812af3f3fbc62f76ea4262576ec0f49db8b7f1c","zrxVault":"0x38bbb9fb54a6b6d0376948bf3b2a7ed1e8aea6e8","staking":"0x4af649ffde640ceb34b1afaba3e0bb8e9698cb01","stakingProxy":"0x6acab4c9c4e3a0c78435fdb5ad1719c95460a668","erc20BridgeProxy":"0xb344afed348de15eb4a9e180205a2b0739628339","uniswapBridge":"0x0000000000000000000000000000000000000000","uniswapV2Bridge":"0x0000000000000000000000000000000000000000","eth2DaiBridge":"0x0000000000000000000000000000000000000000","erc20BridgeSampler":"0x0000000000000000000000000000000000000000","kyberBridge":"0x0000000000000000000000000000000000000000","chaiBridge":"0x0000000000000000000000000000000000000000","dydxBridge":"0x0000000000000000000000000000000000000000","godsUnchainedValidator":"0xd4690a51044db77d91d7aa8f7a3a5ad5da331af0","broker":"0x4022e3982f326455f0905de3dbc4449999baf2dc","chainlinkStopLimit":"0x67a094cf028221ffdd93fc658f963151d05e2a74","curveBridge":"0x1796cd592d19e3bcd744fbb025bb61a6d8cb2c09","maximumGasPrice":"0x407b4128e9ecad8769b2332312a9f655cb9f5f3a","dexForwarderBridge":"0x3261ea1411a1a840aed708896f779e1b837c917e","multiBridge":"0x0000000000000000000000000000000000000000","balancerBridge":"0x47697b44bd89051e93b4d5857ba8e024800a74ac","bancorBridge":"0x0000000000000000000000000000000000000000","exchangeProxyGovernor":"0x618f9c67ce7bf1a50afa1e7e0238422601b0ff6e","exchangeProxy":"0xdef1c0ded9bec7f1a1670819833240f027b25eff","exchangeProxyAllowanceTarget":"0xf740b67da229f2f10bcbd38a7979992fcc71b8eb","exchangeProxyTransformerDeployer":"0x1c9a27658dd303a31205a3b245e8993b92d4d502","exchangeProxyFlashWallet":"0x22f9dcf4647084d6c31b2765f6910cd85c178c18","mStableBridge":"0x0000000000000000000000000000000000000000","mooniswapBridge":"0x0000000000000000000000000000000000000000","sushiswapBridge":"0x0000000000000000000000000000000000000000","shellBridge":"0x0000000000000000000000000000000000000000","dodoBridge":"0x0000000000000000000000000000000000000000","creamBridge":"0x0000000000000000000000000000000000000000","transformers":{"wethTransformer":"0x8d822fe2b42f60531203e288f5f357fa79474437","payTakerTransformer":"0x150652244723102faeaefa4c79597d097ffa26c6","affiliateFeeTransformer":"0xa39b40642e8e00435857a0fe7d0655e08cc2217e","fillQuoteTransformer":"0xaf77ff7b00ff528abdcac3f1dcf072de702b758e"}},"4":{"exchangeV2":"0xbff9493f92a3df4b0429b6d00743b3cfb4c85831","exchange":"0xf8becacec90bfc361c0a2c720839e08405a72f6d","erc20Proxy":"0x070efeb7e5ffa3d1a59d03a219539551ae60ba43","erc721Proxy":"0x7f10d80f2659aaae790ab03da12be11c4e6008c3","zrxToken":"0x8080c7e4b81ecf23aa6f877cfbfd9b0c228c6ffa","etherToken":"0xc778417e063141139fce010982780140aa0cd5ab","assetProxyOwner":"0x0000000000000000000000000000000000000000","zeroExGovernor":"0x3f46b98061a3e1e1f41dff296ec19402c298f8a9","forwarder":"0xe30f6166fe1cd5f0048abeed3d20360feb4a1fd8","coordinatorRegistry":"0xc2e2f8faf4bf649123b6f94103646cb4a0331006","coordinator":"0xf1ec7d0ba42f15fb5c9e3adbe86431973e44764c","multiAssetProxy":"0xb344afed348de15eb4a9e180205a2b0739628339","staticCallProxy":"0x7b70a148e20b348c320208df84fdd642aab49fd0","erc1155Proxy":"0xaa460127562482faa5df42f2c39a025cd4a1cc0a","devUtils":"0x46b5bc959e8a754c0256fff73bf34a52ad5cdfa9","zrxVault":"0x4af649ffde640ceb34b1afaba3e0bb8e9698cb01","staking":"0x6acab4c9c4e3a0c78435fdb5ad1719c95460a668","stakingProxy":"0x781ee6683595f823208be6540a279f940e6af196","erc20BridgeProxy":"0xa2aa4befed748fba27a3be7dfd2c4b2c6db1f49b","uniswapBridge":"0x0000000000000000000000000000000000000000","uniswapV2Bridge":"0x0000000000000000000000000000000000000000","eth2DaiBridge":"0x0000000000000000000000000000000000000000","erc20BridgeSampler":"0x0000000000000000000000000000000000000000","kyberBridge":"0x0000000000000000000000000000000000000000","chaiBridge":"0x0000000000000000000000000000000000000000","dydxBridge":"0x0000000000000000000000000000000000000000","godsUnchainedValidator":"0x0000000000000000000000000000000000000000","broker":"0x0dd2d6cabbd8ae7d2fe6840fa597a44b1a7e4747","chainlinkStopLimit":"0x407b4128e9ecad8769b2332312a9f655cb9f5f3a","curveBridge":"0x1796cd592d19e3bcd744fbb025bb61a6d8cb2c09","maximumGasPrice":"0x47697b44bd89051e93b4d5857ba8e024800a74ac","dexForwarderBridge":"0x0000000000000000000000000000000000000000","multiBridge":"0x0000000000000000000000000000000000000000","balancerBridge":"0x5d8c9ba74607d2cbc4176882a42d4ace891c1c00","bancorBridge":"0x0000000000000000000000000000000000000000","exchangeProxyGovernor":"0x618f9c67ce7bf1a50afa1e7e0238422601b0ff6e","exchangeProxy":"0xdef1c0ded9bec7f1a1670819833240f027b25eff","exchangeProxyAllowanceTarget":"0xf740b67da229f2f10bcbd38a7979992fcc71b8eb","exchangeProxyTransformerDeployer":"0x1c9a27658dd303a31205a3b245e8993b92d4d502","exchangeProxyFlashWallet":"0x22f9dcf4647084d6c31b2765f6910cd85c178c18","mStableBridge":"0x0000000000000000000000000000000000000000","mooniswapBridge":"0x0000000000000000000000000000000000000000","sushiswapBridge":"0x0000000000000000000000000000000000000000","shellBridge":"0x0000000000000000000000000000000000000000","dodoBridge":"0x0000000000000000000000000000000000000000","creamBridge":"0x0000000000000000000000000000000000000000","transformers":{"wethTransformer":"0x8d822fe2b42f60531203e288f5f357fa79474437","payTakerTransformer":"0x150652244723102faeaefa4c79597d097ffa26c6","affiliateFeeTransformer":"0xa39b40642e8e00435857a0fe7d0655e08cc2217e","fillQuoteTransformer":"0xaf77ff7b00ff528abdcac3f1dcf072de702b758e"}},"42":{"erc20Proxy":"0xaa460127562482faa5df42f2c39a025cd4a1cc0a","erc721Proxy":"0x7b70a148e20b348c320208df84fdd642aab49fd0","zrxToken":"0x2002d3812f58e35f0ea1ffbf80a75a38c32175fa","etherToken":"0xd0a1e359811322d97991e03f863a0c30c2cf029c","exchangeV2":"0x30589010550762d2f0d06f650d8e8b6ade6dbf4b","exchange":"0xf1ec7d0ba42f15fb5c9e3adbe86431973e44764c","assetProxyOwner":"0x0000000000000000000000000000000000000000","zeroExGovernor":"0x6ff734d96104965c9c1b0108f83abc46e6e501df","forwarder":"0x0f64646a5154ae5e58b6dd87ede7b04f508d76f8","coordinatorRegistry":"0x070efeb7e5ffa3d1a59d03a219539551ae60ba43","coordinator":"0x7f10d80f2659aaae790ab03da12be11c4e6008c3","multiAssetProxy":"0x58a01e826e60731247e7de8b446ed4c8535a099c","staticCallProxy":"0xa2aa4befed748fba27a3be7dfd2c4b2c6db1f49b","erc1155Proxy":"0xb344afed348de15eb4a9e180205a2b0739628339","devUtils":"0xc67ae71928568a180b3aad1339dedcf3076876fe","zrxVault":"0x781ee6683595f823208be6540a279f940e6af196","staking":"0x73ea24041e03a012c51a45c307e0ba376af0238c","stakingProxy":"0xe94cb304b3f515be7c95fedcfa249a84995fd748","erc20BridgeProxy":"0x3577552c1fb7a44ad76beeb7ab53251668a21f8d","uniswapBridge":"0x0e85f89f29998df65402391478e5924700c0079d","uniswapV2Bridge":"0x7b3530a635d099de0534dc27e46cd7c57578c3c8","eth2DaiBridge":"0x2d47147429b474d2e4f83e658015858a1312ed5b","erc20BridgeSampler":"0xcf9e66851f274aa4721e54526117876d90d51aa1","kyberBridge":"0xaecfa25920f892b6eb496e1f6e84037f59da7f44","chaiBridge":"0x0000000000000000000000000000000000000000","dydxBridge":"0xc213707de0454008758071c2edc1365621b8a5c5","godsUnchainedValidator":"0x0000000000000000000000000000000000000000","broker":"0xcdeb6d90ee7c96b4c713f7bb4f8604981f7ebe9d","chainlinkStopLimit":"0x0000000000000000000000000000000000000000","curveBridge":"0x81c0ab53a7352d2e97f682a37cba44e54647eefb","maximumGasPrice":"0x67a094cf028221ffdd93fc658f963151d05e2a74","dexForwarderBridge":"0x985d1a95c6a86a3bf85c4d425af984abceaf01de","multiBridge":"0x0000000000000000000000000000000000000000","balancerBridge":"0x407b4128e9ecad8769b2332312a9f655cb9f5f3a","bancorBridge":"0x0000000000000000000000000000000000000000","exchangeProxyGovernor":"0x618f9c67ce7bf1a50afa1e7e0238422601b0ff6e","exchangeProxy":"0xdef1c0ded9bec7f1a1670819833240f027b25eff","exchangeProxyAllowanceTarget":"0xf740b67da229f2f10bcbd38a7979992fcc71b8eb","exchangeProxyTransformerDeployer":"0x1b62de2dbb5e7aa519e9c442721ecef75702807f","exchangeProxyFlashWallet":"0x22f9dcf4647084d6c31b2765f6910cd85c178c18","mStableBridge":"0x0000000000000000000000000000000000000000","mooniswapBridge":"0x0000000000000000000000000000000000000000","sushiswapBridge":"0x0000000000000000000000000000000000000000","shellBridge":"0x0000000000000000000000000000000000000000","dodoBridge":"0x0000000000000000000000000000000000000000","creamBridge":"0x0000000000000000000000000000000000000000","transformers":{"wethTransformer":"0x9ce35b5ee9e710535e3988e3f8731d9ca9dba17d","payTakerTransformer":"0x5a53e7b02a83aa9f60ccf4e424f0442c255bc977","affiliateFeeTransformer":"0x870893920a96a28d4b63c0a7d06a521e3bd074b3","fillQuoteTransformer":"0x71f5b09fe71d496c9e4f24d4de6aba21bf04b000"}},"1337":{"erc20Proxy":"0x1dc4c1cefef38a777b15aa20260a54e584b16c48","erc721Proxy":"0x1d7022f5b17d2f8b695918fb48fa1089c9f85401","erc1155Proxy":"0x6a4a62e5a7ed13c361b176a5f62c2ee620ac0df8","zrxToken":"0x871dd7c2b4b25e1aa18728e9d5f2af4c4e431f5c","etherToken":"0x0b1ba0af832d7c05fd64161e0db78e85978e8082","exchange":"0x48bacb9266a570d521063ef5dd96e61686dbe788","assetProxyOwner":"0x0000000000000000000000000000000000000000","erc20BridgeProxy":"0x371b13d97f4bf77d724e78c16b7dc74099f40e84","zeroExGovernor":"0x0000000000000000000000000000000000000000","forwarder":"0xa4b3e1659c473623287b2cc13b194705cd792525","coordinatorRegistry":"0xaa86dda78e9434aca114b6676fc742a18d15a1cc","coordinator":"0x4d3d5c850dd5bd9d6f4adda3dd039a3c8054ca29","multiAssetProxy":"0xcfc18cec799fbd1793b5c43e773c98d4d61cc2db","staticCallProxy":"0x6dfff22588be9b3ef8cf0ad6dc9b84796f9fb45f","devUtils":"0xb23672f74749bf7916ba6827c64111a4d6de7f11","exchangeV2":"0x48bacb9266a570d521063ef5dd96e61686dbe788","zrxVault":"0xf23276778860e420acfc18ebeebf7e829b06965c","staking":"0x8a063452f7df2614db1bca3a85ef35da40cf0835","stakingProxy":"0x59adefa01843c627ba5d6aa350292b4b7ccae67a","uniswapBridge":"0x0000000000000000000000000000000000000000","uniswapV2Bridge":"0x0000000000000000000000000000000000000000","eth2DaiBridge":"0x0000000000000000000000000000000000000000","erc20BridgeSampler":"0x0000000000000000000000000000000000000000","kyberBridge":"0x0000000000000000000000000000000000000000","chaiBridge":"0x0000000000000000000000000000000000000000","dydxBridge":"0x0000000000000000000000000000000000000000","godsUnchainedValidator":"0x0000000000000000000000000000000000000000","broker":"0x0000000000000000000000000000000000000000","chainlinkStopLimit":"0x0000000000000000000000000000000000000000","curveBridge":"0x0000000000000000000000000000000000000000","maximumGasPrice":"0x0000000000000000000000000000000000000000","dexForwarderBridge":"0x0000000000000000000000000000000000000000","multiBridge":"0x0000000000000000000000000000000000000000","balancerBridge":"0x0000000000000000000000000000000000000000","bancorBridge":"0x0000000000000000000000000000000000000000","exchangeProxyGovernor":"0x0000000000000000000000000000000000000000","exchangeProxy":"0x5315e44798395d4a952530d131249fe00f554565","exchangeProxyAllowanceTarget":"0x8362c3ebd90041b30ec45908332e592721642637","exchangeProxyTransformerDeployer":"0x5409ed021d9299bf6814279a6a1411a7e866a631","exchangeProxyFlashWallet":"0xb9682a8e7920b431f1d412b8510f0077410c8faa","mStableBridge":"0x0000000000000000000000000000000000000000","mooniswapBridge":"0x0000000000000000000000000000000000000000","sushiswapBridge":"0x0000000000000000000000000000000000000000","shellBridge":"0x0000000000000000000000000000000000000000","dodoBridge":"0x0000000000000000000000000000000000000000","creamBridge":"0x0000000000000000000000000000000000000000","transformers":{"wethTransformer":"0xc6b0d3c45a6b5092808196cb00df5c357d55e1d5","payTakerTransformer":"0x7209185959d7227fb77274e1e88151d7c4c368d3","affiliateFeeTransformer":"0x3f16ca81691dab9184cb4606c361d73c4fd2510a","fillQuoteTransformer":"0x99356167edba8fbdc36959e3f5d0c43d1ba9c6db"}}}')},3957:function(e,t,r){"use strict";var a=this&&this.__awaiter||function(e,t,r,a){return new(r||(r=Promise))((function(n,s){function o(e){try{u(a.next(e))}catch(t){s(t)}}function i(e){try{u(a.throw(e))}catch(t){s(t)}}function u(e){e.done?n(e.value):new r((function(t){t(e.value)})).then(o,i)}u((a=a.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,a,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,a&&(n=2&s[0]?a.return:s[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,s[1])).done)return n;switch(a=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(i){s=[6,i],a=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(381),o=r(38),i=r(12),u=r(2965),c=r(2972),l=r(3015),d=r(3190),f=function(){function e(e,t,r){void 0===r&&(r={});var a=i.merge({},u.constants.DEFAULT_SWAP_QUOTER_OPTS,r).chainId;l.assert.isNumber("chainId",a);var n=o.providerUtils.standardizeOrThrow(e);this.provider=n,this.chainId=a,this._exchangeContract=new s.ExchangeContract(t.exchange,e)}return e.prototype.getCalldataOrThrowAsync=function(e,t){return void 0===t&&(t={}),a(this,void 0,void 0,(function(){var t,r;return n(this,(function(a){return l.assert.isValidSwapQuote("quote",e),t=e.orders,r=i.map(t,(function(e){return e.signature})),[2,{calldataHexString:e.type===c.MarketOperation.Buy?this._exchangeContract.marketBuyOrdersFillOrKill(t,e.makerAssetFillAmount,r).getABIEncodedTransactionData():this._exchangeContract.marketSellOrdersFillOrKill(t,e.takerAssetFillAmount,r).getABIEncodedTransactionData(),ethAmount:e.worstCaseQuoteInfo.protocolFeeInWeiAmount,toAddress:this._exchangeContract.address}]}))}))},e.prototype.executeSwapQuoteOrThrowAsync=function(e,t){return a(this,void 0,void 0,(function(){var r,a,s,o,i,u,f,h,p,b,A;return n(this,(function(n){switch(n.label){case 0:return l.assert.isValidSwapQuote("quote",e),r=t.takerAddress,a=t.gasLimit,s=t.ethAmount,void 0!==r&&l.assert.isETHAddressHex("takerAddress",r),void 0!==a&&l.assert.isNumber("gasLimit",a),void 0!==s&&l.assert.isBigNumber("ethAmount",s),o=e.orders,i=e.gasPrice,u=o.map((function(e){return e.signature})),[4,d.swapQuoteConsumerUtils.getTakerAddressOrThrowAsync(this.provider,t)];case 1:return f=n.sent(),h=s||e.worstCaseQuoteInfo.protocolFeeInWeiAmount,e.type!==c.MarketOperation.Buy?[3,3]:(b=e.makerAssetFillAmount,[4,this._exchangeContract.marketBuyOrdersFillOrKill(o,b,u).sendTransactionAsync({from:f,gas:a,gasPrice:i,value:h})]);case 2:return p=n.sent(),[3,5];case 3:return A=e.takerAssetFillAmount,[4,this._exchangeContract.marketSellOrdersFillOrKill(o,A,u).sendTransactionAsync({from:f,gas:a,gasPrice:i,value:h})];case 4:p=n.sent(),n.label=5;case 5:return[2,p]}}))}))},e}();t.ExchangeSwapQuoteConsumer=f},3958:function(e,t,r){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=this&&this.__awaiter||function(e,t,r,a){return new(r||(r=Promise))((function(n,s){function o(e){try{u(a.next(e))}catch(t){s(t)}}function i(e){try{u(a.throw(e))}catch(t){s(t)}}function u(e){e.done?n(e.value):new r((function(t){t(e.value)})).then(o,i)}u((a=a.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,a,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,a&&(n=2&s[0]?a.return:s[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,s[1])).done)return n;switch(a=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(i){s=[6,i],a=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(381),i=r(62),u=r(38),c=r(12),l=r(2965),d=r(2972),f=r(3315),h=r(3015),p=r(3190),b=function(){function e(e,t,r){void 0===r&&(r={});var a=c.merge({},l.constants.DEFAULT_SWAP_QUOTER_OPTS,r).chainId;h.assert.isNumber("chainId",a);var n=u.providerUtils.standardizeOrThrow(e);this.provider=n,this.chainId=a,this._contractAddresses=t,this._forwarder=new o.ForwarderContract(t.forwarder,e)}return e.prototype.getCalldataOrThrowAsync=function(e,t){return void 0===t&&(t={}),n(this,void 0,void 0,(function(){var r,n,o,i,u,p,b,A,y;return s(this,(function(s){return h.assert.isValidForwarderSwapQuote("quote",e,this._getEtherTokenAssetDataOrThrow()),r=a({},l.constants.DEFAULT_FORWARDER_SWAP_QUOTE_GET_OPTS,t).extensionContractOpts,h.assert.isValidForwarderExtensionContractOpts("extensionContractOpts",r),n=r.feeRecipient,o=r.feePercentage,i=e.orders,u=e.worstCaseQuoteInfo,p=n.toLowerCase(),b=c.map(i,(function(e){return e.signature})),A=f.affiliateFeeUtils.getTotalEthAmountWithAffiliateFee(u,o),y=f.affiliateFeeUtils.getFeeAmount(u,o),[2,{calldataHexString:e.type===d.MarketOperation.Buy?this._forwarder.marketBuyOrdersWithEth(i,e.makerAssetFillAmount,b,[y],[p]).getABIEncodedTransactionData():this._forwarder.marketSellOrdersWithEth(i,b,[y],[p]).getABIEncodedTransactionData(),toAddress:this._forwarder.address,ethAmount:A}]}))}))},e.prototype.executeSwapQuoteOrThrowAsync=function(e,t){return n(this,void 0,void 0,(function(){var r,n,o,i,u,c,b,A,y,m,v,g,x,O,_;return s(this,(function(s){switch(s.label){case 0:return h.assert.isValidForwarderSwapQuote("quote",e,this._getEtherTokenAssetDataOrThrow()),r=a({},l.constants.DEFAULT_FORWARDER_SWAP_QUOTE_EXECUTE_OPTS,t),n=r.ethAmount,o=r.takerAddress,i=r.gasLimit,u=r.extensionContractOpts,h.assert.isValidForwarderExtensionContractOpts("extensionContractOpts",u),c=u.feeRecipient,b=u.feePercentage,void 0!==n&&h.assert.isBigNumber("ethAmount",n),void 0!==o&&h.assert.isETHAddressHex("takerAddress",o),void 0!==i&&h.assert.isNumber("gasLimit",i),A=e.orders,y=e.gasPrice,m=A.map((function(e){return e.signature})),[4,p.swapQuoteConsumerUtils.getTakerAddressOrThrowAsync(this.provider,t)];case 1:return v=s.sent(),g=n||f.affiliateFeeUtils.getTotalEthAmountWithAffiliateFee(e.worstCaseQuoteInfo,b),x=f.affiliateFeeUtils.getFeeAmount(e.worstCaseQuoteInfo,b),e.type!==d.MarketOperation.Buy?[3,3]:(_=e.makerAssetFillAmount,[4,this._forwarder.marketBuyOrdersWithEth(A,_,m,[x],[c]).sendTransactionAsync({from:v,gas:i,gasPrice:y,value:g})]);case 2:return O=s.sent(),[3,5];case 3:return[4,this._forwarder.marketSellOrdersWithEth(A,m,[x],[c]).sendTransactionAsync({from:v,gas:i,gasPrice:y,value:g})];case 4:O=s.sent(),s.label=5;case 5:return[2,O]}}))}))},e.prototype._getEtherTokenAssetDataOrThrow=function(){return i.assetDataUtils.encodeERC20AssetData(this._contractAddresses.etherToken)},e}();t.ForwarderSwapQuoteConsumer=b},3959:function(e,t,r){"use strict";var a=this&&this.__awaiter||function(e,t,r,a){return new(r||(r=Promise))((function(n,s){function o(e){try{u(a.next(e))}catch(t){s(t)}}function i(e){try{u(a.throw(e))}catch(t){s(t)}}function u(e){e.done?n(e.value):new r((function(t){t(e.value)})).then(o,i)}u((a=a.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,a,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,a&&(n=2&s[0]?a.return:s[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,s[1])).done)return n;switch(a=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(i){s=[6,i],a=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}},s=this&&this.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&(r[a[n]]=e[a[n]])}return r};Object.defineProperty(t,"__esModule",{value:!0});var o=r(3314),i=r(381),u=r(95),c=r(62),l=r(764),d=r(38),f=r(12),h=r(2965),p=r(2972),b=r(3015),A=r(3960),y=r(3961),m=r(3963),v=r(3964),g=r(3965),x=r(3319),O=r(3970),_=r(3971),k=function(){function e(e,t,r){void 0===r&&(r={});var a=f.merge({},h.constants.DEFAULT_SWAP_QUOTER_OPTS,r),n=a.chainId,s=a.expiryBufferMs,u=a.permittedOrderFeeTypes,c=a.samplerGasLimit,l=d.providerUtils.standardizeOrThrow(e);b.assert.isValidOrderbook("orderbook",t),b.assert.isNumber("chainId",n),b.assert.isNumber("expiryBufferMs",s),this.chainId=n,this.provider=l,this.orderbook=t,this.expiryBufferMs=s,this.permittedOrderFeeTypes=u,this._contractAddresses=r.contractAddresses||o.getContractAddressesForChainOrThrow(n),this._devUtilsContract=new i.DevUtilsContract(this._contractAddresses.devUtils,l),this._protocolFeeUtils=new x.ProtocolFeeUtils(h.constants.PROTOCOL_FEE_UTILS_POLLING_INTERVAL_IN_MS),this._orderStateUtils=new g.OrderStateUtils(this._devUtilsContract);var p=new y.DexOrderSampler(new i.IERC20BridgeSamplerContract(this._contractAddresses.erc20BridgeSampler,this.provider,{gas:c}));this._marketOperationUtils=new y.MarketOperationUtils(p,this._contractAddresses,{chainId:n,exchangeAddress:this._contractAddresses.exchange}),this._swapQuoteCalculator=new _.SwapQuoteCalculator(this._protocolFeeUtils,this._marketOperationUtils)}return e.getSwapQuoterForProvidedOrders=function(t,r,a){return void 0===a&&(a={}),b.assert.doesConformToSchema("orders",r,u.schemas.signedOrdersSchema),b.assert.assert(0!==r.length,"Expected orders to contain at least one order"),new e(t,l.Orderbook.getOrderbookForProvidedOrders(r),a)},e.getSwapQuoterForStandardRelayerAPIUrl=function(t,r,a){void 0===a&&(a={});var n=d.providerUtils.standardizeOrThrow(t);return b.assert.isWebUri("sraApiUrl",r),new e(n,l.Orderbook.getOrderbookForPollingProvider({httpEndpoint:r,pollingIntervalMs:a.orderRefreshIntervalMs||h.constants.DEFAULT_SWAP_QUOTER_OPTS.orderRefreshIntervalMs,perPage:a.perPage||h.constants.DEFAULT_PER_PAGE}),a)},e.getSwapQuoterForStandardRelayerAPIWebsocket=function(t,r,a,n){void 0===n&&(n={});var s=d.providerUtils.standardizeOrThrow(t);return b.assert.isWebUri("sraApiUrl",r),b.assert.isUri("sraWebsocketAPIUrl",a),new e(s,l.Orderbook.getOrderbookForWebsocketProvider({httpEndpoint:r,websocketEndpoint:a}),n)},e.getSwapQuoterForMeshEndpoint=function(t,r,a){void 0===a&&(a={});var n=d.providerUtils.standardizeOrThrow(t);return b.assert.isUri("meshEndpoint",r),new e(n,l.Orderbook.getOrderbookForMeshProvider({websocketEndpoint:r,wsOpts:a.wsOpts}),a)},e.prototype.getMarketSellSwapQuoteForAssetDataAsync=function(e,t,r,s){return void 0===s&&(s={}),a(this,void 0,void 0,(function(){return n(this,(function(a){switch(a.label){case 0:return b.assert.isBigNumber("takerAssetSellAmount",r),[4,this._getSwapQuoteAsync(e,t,r,p.MarketOperation.Sell,s)];case 1:return[2,a.sent()]}}))}))},e.prototype.getMarketBuySwapQuoteForAssetDataAsync=function(e,t,r,s){return void 0===s&&(s={}),a(this,void 0,void 0,(function(){return n(this,(function(a){switch(a.label){case 0:return b.assert.isBigNumber("makerAssetBuyAmount",r),[4,this._getSwapQuoteAsync(e,t,r,p.MarketOperation.Buy,s)];case 1:return[2,a.sent()]}}))}))},e.prototype.getBatchMarketBuySwapQuoteForAssetDataAsync=function(e,t,r,o){return void 0===o&&(o={}),a(this,void 0,void 0,(function(){var a,i,u,c,l,d,p,A=this;return n(this,(function(n){switch(n.label){case 0:return r.map((function(e,t){return b.assert.isBigNumber("makerAssetBuyAmount["+t+"]",e)})),i=f.merge({},h.constants.DEFAULT_SWAP_QUOTE_REQUEST_OPTS,o),u=i.slippagePercentage,c=s(i,["slippagePercentage"]),o.gasPrice?(a=o.gasPrice,b.assert.isBigNumber("gasPrice",a),[3,3]):[3,1];case 1:return[4,this._protocolFeeUtils.getGasPriceEstimationOrThrowAsync()];case 2:a=n.sent(),n.label=3;case 3:return[4,this.orderbook.getBatchOrdersAsync(e,[t])];case 4:return l=n.sent(),d=l.map((function(e){return e.map((function(e){return e.order}))})),p=d.map((function(r,a){var n=v.orderPrunerUtils.pruneForUsableSignedOrders(r,A.permittedOrderFeeTypes,A.expiryBufferMs);return 0===n.length?[m.dummyOrderUtils.createDummyOrderForSampler(e[a],t,A._contractAddresses.uniswapBridge)]:O.sortingUtils.sortOrders(n)})),[4,this._swapQuoteCalculator.calculateBatchMarketBuySwapQuoteAsync(p,r,u,a,c)];case 5:return[2,n.sent()]}}))}))},e.prototype.getMarketBuySwapQuoteAsync=function(e,t,r,s){return void 0===s&&(s={}),a(this,void 0,void 0,(function(){var a,o;return n(this,(function(n){return b.assert.isETHAddressHex("makerTokenAddress",e),b.assert.isETHAddressHex("takerTokenAddress",t),b.assert.isBigNumber("makerAssetBuyAmount",r),a=c.assetDataUtils.encodeERC20AssetData(e),o=c.assetDataUtils.encodeERC20AssetData(t),[2,this.getMarketBuySwapQuoteForAssetDataAsync(a,o,r,s)]}))}))},e.prototype.getMarketSellSwapQuoteAsync=function(e,t,r,s){return void 0===s&&(s={}),a(this,void 0,void 0,(function(){var a,o;return n(this,(function(n){return b.assert.isETHAddressHex("makerTokenAddress",e),b.assert.isETHAddressHex("takerTokenAddress",t),b.assert.isBigNumber("takerAssetSellAmount",r),a=c.assetDataUtils.encodeERC20AssetData(e),o=c.assetDataUtils.encodeERC20AssetData(t),[2,this.getMarketSellSwapQuoteForAssetDataAsync(a,o,r,s)]}))}))},e.prototype.getLiquidityForMakerTakerAssetDataPairAsync=function(e,t){return a(this,void 0,void 0,(function(){var r;return n(this,(function(a){switch(a.label){case 0:return b.assert.isString("makerAssetData",e),b.assert.isString("takerAssetData",t),c.assetDataUtils.decodeAssetDataOrThrow(t),c.assetDataUtils.decodeAssetDataOrThrow(e),[4,this.getAvailableMakerAssetDatasAsync(t)];case 1:return a.sent().includes(e)?[4,this.getSignedOrdersWithFillableAmountsAsync(e,t)]:[2,{makerAssetAvailableInBaseUnits:new d.BigNumber(0),takerAssetAvailableInBaseUnits:new d.BigNumber(0)}];case 2:return r=a.sent(),[2,A.calculateLiquidity(r)]}}))}))},e.prototype.getAvailableTakerAssetDatasAsync=function(e){return a(this,void 0,void 0,(function(){var t;return n(this,(function(r){switch(r.label){case 0:return b.assert.isString("makerAssetData",e),c.assetDataUtils.decodeAssetDataOrThrow(e),[4,this.orderbook.getAvailableAssetDatasAsync()];case 1:return t=r.sent(),[2,t.filter((function(t){return t.assetDataA.assetData===e})).map((function(e){return e.assetDataB.assetData}))]}}))}))},e.prototype.getAvailableMakerAssetDatasAsync=function(e){return a(this,void 0,void 0,(function(){var t;return n(this,(function(r){switch(r.label){case 0:return b.assert.isString("takerAssetData",e),c.assetDataUtils.decodeAssetDataOrThrow(e),[4,this.orderbook.getAvailableAssetDatasAsync()];case 1:return t=r.sent(),[2,t.filter((function(t){return t.assetDataB.assetData===e})).map((function(e){return e.assetDataA.assetData}))]}}))}))},e.prototype.isTakerMakerAssetDataPairAvailableAsync=function(e,t){return a(this,void 0,void 0,(function(){var r;return n(this,(function(a){switch(a.label){case 0:return b.assert.isString("makerAssetData",e),b.assert.isString("takerAssetData",t),c.assetDataUtils.decodeAssetDataOrThrow(t),c.assetDataUtils.decodeAssetDataOrThrow(e),[4,this.getAvailableMakerAssetDatasAsync(t)];case 1:return r=a.sent(),[2,f.includes(r,e)]}}))}))},e.prototype.getSignedOrdersWithFillableAmountsAsync=function(e,t){return a(this,void 0,void 0,(function(){var r,a,s,o;return n(this,(function(n){switch(n.label){case 0:return b.assert.isString("makerAssetData",e),b.assert.isString("takerAssetData",t),c.assetDataUtils.decodeAssetDataOrThrow(t),c.assetDataUtils.decodeAssetDataOrThrow(e),[4,this.orderbook.getOrdersAsync(e,t)];case 1:return r=n.sent(),a=f.map(r,(function(e){return e.order})),s=v.orderPrunerUtils.pruneForUsableSignedOrders(a,this.permittedOrderFeeTypes,this.expiryBufferMs),o=O.sortingUtils.sortOrders(s),[4,this._orderStateUtils.getSignedOrdersWithFillableAmountsAsync(o)];case 2:return[2,n.sent()]}}))}))},e.prototype.isSwapQuoteFillableByTakerAddressAsync=function(e,t){return a(this,void 0,void 0,(function(){var r;return n(this,(function(a){switch(a.label){case 0:return[4,this._devUtilsContract.getBalanceAndAssetProxyAllowance(t,e.takerAssetData).callAsync()];case 1:return[2,[(r=a.sent())[1].isGreaterThanOrEqualTo(e.bestCaseQuoteInfo.totalTakerAssetAmount),r[1].isGreaterThanOrEqualTo(e.worstCaseQuoteInfo.totalTakerAssetAmount)]]}}))}))},e.prototype.destroyAsync=function(){return a(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return[4,this._protocolFeeUtils.destroyAsync()];case 1:return e.sent(),[4,this.orderbook.destroyAsync()];case 2:return e.sent(),[2]}}))}))},e.prototype.getEtherTokenAssetDataOrThrowAsync=function(){return a(this,void 0,void 0,(function(){return n(this,(function(e){return[2,c.assetDataUtils.encodeERC20AssetData(this._contractAddresses.etherToken)]}))}))},e.prototype._getSignedOrdersAsync=function(e,t){return a(this,void 0,void 0,(function(){var r,a,s;return n(this,(function(n){switch(n.label){case 0:return b.assert.isString("makerAssetData",e),b.assert.isString("takerAssetData",t),c.assetDataUtils.decodeAssetDataOrThrow(t),c.assetDataUtils.decodeAssetDataOrThrow(e),[4,this.orderbook.getOrdersAsync(e,t)];case 1:return r=n.sent(),a=f.map(r,(function(e){return e.order})),s=v.orderPrunerUtils.pruneForUsableSignedOrders(a,this.permittedOrderFeeTypes,this.expiryBufferMs),[2,O.sortingUtils.sortOrders(s)]}}))}))},e.prototype._getSwapQuoteAsync=function(e,t,r,o,i){return a(this,void 0,void 0,(function(){var a,u,c,l,d,A;return n(this,(function(n){switch(n.label){case 0:return a=f.merge({},h.constants.DEFAULT_SWAP_QUOTE_REQUEST_OPTS,i),u=a.slippagePercentage,c=s(a,["slippagePercentage"]),b.assert.isString("makerAssetData",e),b.assert.isString("takerAssetData",t),b.assert.isNumber("slippagePercentage",u),i.gasPrice?(l=i.gasPrice,b.assert.isBigNumber("gasPrice",l),[3,3]):[3,1];case 1:return[4,this._protocolFeeUtils.getGasPriceEstimationOrThrowAsync()];case 2:l=n.sent(),n.label=3;case 3:return[4,this._getSignedOrdersAsync(e,t)];case 4:return 0===(d=n.sent()).length&&(d=[m.dummyOrderUtils.createDummyOrderForSampler(e,t,this._contractAddresses.uniswapBridge)]),o!==p.MarketOperation.Buy?[3,6]:[4,this._swapQuoteCalculator.calculateMarketBuySwapQuoteAsync(d,r,u,l,c)];case 5:return A=n.sent(),[3,8];case 6:return[4,this._swapQuoteCalculator.calculateMarketSellSwapQuoteAsync(d,r,u,l,c)];case 7:A=n.sent(),n.label=8;case 8:return[2,A]}}))}))},e}();t.SwapQuoter=k},3960:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(38),n=r(3016);t.calculateLiquidity=function(e){return e.reduce((function(e,t){var r=n.utils.isOrderTakerFeePayableWithMakerAsset(t)?t.fillableMakerAssetAmount.minus(t.fillableTakerFeeAmount):t.fillableMakerAssetAmount,a=n.utils.isOrderTakerFeePayableWithTakerAsset(t)?t.fillableTakerAssetAmount.plus(t.fillableTakerFeeAmount):t.fillableTakerAssetAmount;return{makerAssetAvailableInBaseUnits:e.makerAssetAvailableInBaseUnits.plus(r),takerAssetAvailableInBaseUnits:e.takerAssetAvailableInBaseUnits.plus(a)}}),{makerAssetAvailableInBaseUnits:new a.BigNumber(0),takerAssetAvailableInBaseUnits:new a.BigNumber(0)})}},3961:function(e,t,r){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=this&&this.__awaiter||function(e,t,r,a){return new(r||(r=Promise))((function(n,s){function o(e){try{u(a.next(e))}catch(t){s(t)}}function i(e){try{u(a.throw(e))}catch(t){s(t)}}function u(e){e.done?n(e.value):new r((function(t){t(e.value)})).then(o,i)}u((a=a.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,a,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,a&&(n=2&s[0]?a.return:s[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,s[1])).done)return n;switch(a=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(i){s=[6,i],a=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}},o=this&&this.__read||function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var a,n,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(a=s.next()).done;)o.push(a.value)}catch(i){n={error:i}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e},u=this&&this.__values||function(e){var t="function"===typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var c=r(62),l=r(38),d=r(2965),f=r(2972),h=r(3316),p=r(3123),b=r(3317),A=r(3962),y=r(3318),m=r(3014),v=r(3318);t.DexOrderSampler=v.DexOrderSampler;var g=d.constants.ZERO_AMOUNT,x=p.constants.BUY_SOURCES,O=p.constants.DEFAULT_GET_MARKET_ORDERS_OPTS,_=p.constants.ERC20_PROXY_ID,k=p.constants.FEE_QUOTE_SOURCES,w=p.constants.ONE_ETHER,E=p.constants.SELL_SOURCES,S=function(){function e(e,t,r){this._sampler=e,this._orderDomain=r,this._createOrderUtils=new b.CreateOrderUtils(t),this._wethAddress=t.etherToken}return e.prototype.getMarketSellOrdersAsync=function(e,t,r){return n(this,void 0,void 0,(function(){var n,u,c,d,p,b,v,g,x,_,S,U,F,M,Q,L;return s(this,(function(s){switch(s.label){case 0:if(0===e.length)throw new Error(m.AggregationError.EmptyOrders);return n=a({},O,r),u=o(I(e[0]),2),c=u[0],d=u[1],[4,this._sampler.executeAsync(y.DexOrderSampler.ops.getOrderFillableTakerAmounts(e),c.toLowerCase()===this._wethAddress.toLowerCase()?y.DexOrderSampler.ops.constant(new l.BigNumber(1)):y.DexOrderSampler.ops.getMedianSellRate(D(k,n.excludedSources),c,this._wethAddress,w),y.DexOrderSampler.ops.getSellQuotes(D(E,n.excludedSources),c,d,y.getSampleAmounts(t,n.numSamples,n.sampleDistributionBase)))];case 1:if(p=o.apply(void 0,[s.sent(),3]),b=p[0],v=p[1],g=p[2],x=T(e,b,f.MarketOperation.Sell),_=B(A.sortFillsByAdjustedRate(function(e,t,r){for(var a=[],n=0;n<e.length;n++){var s=e[n],o=h.fillableAmountsUtils.getMakerAssetAmountSwappedAfterOrderFees(s),i=h.fillableAmountsUtils.getTakerAssetAmountSwappedAfterOrderFees(s);a.push({flags:m.FillFlags.SourceNative,exclusionMask:0,input:i,output:o,fillPenalty:t.times(r.fees[m.ERC20BridgeSource.Native]||0),fillData:{source:m.ERC20BridgeSource.Native,order:s}})}return a}(x,v,n)),t,n.dustFractionThreshold),S=function(e,t,r){return P(e,t,r)}(g,v,n),U=i(S),F=C(S),n.excludedSources.includes(m.ERC20BridgeSource.Native)||(U.splice(0,0,_),F.splice.apply(F,i([0,0],_))),M=new A.FillsOptimizer(n.runLimit),Q=R(U,t),!(L=M.optimize(A.sortFillsByAdjustedRate(F),t,Q)))throw new Error(m.AggregationError.NoOptimalPath);return[2,this._createOrderUtils.createSellOrdersFromPath(this._orderDomain,d,c,N(L,!1),n.bridgeSlippage)]}}))}))},e.prototype.getMarketBuyOrdersAsync=function(e,t,r){return n(this,void 0,void 0,(function(){var n,i,u,c,d,f,h,p,b;return s(this,(function(s){switch(s.label){case 0:if(0===e.length)throw new Error(m.AggregationError.EmptyOrders);return n=a({},O,r),i=o(I(e[0]),2),u=i[0],c=i[1],[4,this._sampler.executeAsync(y.DexOrderSampler.ops.getOrderFillableMakerAmounts(e),c.toLowerCase()===this._wethAddress.toLowerCase()?y.DexOrderSampler.ops.constant(new l.BigNumber(1)):y.DexOrderSampler.ops.getMedianSellRate(D(k,n.excludedSources),c,this._wethAddress,w),y.DexOrderSampler.ops.getBuyQuotes(D(x,n.excludedSources),u,c,y.getSampleAmounts(t,n.numSamples,n.sampleDistributionBase)))];case 1:if(d=o.apply(void 0,[s.sent(),3]),f=d[0],h=d[1],p=d[2],!(b=this._createBuyOrdersPathFromSamplerResultIfExists(e,t,f,p,h,n)))throw new Error(m.AggregationError.NoOptimalPath);return[2,b]}}))}))},e.prototype.getBatchMarketBuyOrdersAsync=function(e,t,r){return n(this,void 0,void 0,(function(){var n,o,u,c,l,d,f,h=this;return s(this,(function(s){switch(s.label){case 0:if(0===e.length)throw new Error(m.AggregationError.EmptyOrders);return n=a({},O,r),o=D(x,n.excludedSources),u=i(e.map((function(e){return y.DexOrderSampler.ops.getOrderFillableMakerAmounts(e)})),e.map((function(e){return y.DexOrderSampler.ops.getMedianSellRate(D(k,n.excludedSources),h._wethAddress,I(e[0])[1],w)})),e.map((function(e,r){return y.DexOrderSampler.ops.getBuyQuotes(o,I(e[0])[0],I(e[0])[1],[t[r]])}))),[4,this._sampler.executeBatchAsync(u)];case 1:return c=s.sent(),l=c.splice(0,e.length),d=c.splice(0,e.length),f=c.splice(0,e.length),[2,l.map((function(r,a){return h._createBuyOrdersPathFromSamplerResultIfExists(e[a],t[a],r,f[a],d[a],n)}))]}}))}))},e.prototype._createBuyOrdersPathFromSamplerResultIfExists=function(e,t,r,a,n,s){var u=T(e,r,f.MarketOperation.Buy),c=B(A.sortFillsByAdjustedRate(function(e,t,r){for(var a=[],n=0;n<e.length;n++){var s=e[n],o=h.fillableAmountsUtils.getMakerAssetAmountSwappedAfterOrderFees(s),i=h.fillableAmountsUtils.getTakerAssetAmountSwappedAfterOrderFees(s);a.push({flags:m.FillFlags.SourceNative,exclusionMask:0,input:o,output:i,fillPenalty:t.times(r.fees[m.ERC20BridgeSource.Native]||0).negated(),fillData:{source:m.ERC20BridgeSource.Native,order:s}})}return a}(u,n,s),!0),t,s.dustFractionThreshold),l=function(e,t,r){return P(e,t.negated(),r)}(a,n,s),d=i(l),p=C(l);s.excludedSources.includes(m.ERC20BridgeSource.Native)||(d.splice(0,0,c),p.splice.apply(p,i([0,0],c)));var b=new A.FillsOptimizer(s.runLimit,!0),y=R(d,t,!0),v=b.optimize(A.sortFillsByAdjustedRate(p,!0),t,y);if(v){var g=o(I(e[0]),2),x=g[0],O=g[1];return this._createOrderUtils.createBuyOrdersFromPath(this._orderDomain,x,O,N(v,!0),s.bridgeSlippage)}},e}();function T(e,t,r){return e.map((function(e,n){var s=t[n],o=r===f.MarketOperation.Buy?s:c.orderCalculationUtils.getMakerFillAmount(e,s),i=r===f.MarketOperation.Sell?s:c.orderCalculationUtils.getTakerFillAmount(e,s),u=c.orderCalculationUtils.getTakerFeeAmount(e,i);return a({fillableMakerAssetAmount:o,fillableTakerAssetAmount:i,fillableTakerFeeAmount:u},e)})).filter((function(e){return!e.fillableMakerAssetAmount.isZero()&&!e.fillableTakerAssetAmount.isZero()}))}function D(e,t){return e.filter((function(e){return-1===t.indexOf(e)}))}function B(e,t,r){var a,n,s=t.times(r),o=[],i=g;try{for(var c=u(e),l=c.next();!l.done;l=c.next()){var d=l.value;if(i.gte(t))break;d.input.lt(s)||(i=i.plus(d.input),o.push(d))}}catch(f){a={error:f}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(a)throw a.error}}return o}function P(e,t,r){var a,n,s=[];try{for(var o=u(e),i=o.next();!i.done;i=o.next()){for(var c=i.value,l=[],d=void 0,f=0;f<c.length;f++){var h=c[f];if(h.output.isZero())break;l.push({input:h.input.minus(d?d.input:0),output:h.output.minus(d?d.output:0),fillPenalty:g,parent:0!==l.length?l[l.length-1]:void 0,flags:U(h.source),exclusionMask:r.noConflicts?F(h.source):0,fillData:{source:h.source}}),d=c[f]}l.length>0&&(l[0].fillPenalty=t.times(r.fees[l[0].fillData.source]||0),s.push(l))}}catch(p){a={error:p}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return s}function U(e){return e===m.ERC20BridgeSource.Kyber?m.FillFlags.SourceKyber:e===m.ERC20BridgeSource.Eth2Dai?m.FillFlags.SourceEth2Dai:e===m.ERC20BridgeSource.Uniswap?m.FillFlags.SourceUniswap:m.FillFlags.SourceNative}function F(e){return e===m.ERC20BridgeSource.Kyber?m.FillFlags.SourceEth2Dai|m.FillFlags.SourceUniswap:e===m.ERC20BridgeSource.Eth2Dai||e===m.ERC20BridgeSource.Uniswap?m.FillFlags.SourceKyber:0}function C(e){var t,r,a,n,s=[];try{for(var o=u(e),i=o.next();!i.done;i=o.next()){var c=i.value;try{for(var l=u(c),d=l.next();!d.done;d=l.next()){var f=d.value;s.push(f)}}catch(h){a={error:h}}finally{try{d&&!d.done&&(n=l.return)&&n.call(l)}finally{if(a)throw a.error}}}}catch(p){t={error:p}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return s}function R(e,t,r){var a,n,s,o=g;try{for(var i=u(e),c=i.next();!c.done;c=i.next()){var l=c.value;if(M(l).gte(t)){var d=A.getPathAdjustedOutput(l,t);s&&1!==A.comparePathOutputs(d,o,!!r)||(s=l,o=d)}}}catch(f){a={error:f}}finally{try{c&&!c.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return s}function M(e){return l.BigNumber.sum.apply(l.BigNumber,i(e.map((function(e){return e.input}))))}function N(e,t){var r,a,n=[];try{for(var s=u(e),o=s.next();!o.done;o=s.next()){var i=o.value,c=t?i.input:i.output,l=t?i.output:i.input,d=i.fillData.source;if(0!==n.length&&d!==m.ERC20BridgeSource.Native){var f=n[n.length-1];if(f.source===d){f.totalMakerAssetAmount=f.totalMakerAssetAmount.plus(c),f.totalTakerAssetAmount=f.totalTakerAssetAmount.plus(l),f.subFills.push({makerAssetAmount:c,takerAssetAmount:l});continue}}n.push({source:i.fillData.source,totalMakerAssetAmount:c,totalTakerAssetAmount:l,subFills:[{makerAssetAmount:c,takerAssetAmount:l}],nativeOrder:i.fillData.order})}}catch(h){r={error:h}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(r)throw r.error}}return n}function I(e){var t=[e.makerAssetData,e.takerAssetData].map((function(e){return c.assetDataUtils.decodeAssetDataOrThrow(e)}));if(t.some((function(e){return e.assetProxyId!==_})))throw new Error(m.AggregationError.NotERC20AssetData);return t.map((function(e){return e.tokenAddress}))}t.MarketOperationUtils=S},3962:function(e,t,r){"use strict";var a=this&&this.__read||function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var a,n,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(a=s.next()).done;)o.push(a.value)}catch(i){n={error:i}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o},n=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e},s=this&&this.__values||function(e){var t="function"===typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(38),i=r(2965).constants.ZERO_AMOUNT,u=function(){function e(e,t){this._currentRunCount=0,this._optimalPath=void 0,this._optimalPathAdjustedOutput=i,this._runLimit=e,this._shouldMinimize=!!t}return e.prototype.optimize=function(e,t,r){this._currentRunCount=0,this._optimalPath=r,this._optimalPathAdjustedOutput=r?c(r,t):i;var a={currentPath:[],currentPathInput:i,currentPathAdjustedOutput:i,currentPathFlags:0};if(this._walk(e,t,a),this._optimalPath)return f(this._optimalPath,this._shouldMinimize)},e.prototype._walk=function(e,t,r){var a,i,u=r.currentPath,c=r.currentPathInput,l=r.currentPathAdjustedOutput,f=r.currentPathFlags;if(c.gte(t))this._updateOptimalPath(u,l);else{var h=0!==u.length?u[u.length-1]:void 0,p=function(r){if(r.parent&&r.parent!==h)return"continue";if(b._currentRunCount++>=b._runLimit)return"break";var a=n(u,[r]),s=o.BigNumber.min(t,c.plus(r.input)),i=l.plus(d(r,s.minus(c)).minus(r.fillPenalty)),p=f|r.flags;b._walk(e.filter((function(e){return e!==r&&0===(p&e.exclusionMask)})),t,{currentPath:a,currentPathInput:s,currentPathAdjustedOutput:i,currentPathFlags:p})},b=this;try{for(var A=s(e),y=A.next();!y.done;y=A.next()){if("break"===p(y.value))break}}catch(m){a={error:m}}finally{try{y&&!y.done&&(i=A.return)&&i.call(A)}finally{if(a)throw a.error}}}},e.prototype._updateOptimalPath=function(e,t){this._optimalPath&&1!==this._compareOutputs(t,this._optimalPathAdjustedOutput)||(this._optimalPath=e,this._optimalPathAdjustedOutput=t)},e.prototype._compareOutputs=function(e,t){return l(e,t,this._shouldMinimize)},e}();function c(e,t){var r,a,n=i,o=i,u=i;try{for(var c=s(e),l=c.next();!l.done;l=c.next()){var f=l.value;if(u=u.plus(f.fillPenalty),t&&n.plus(f.input).gte(t)){var h=t.minus(n);o=o.plus(d(f,h)),n=h;break}n=n.plus(f.input),o=o.plus(f.output)}}catch(p){r={error:p}}finally{try{l&&!l.done&&(a=c.return)&&a.call(c)}finally{if(r)throw r.error}}return o.minus(u)}function l(e,t,r){return r?t.comparedTo(e):e.comparedTo(t)}function d(e,t){return o.BigNumber.min(e.output,e.output.div(e.input).times(t))}function f(e,t){return void 0===t&&(t=!1),e.slice(0).sort((function(e,r){var a=h(e),n=h(r),s=a.output.minus(a.fillPenalty).div(a.input),o=n.output.minus(n.fillPenalty).div(n.input);return!e.parent&&!r.parent||e.fillData.source!==r.fillData.source?t?s.comparedTo(o):o.comparedTo(s):p(e,r)?-1:p(r,e)?1:0}))}function h(e){for(var t=e;t.parent;)t=t.parent;return t}function p(e,t){for(var r=t.parent;r;){if(r===e)return!0;r=r.parent}return!1}t.FillsOptimizer=u,t.getPathAdjustedOutput=c,t.comparePathOutputs=l,t.sortFillsByAdjustedRate=f},3963:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(2965),n=r(3123),s=a.constants.NULL_ADDRESS,o=a.constants.NULL_BYTES,i=a.constants.ZERO_AMOUNT,u=n.constants.INFINITE_TIMESTAMP_SEC;t.dummyOrderUtils={createDummyOrderForSampler:function(e,t,r){return{makerAddress:r,takerAddress:s,senderAddress:s,feeRecipientAddress:s,salt:i,expirationTimeSeconds:u,makerAssetData:e,takerAssetData:t,makerFeeAssetData:o,takerFeeAssetData:o,makerFee:i,takerFee:i,makerAssetAmount:i,takerAssetAmount:i,signature:o,chainId:1,exchangeAddress:s}}}},3964:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(62),n=r(12),s=r(2965),o=r(2972),i=r(3016);t.orderPrunerUtils={pruneForUsableSignedOrders:function(e,t,r){return n.filter(e,(function(e){return a.orderCalculationUtils.isOpenOrder(e)&&!a.orderCalculationUtils.willOrderExpire(e,r/s.constants.ONE_SECOND_MS)&&(t.has(o.OrderPrunerPermittedFeeTypes.NoFees)&&e.takerFee.eq(s.constants.ZERO_AMOUNT)||t.has(o.OrderPrunerPermittedFeeTypes.TakerDenominatedTakerFee)&&i.utils.isOrderTakerFeePayableWithTakerAsset(e)||t.has(o.OrderPrunerPermittedFeeTypes.MakerDenominatedTakerFee)&&i.utils.isOrderTakerFeePayableWithMakerAsset(e))}))}}},3965:function(e,t,r){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=this&&this.__awaiter||function(e,t,r,a){return new(r||(r=Promise))((function(n,s){function o(e){try{u(a.next(e))}catch(t){s(t)}}function i(e){try{u(a.throw(e))}catch(t){s(t)}}function u(e){e.done?n(e.value):new r((function(t){t(e.value)})).then(o,i)}u((a=a.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,a,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,a&&(n=2&s[0]?a.return:s[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,s[1])).done)return n;switch(a=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(i){s=[6,i],a=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}},o=this&&this.__read||function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var a,n,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(a=s.next()).done;)o.push(a.value)}catch(i){n={error:i}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o};Object.defineProperty(t,"__esModule",{value:!0});var i=r(62),u=r(124),c=r(2965),l=function(){function e(e){this._devUtils=e}return e.prototype.getSignedOrdersWithFillableAmountsAsync=function(e){return n(this,void 0,void 0,(function(){var t,r,n,l,d,f;return s(this,(function(s){switch(s.label){case 0:return t=e.map((function(e){return e.signature})),[4,this._devUtils.getOrderRelevantStates(e,t).callAsync()];case 1:return r=o.apply(void 0,[s.sent(),3]),n=r[0],l=r[1],d=r[2],f=n.map((function(e,t){return a({},e,{fillableTakerAssetAmount:l[t],isValidSignature:d[t]})})),[2,e.map((function(e,t){var r=f[t],n=r.isValidSignature&&r.orderStatus===u.OrderStatus.Fillable?r.fillableTakerAssetAmount:c.constants.ZERO_AMOUNT;return a({},e,{fillableTakerAssetAmount:n,fillableMakerAssetAmount:i.orderCalculationUtils.getMakerFillAmount(e,n),fillableTakerFeeAmount:i.orderCalculationUtils.getTakerFeeAmount(e,n)})}))]}}))}))},e}();t.OrderStateUtils=l},3966:function(e,t,r){var a={},n=r(3967).initialize(a);function s(e,t){var r=new n(e,t);return t&&(o(t),a[r.id]=r),r}function o(e){a[e]&&a[e].kill()}e.exports={Heart:n,all:a,create:s,destroy:o,destroyHeart:o,heart:function(e){return a[e]},hearts:a,createHeart:s,killHeart:o}},3967:function(e,t,r){var a,n=r(3968),s=r(3969),o=0;function i(e,t){this.heartbeat=0,this.events=[],this.eventList={},this.id=t||"heart_"+Math.random().toString(36)+o++,this.heartrate=e||2500,this.pulses={},this.interval=setInterval(u(this),e),c(this)}function u(e){return function(){var t=e.events;e.heartbeat++;for(var r=0;r<t.length;r++)void 0!==t[r]&&(t[r].execute(),!0===t[r].done&&t[r].kill())}}function c(e){e.interval.unref&&e.interval.unref()}Object.defineProperty(i.prototype,"age",{enumerable:!0,get:function(){return this.heartbeat}}),Object.defineProperty(i.prototype,"name",{enumerable:!0,get:function(){return this.id}}),i.prototype.setHeartrate=function(e){return e&&(this.heartrate=e,clearInterval(this.interval),this.interval=setInterval(u(this),e),0===this.events.length&&c(this)),this},i.prototype.kill=i.prototype.destroy=function(){clearInterval(this.interval),void 0!==a[this.id]&&(a[this.id]=void 0)},i.prototype.newPulse=i.prototype.createPulse=function(e){var t=new n(this,e);return e&&(this.killPulse(e),this.pulses[t.id]=t),t},i.prototype.killPulse=function(e){void 0!==this.pulses[e]&&(this.pulses[e]=void 0)},i.prototype.pulse=function(e){return this.pulses[e]},i.prototype.createEvent=function(e,t,r){"function"===typeof t&&(r=t,t={});var a=t.name,n=t.countTo||t.repeat,o=new s(this,e,a,n,r);return void 0!==a&&(this.killEvent(a),this.eventList[a]=o),this.events.push(o),this.interval.ref&&this.interval.ref(),o},i.prototype.event=function(e){return this.eventList[e]},i.prototype.killEvent=function(e,t){var r;void 0!==this.eventList[e]?(r=this.events.indexOf(this.eventList[e]),this.eventList[e]=void 0):void 0!==t&&(t.id&&(this.eventList[t.id]=void 0),r=this.events.indexOf(t)),r>-1&&this.events.splice(r,1),0===this.events.length&&c(this)},i.prototype.killAllEvents=function(){this.events=[],this.eventList={},c(this)},e.exports={initialize:function(e){return a=e,i}}},3968:function(e,t){var r=0;function a(e,t){this.id=t||"pulse_"+Math.random().toString(36)+r++,this.heart=e,this.heartbeat=e.heartbeat}Object.defineProperty(a.prototype,"missedBeats",{enumerable:!0,get:function(){return this.heart.heartbeat-this.heartbeat}}),Object.defineProperty(a.prototype,"lag",{enumerable:!0,get:function(){return this.missedBeats*this.heart.heartrate}}),a.prototype.beat=function(){return this.heartbeat=this.heart.heartbeat,this},a.prototype.over=function(e){return this.heart.heartbeat-this.heartbeat>e},a.prototype.kill=a.prototype.destroy=function(){this.heart.killPulse(this.id)},e.exports=a},3969:function(e,t){var r=0;function a(e,t,a,n,s){this.id=a||"event_"+Math.random().toString(36)+r++,this.heart=e,this.countTo=n||0,this.executionCount=0,this.done=!1,this.count=0,this.schedule=Math.round(t,10),this.fn=s}a.prototype.execute=function(){this.count++,this.count===this.schedule&&(this.executionCount++,0!==this.countTo&&this.executionCount>=this.countTo?(this.done=!0,this.fn(this.executionCount,!0)):this.fn(this.executionCount,!1),this.count=0)},a.prototype.kill=function(){this.heart.killEvent(this.id,this)},e.exports=a},3970:function(e,t,r){"use strict";var a=this&&this.__read||function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var a,n,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(a=s.next()).done;)o.push(a.value)}catch(i){n={error:i}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o};Object.defineProperty(t,"__esModule",{value:!0});var n=r(95),s=r(12),o=r(3015),i=r(3016);function u(e){var t=a(i.utils.getAdjustedMakerAndTakerAmountsFromTakerFees(e),2),r=t[0];return t[1].div(r)}t.sortingUtils={sortOrders:function(e){o.assert.doesConformToSchema("orders",e,n.schemas.ordersSchema),o.assert.isValidOrdersForSwapQuoter("orders",e);var t=s.cloneDeep(e);return t.sort((function(e,t){var r=u(e),a=u(t);return r.comparedTo(a)})),t}}},3971:function(e,t,r){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=this&&this.__awaiter||function(e,t,r,a){return new(r||(r=Promise))((function(n,s){function o(e){try{u(a.next(e))}catch(t){s(t)}}function i(e){try{u(a.throw(e))}catch(t){s(t)}}function u(e){e.done?n(e.value):new r((function(t){t(e.value)})).then(o,i)}u((a=a.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,a,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,a&&(n=2&s[0]?a.return:s[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,s[1])).done)return n;switch(a=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(i){s=[6,i],a=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}},o=this&&this.__values||function(e){var t="function"===typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},i=this&&this.__read||function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var a,n,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(a=s.next()).done;)o.push(a.value)}catch(i){n={error:i}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o},u=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var c=r(62),l=r(124),d=r(38),f=r(12),h=r(2965),p=r(2972),b=r(3316),A=r(3317),y=r(3014),m=r(3016),v=function(){function e(e,t){this._protocolFeeUtils=e,this._marketOperationUtils=t}return e.prototype.calculateMarketSellSwapQuoteAsync=function(e,t,r,a,o){return n(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,this._calculateSwapQuoteAsync(e,t,r,a,p.MarketOperation.Sell,o)];case 1:return[2,n.sent()]}}))}))},e.prototype.calculateMarketBuySwapQuoteAsync=function(e,t,r,a,o){return n(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,this._calculateSwapQuoteAsync(e,t,r,a,p.MarketOperation.Buy,o)];case 1:return[2,n.sent()]}}))}))},e.prototype.calculateBatchMarketBuySwapQuoteAsync=function(e,t,r,a,o){return n(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,this._calculateBatchBuySwapQuoteAsync(e,t,r,a,p.MarketOperation.Buy,o)];case 1:return[2,n.sent()]}}))}))},e.prototype._calculateBatchBuySwapQuoteAsync=function(e,t,r,a,o,i){return n(this,void 0,void 0,(function(){var u,c,l=this;return s(this,(function(d){switch(d.label){case 0:return u=t.map((function(e){return e.plus(e.multipliedBy(r).integerValue())})),[4,this._marketOperationUtils.getBatchMarketBuyOrdersAsync(e,u,i)];case 1:return c=d.sent(),[4,Promise.all(c.map((function(r,i){return n(l,void 0,void 0,(function(){var n,u,c;return s(this,(function(s){return r?(n=e[i][0],u=n.makerAssetData,c=n.takerAssetData,[2,this._createSwapQuoteAsync(u,c,r,o,t[i],a)]):[2,void 0]}))}))})))];case 2:return[2,d.sent()]}}))}))},e.prototype._calculateSwapQuoteAsync=function(e,t,r,o,i,u){return n(this,void 0,void 0,(function(){var n,d,h,b,y,v;return s(this,(function(s){switch(s.label){case 0:if(!m.utils.isSupportedAssetDataInOrders(e))throw Error(p.SwapQuoterError.AssetDataUnsupported);return n=t.multipliedBy(r).integerValue(),d=[],h=a({},u,{fees:f.mapValues(u.fees,(function(e,t){return e.times(o)}))}),(e[0]?c.assetDataUtils.decodeAssetDataOrThrow(e[0].makerAssetData):{assetProxyId:""}).assetProxyId!==l.AssetProxyId.ERC721?[3,1]:(d=e.map((function(e){return A.CreateOrderUtils.convertNativeOrderToFullyFillableOptimizedOrders(e)})),[3,5]);case 1:return i!==p.MarketOperation.Buy?[3,3]:[4,this._marketOperationUtils.getMarketBuyOrdersAsync(e,t.plus(n),h)];case 2:return d=s.sent(),[3,5];case 3:return[4,this._marketOperationUtils.getMarketSellOrdersAsync(e,t.plus(n),h)];case 4:d=s.sent(),s.label=5;case 5:return b=e[0],y=b.makerAssetData,v=b.takerAssetData,[2,this._createSwapQuoteAsync(y,v,d,i,t,o)]}}))}))},e.prototype._createSwapQuoteAsync=function(e,t,r,o,i,u){return n(this,void 0,void 0,(function(){var n,c,l,d;return s(this,(function(s){switch(s.label){case 0:return[4,this._calculateQuoteInfoAsync(r,i,u,o)];case 1:return n=s.sent(),[4,this._calculateQuoteInfoAsync(r,i,u,o,!0)];case 2:return c=s.sent(),l=this._getSwapQuoteOrdersBreakdown(r,o),d={takerAssetData:t,makerAssetData:e,orders:r.map((function(e){return f.omit(e,"fill")})),bestCaseQuoteInfo:n,worstCaseQuoteInfo:c,gasPrice:u,sourceBreakdown:l},o===p.MarketOperation.Buy?[2,a({},d,{type:p.MarketOperation.Buy,makerAssetFillAmount:i})]:[2,a({},d,{type:p.MarketOperation.Sell,takerAssetFillAmount:i})]}}))}))},e.prototype._calculateQuoteInfoAsync=function(e,t,r,a,o){return void 0===o&&(o=!1),n(this,void 0,void 0,(function(){return s(this,(function(n){return a===p.MarketOperation.Buy?[2,this._calculateMarketBuyQuoteInfoAsync(e,t,r,o)]:[2,this._calculateMarketSellQuoteInfoAsync(e,t,r,o)]}))}))},e.prototype._calculateMarketSellQuoteInfoAsync=function(e,t,r,a){return void 0===a&&(a=!1),n(this,void 0,void 0,(function(){var n,i,u,c,l,f,p,A,m,v,x,O,_,k,w,E,S,T,D,B,P,U,F,C,R,M,N,I,Q,L,W;return s(this,(function(s){switch(s.label){case 0:l=h.constants.ZERO_AMOUNT,f=h.constants.ZERO_AMOUNT,p=h.constants.ZERO_AMOUNT,A=t,m=[],v=a?e.slice().reverse():e;try{for(x=o(v),O=x.next();!O.done&&(_=O.value,k=h.constants.ZERO_AMOUNT,w=h.constants.ZERO_AMOUNT,E=h.constants.ZERO_AMOUNT,!A.lte(0));O=x.next()){if(_.fill.source===y.ERC20BridgeSource.Native)S=b.fillableAmountsUtils.getMakerAssetAmountSwappedAfterOrderFees(_),T=b.fillableAmountsUtils.getTakerAssetAmountSwappedAfterOrderFees(_),D=d.BigNumber.min(A,T),B=g(_,D),w=B.takerAssetAmount,E=B.feeTakerAssetAmount,k=D.div(T).times(S).integerValue(d.BigNumber.ROUND_DOWN);else{P=a?_.makerAssetAmount.div(_.fill.totalMakerAssetAmount):h.constants.ONE_AMOUNT,U=a?_.takerAssetAmount.div(_.fill.totalTakerAssetAmount):h.constants.ONE_AMOUNT,F=a?_.fill.subFills.slice().reverse():_.fill.subFills;try{for(C=o(F),R=C.next();!R.done&&(M=R.value,!A.minus(w).lte(0));R=C.next())N=M.takerAssetAmount.times(U),I=M.makerAssetAmount.times(P),Q=d.BigNumber.min(N,A.minus(w)),L=Q.div(N).times(I).integerValue(d.BigNumber.ROUND_DOWN),w=w.plus(Q),k=k.plus(L)}catch(j){u={error:j}}finally{try{R&&!R.done&&(c=C.return)&&c.call(C)}finally{if(u)throw u.error}}}l=l.plus(k),f=f.plus(w),p=p.plus(E),A=A.minus(w).minus(E),m.push(_)}}catch(V){n={error:V}}finally{try{O&&!O.done&&(i=x.return)&&i.call(x)}finally{if(n)throw n.error}}return[4,this._protocolFeeUtils.calculateWorstCaseProtocolFeeAsync(a?e:m,r)];case 1:return W=s.sent(),[2,{feeTakerAssetAmount:p,takerAssetAmount:f,totalTakerAssetAmount:p.plus(f),makerAssetAmount:l,protocolFeeInWeiAmount:W}]}}))}))},e.prototype._calculateMarketBuyQuoteInfoAsync=function(e,t,r,a){return void 0===a&&(a=!1),n(this,void 0,void 0,(function(){var n,i,u,c,l,f,p,A,m,v,x,O,_,k,w,E,S,T,D,B,P,U,F,C,R,M,N,I,Q,L,W;return s(this,(function(s){switch(s.label){case 0:l=h.constants.ZERO_AMOUNT,f=h.constants.ZERO_AMOUNT,p=h.constants.ZERO_AMOUNT,A=t,m=[],v=a?e.slice().reverse():e;try{for(x=o(v),O=x.next();!O.done&&(_=O.value,k=h.constants.ZERO_AMOUNT,w=h.constants.ZERO_AMOUNT,E=h.constants.ZERO_AMOUNT,!A.lte(0));O=x.next()){if(_.fill.source===y.ERC20BridgeSource.Native)S=b.fillableAmountsUtils.getMakerAssetAmountSwappedAfterOrderFees(_),T=b.fillableAmountsUtils.getTakerAssetAmountSwappedAfterOrderFees(_),k=d.BigNumber.min(A,S),D=k.div(S).multipliedBy(T).integerValue(d.BigNumber.ROUND_UP),B=g(_,D),w=B.takerAssetAmount,E=B.feeTakerAssetAmount;else{P=a?_.makerAssetAmount.div(_.fill.totalMakerAssetAmount):h.constants.ONE_AMOUNT,U=a?_.takerAssetAmount.div(_.fill.totalTakerAssetAmount):h.constants.ONE_AMOUNT,F=a?_.fill.subFills.slice().reverse():_.fill.subFills;try{for(C=o(F),R=C.next();!R.done&&(M=R.value,!A.minus(k).lte(0));R=C.next())N=M.takerAssetAmount.times(U),I=M.makerAssetAmount.times(P),Q=d.BigNumber.min(I,A.minus(k)),L=Q.div(I).times(N).integerValue(d.BigNumber.ROUND_UP),w=w.plus(L),k=k.plus(Q)}catch(j){u={error:j}}finally{try{R&&!R.done&&(c=C.return)&&c.call(C)}finally{if(u)throw u.error}}}l=l.plus(k),f=f.plus(w),p=p.plus(E),A=A.minus(k),m.push(_)}}catch(V){n={error:V}}finally{try{O&&!O.done&&(i=x.return)&&i.call(x)}finally{if(n)throw n.error}}return[4,this._protocolFeeUtils.calculateWorstCaseProtocolFeeAsync(a?e:m,r)];case 1:return W=s.sent(),[2,{feeTakerAssetAmount:p,takerAssetAmount:f,totalTakerAssetAmount:p.plus(f),makerAssetAmount:l,protocolFeeInWeiAmount:W}]}}))}))},e.prototype._getSwapQuoteOrdersBreakdown=function(e,t){var r=d.BigNumber.sum.apply(d.BigNumber,u([h.constants.ZERO_AMOUNT],e.map((function(e){return t===p.MarketOperation.Buy?e.makerAssetAmount:e.takerAssetAmount}))));return e.reduce((function(e,n){var s,o=t===p.MarketOperation.Buy?n.makerAssetAmount:n.takerAssetAmount,i=n.fill.source;return a({},e,((s={})[i]=e[i]?e[i].plus(o.dividedBy(r)):o.dividedBy(r),s))}),{})},e}();function g(e,t){if(m.utils.isOrderTakerFeePayableWithTakerAsset(e)){var r=e.takerAssetAmount.plus(e.takerFee);return{takerAssetAmount:a=t.div(r).multipliedBy(e.takerAssetAmount).integerValue(d.BigNumber.ROUND_CEIL),feeTakerAssetAmount:t.minus(a)}}if(m.utils.isOrderTakerFeePayableWithMakerAsset(e)){if(t.isZero())return{takerAssetAmount:h.constants.ZERO_AMOUNT,feeTakerAssetAmount:h.constants.ZERO_AMOUNT};var a,n=c.orderCalculationUtils.getTakerFeeAmount(e,t),s=c.orderCalculationUtils.getMakerFillAmount(e,t);return{takerAssetAmount:a=n.div(s).multipliedBy(t).integerValue(d.BigNumber.ROUND_UP),feeTakerAssetAmount:t.minus(a)}}return{feeTakerAssetAmount:h.constants.ZERO_AMOUNT,takerAssetAmount:t}}t.SwapQuoteCalculator=v}}]);
//# sourceMappingURL=16.1a41f7ba.chunk.js.map